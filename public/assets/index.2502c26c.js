var we=Object.defineProperty;var ne=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable;var le=(t,e,i)=>e in t?we(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,de=(t,e)=>{for(var i in e||(e={}))Te.call(e,i)&&le(t,i,e[i]);if(ne)for(var i of ne(e))Se.call(e,i)&&le(t,i,e[i]);return t};import{o as a,c as n,a as o,F as f,r as k,t as b,b as ce,d as g,e as N,n as B,f as S,w,g as $,v as D,h as M,i as m,j as C,k as L,l as q,m as Ie,p as y,_ as he,q as xe,C as me,D as pe,s as $e,u as Be,x as De,y as Ue,z as Le,A as Oe,B as Ae,U as Ne,E as Me}from"./vendor.8d5083b8.js";const Fe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}};Fe();var ge="/assets/board.17ad90ee.jpg",T=(t,e)=>{const i=t.__vccOpts||t;for(const[l,r]of e)i[l]=r;return i};const Ee={methods:{goToBoard(t){this.$emit("closeCmp"),this.$router.push(`/board/${t}`)}},computed:{boards(){return this.$store.getters.boards}}},Je={class:"board-recent"},Ge={class:"cmp-header"},Re=o("p",{class:"cmp-container-title"},"Recent",-1),je=o("span",null,null,-1),Pe=[je],Ve=o("hr",{class:"thin-hr"},null,-1),qe={class:"recent-boards-list"},We=["onClick"],He=["src"],Ye={key:1,class:"recent-board-preview-img",src:ge},ze={class:"recent-board-title"};function Xe(t,e,i,l,r,s){return a(),n("section",Je,[o("div",Ge,[Re,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=u=>t.$emit("closeCmp"))},Pe)]),Ve,o("div",qe,[(a(!0),n(f,null,k(s.boards,u=>(a(),n("div",{class:"recent-board-preview flex",key:u._id,onClick:d=>s.goToBoard(u._id)},[u.style.bgImg?(a(),n("img",{key:0,class:"recent-board-preview-img",src:u.style.bgImg.urls.thumb},null,8,He)):(a(),n("img",Ye)),o("p",ze,b(u.title),1)],8,We))),128))])])}var Qe=T(Ee,[["render",Xe]]);const Ze={},Ke={class:"list-slot-container"},et={class:"list-title"},tt={class:"slot-options-list"};function st(t,e){return a(),n("article",Ke,[o("div",et,[ce(t.$slots,"title")]),o("div",tt,[ce(t.$slots,"list")])])}var V=T(Ze,[["render",st]]),ot="/assets/groups.80c5d532.svg";const rt={data(){return{title:"",bgClr:"",bgImg:"",selectedBg:"",photos:["https://images.unsplash.com/photo-1648138754706-4fccd621a5f9?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDR8MzE3MDk5fHx8fHwyfHwxNjQ4NjUyNTQ3&ixlib=rb-1.2.1&q=80&w=400","https://images.unsplash.com/photo-1648537949908-25fc530b5f7d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDF8MzE3MDk5fHx8fHwyfHwxNjQ4NjUyNTQ3&ixlib=rb-1.2.1&q=80&w=400","https://images.unsplash.com/photo-1647960666864-01fdaed3431f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDE0fDMxNzA5OXx8fHx8Mnx8MTY0ODY1MjU0Nw&ixlib=rb-1.2.1&q=80&w=400"],isRequired:!1,bgColors:[{id:"l101",color:"#61bd4f",isSelected:!1},{id:"l102",color:"#f2d600",isSelected:!1},{id:"l103",color:"#ff9f1a",isSelected:!1},{id:"l104",color:"#eb5a46",isSelected:!1},{id:"l105",color:"#c377e0",isSelected:!1},{id:"l106",color:"#0079bf",isSelected:!1},{id:"l107",color:"#00c2e0",isSelected:!1},{id:"l108",color:"#51e898",isSelected:!1},{id:"l109",color:"#ff78cb",isSelected:!1},{id:"l110",color:"#344563",isSelected:!1}]}},methods:{requiredTitle(){this.title||(this.isRequired=!0)},async addBoard(){const t=await this.$store.dispatch({type:"addBoard",title:this.title,bgClr:this.bgClr,bgImg:this.bgImg});this.$router.push(`/board/${t}`),this.$emit("closeCmp")},selectBg(t,e){this[t]=e,this.selectedBg=e}},computed:{required(){return{required:this.isRequired}}},components:{listSlot:V}},it={class:"create-board"},at={class:"cmp-header"},nt=o("p",{class:"cmp-container-title"},"Create board",-1),lt=o("span",null,null,-1),dt=[lt],ct=o("hr",{class:"thin-hr"},null,-1),ut={class:"choose-bg-container"},ht=o("p",{class:"choose-bg-title"},"Background",-1),mt=o("img",{class:"bg-preview-img",src:ot},null,-1),pt=[mt],gt=["src","onClick"],_t=["onClick"],bt={class:"add-title-container"},vt=o("p",{class:"add-title-title"},"Board title",-1),ft={key:0,class:"add-title-required"},kt=["disabled"];function yt(t,e,i,l,r,s){const u=g("list-slot"),d=N("focus");return a(),n("section",it,[o("div",at,[nt,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=h=>t.$emit("closeCmp"))},dt)]),ct,o("div",ut,[ht,o("div",{class:"bg-preview",style:B({backgroundColor:r.selectedBg,backgroundImage:"url("+r.selectedBg+")"})},pt,4),S(u,null,{list:w(()=>[(a(!0),n(f,null,k(r.photos,(h,c)=>(a(),n("img",{key:c,class:"unsplash-result-small",src:h,alt:"img",onClick:p=>s.selectBg("bgImg",h)},null,8,gt))),128))]),_:1}),S(u,null,{list:w(()=>[(a(!0),n(f,null,k(r.bgColors,h=>(a(),n("div",{key:h.id,class:"label-option flex pointer",style:B({backgroundColor:h.color}),onClick:c=>s.selectBg("bgClr",h.color)},null,12,_t))),128))]),_:1})]),o("div",bt,[vt,$(o("input",{class:M(["add-title-input",s.required]),type:"text","onUpdate:modelValue":e[1]||(e[1]=h=>r.title=h),placeholder:"Enter title..",onBlur:e[2]||(e[2]=(...h)=>s.requiredTitle&&s.requiredTitle(...h)),onFocus:e[3]||(e[3]=h=>r.isRequired=!1)},null,34),[[D,r.title],[d]]),r.isRequired?(a(),n("p",ft," \u{1F44B} Board title is required ")):m("",!0)]),o("button",{class:"create-board-btn",onClick:e[4]||(e[4]=(...h)=>s.addBoard&&s.addBoard(...h)),disabled:!r.title}," Create ",8,kt)])}var _e=T(rt,[["render",yt]]);const Ct={props:{user:Object},methods:{},computed:{imgAvatar(){if(this.user.imgUrl)return this.user.imgUrl},nameAvatar(){if(!this.user.imgUrl){const e=this.user.fullname.split(" ");var t="";return e.forEach(i=>{t+=i.charAt(0)}),t.toUpperCase()}}}},wt={class:"user-avatar"},Tt={key:0,class:"user-avatar-guest flex"},St=["src"],It={key:2,class:"user-avatar-name flex"};function xt(t,e,i,l,r,s){return a(),n("div",wt,[i.user.username==="Guest"?(a(),n("span",Tt)):i.user.imgUrl?(a(),n("img",{key:1,class:"user-avatar-img",src:s.imgAvatar},null,8,St)):(a(),n("span",It,b(s.nameAvatar),1))])}var G=T(Ct,[["render",xt]]),$t="/assets/trello.92b2080b.svg",Bt="/assets/bell.adefe4be.svg";const Dt={data(){return{handles:{isRecent:!1,isCreateBoard:!1},isBlue:!1,isLogin:!1}},methods:{openCmp(t){if(typeof t!="string"){for(let e in this.handles)this.handles[e]=!1;return}if(this.handles[t]===!0)this.handles[t]=!1;else{for(let e in this.handles)this.handles[e]=!1;this.handles[t]=!0}}},computed:{bgc(){return{blue:this.isBlue}},currLoggedInUser(){const t=this.$store.getters.loggedinUser;return t&&(this.userLoggedIn=!0),t||this.$store.getters.getGuestUser},userIsLoggedIn(){if(this.$store.getters.loggedinUser)return!0}},watch:{"$route.path":{immediate:!0,handler(){const t=this.$route.path;t==="/board"||t==="/login"?this.isBlue=!0:this.isBlue=!1}}},components:{boardRecent:Qe,createBoard:_e,userAvatar:G}},Ut={class:"app-header-inner flex"},Lt=o("img",{class:"logo-img",src:$t,alt:""},null,-1),Ot=o("h3",{class:"logo"},"Mellow",-1),At={class:"app-header-nav flex"},Nt={class:"app-header-left-nav flex"},Mt=L(" Workspace "),Ft=o("span",{class:"header-arrow-icon"},null,-1),Et=[Mt,Ft],Jt=L(" Recent "),Gt=o("span",{class:"header-arrow-icon"},null,-1),Rt=[Jt,Gt],jt=L(" Create "),Pt={key:0,class:"header-arrow-icon"},Vt={class:"app-header-right-nav flex"},qt=L("Log in"),Wt=L("Sign up"),Ht=o("img",{src:Bt},null,-1);function Yt(t,e,i,l,r,s){const u=g("router-link"),d=g("board-recent"),h=g("create-board"),c=g("user-avatar");return a(),n("header",{class:M(["app-header-container",s.bgc])},[o("div",Ut,[S(u,{class:"logo-link flex",to:"/"},{default:w(()=>[Lt,Ot]),_:1}),o("nav",At,[o("div",Nt,[o("button",{class:"btn-header flex",onClick:e[0]||(e[0]=p=>t.$router.push("/board"))},Et),o("button",{class:"btn-header recent flex",onClick:e[1]||(e[1]=p=>s.openCmp("isRecent"))},Rt),r.handles.isRecent?(a(),C(d,{key:0,onCloseCmp:s.openCmp},null,8,["onCloseCmp"])):m("",!0),o("button",{class:"btn-header create flex",onClick:e[2]||(e[2]=p=>s.openCmp("isCreateBoard"))},[jt,r.handles.isCreateBoard?(a(),n("span",Pt)):m("",!0)]),r.handles.isCreateBoard?(a(),C(h,{key:1,onCloseCmp:s.openCmp},null,8,["onCloseCmp"])):m("",!0)]),o("div",Vt,[s.userIsLoggedIn?m("",!0):(a(),C(u,{key:0,class:"login-btn",onClick:e[3]||(e[3]=p=>r.isLogin=!0),to:"/login"},{default:w(()=>[qt]),_:1})),s.userIsLoggedIn?m("",!0):(a(),C(u,{key:1,class:"signup-btn",onClick:e[4]||(e[4]=p=>r.isLogin=!0),to:"/login"},{default:w(()=>[Wt]),_:1})),S(u,{to:"/login",class:"header-bell pointer"},{default:w(()=>[Ht]),_:1}),S(u,{to:"/login",class:"avatar-login-link"},{default:w(()=>[s.currLoggedInUser?(a(),C(c,{key:0,class:"pointer",user:s.currLoggedInUser},null,8,["user"])):m("",!0)]),_:1})])])])],2)}var zt=T(Dt,[["render",Yt]]);const Xt={components:{appHeader:zt},created(){this.$store.dispatch({type:"loadBoards"}),this.$store.dispatch({type:"loadGuestUser"})}};function Qt(t,e,i,l,r,s){const u=g("app-header"),d=g("router-view");return a(),n(f,null,[S(u),S(d)],64)}var Zt=T(Xt,[["render",Qt]]),Kt="/assets/mellow-cover.354e12f4.png",es="/assets/example-board.a4540770.png";const ts={components:{},data(){return{}},created(){},methods:{},computed:{},unmounted(){}},ss={class:"home-page-container"},os={class:"title-container"},rs=o("h1",{class:"home-logo"}," Mellow helps teams move work forward ",-1),is=o("h3",{class:"title"},"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your your team works is unique - accomplish it all with Mellow",-1),as=o("span",{class:"guest-login-button"},"See Demo",-1),ns=o("div",{class:"homepage-img"},[o("img",{class:"home-page-img",src:Kt})],-1),ls=o("div",{class:"secondary-text"},[o("h1",null," It's more than work. It's a way of working together."),o("h3",null,"Start with a Mellow board, lists, and cards. Customize and expand with more features as your teamwork grows. Manage projects, organize tasks, and build team spirit\u2014all in one place."),o("img",{src:es,alt:""})],-1);function ds(t,e,i,l,r,s){const u=g("router-link");return a(),n("section",ss,[o("div",os,[rs,is,S(u,{class:"home-link",to:"/board"},{default:w(()=>[as]),_:1}),ns]),ls])}var cs=T(ts,[["render",ds]]);const us={},hs={class:"about"},ms=o("h1",null,"This is an about page",-1),ps=[ms];function gs(t,e){return a(),n("div",hs,ps)}var _s=T(us,[["render",gs]]);const J={saveToStorage:bs,loadFromStorage:vs,makeId:ks,getRandomIntInclusive:ys,delay:fs,isDarkColor:Cs};function bs(t,e){localStorage.setItem(t,JSON.stringify(e)||null)}function vs(t){let e=localStorage.getItem(t);return e?JSON.parse(e):void 0}function fs(t=1500){return new Promise(e=>{setTimeout(e,t)})}function ks(t=8){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=0;l<t;l++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}function ys(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)}function Cs(t){if(!t)return;t=t.substring(1);const e=parseInt(t,16),i=e>>16&255,l=e>>8&255,r=e>>0&255;var s=.2126*i+.7152*l+.0722*r;return s<100}const ws="/api/";var Ts=q.create({withCredentials:!0});const A={get(t,e){return P(t,"GET",e)},post(t,e){return P(t,"POST",e)},put(t,e){return P(t,"PUT",e)},delete(t,e){return P(t,"DELETE",e)}};async function P(t,e="GET",i=null){try{return(await Ts({url:`${ws}${t}`,method:e,data:i,params:e==="GET"?i:null})).data}catch(l){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data:`,i),console.dir(l),l.response&&l.response.status,l}}const ue="user-updated",Ss="",O=Is();O.setup();function Is(){var t=null;return{async setup(){t=Ie(Ss)},on(i,l){t.on(i,l)},off(i,l=null){!t||(l?t.off(i,l):t.removeAllListeners(i))},emit(i,l){t.emit(i,l)},terminate(){t=null}}}const W="loggedinUser",x={login:Us,logout:Os,signup:Ls,getLoggedinUser:be,getUsers:xs,getById:$s,remove:Bs,update:Ds,getGuestUser:As,getDefaultMembers:Ns};async function xs(){return await A.get("user")}async function $s(t){const e=await A.get(`user/${t}`);return gWatchedUser=e,e}function Bs(t){return A.delete(`user/${t}`)}async function Ds(t){return t=await A.put(`user/${t._id}`,t),be()._id===t._id&&H(t),t}async function Us(t){const e=await A.post("auth/login",t);if(O.emit("set-user-socket",e._id),e)return H(e)}async function Ls(t){const e=await A.post("auth/signup",t);return O.emit("set-user-socket",e._id),H(e)}async function Os(){return sessionStorage.removeItem(W),O.emit("unset-user-socket"),await A.post("auth/logout")}function H(t){return sessionStorage.setItem(W,JSON.stringify(t)),t}function be(){return JSON.parse(sessionStorage.getItem(W)||"null")}function As(){return{_id:"624298a9e48762573484a9e5",username:"Guest",fullname:"Guest User",imgUrl:"../src/assets/svgs/guest.svg"}}function Ns(){return[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg"},{_id:"u106",fullname:"Almog Ben-Binyamin",username:"Almog",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2021-12-10_at_16.38.26_sft38h.jpg"},{_id:"u107",fullname:"Zviki Zaks",username:"Zviki",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.17.15_rq2ja9.jpg"}]}const j="board",E={query:Ms,getById:Fs,remove:Es,save:Js,getEmptyBoard:Ps,getEmptyGroup:Rs,getEmptyTask:js,uploadImg:Gs};async function Ms(t={}){return await A.get(j,t)}async function Fs(t){return await A.get(`${j}/${t}`)}async function Es(t){return await A.delete(`${j}/${t}`)}async function Js(t,e){if(e){e.id=J.makeId(),e.createdAt=Date.now();const l=x.getLoggedinUser()||x.getGuestUser();e.byMember={_id:l._id,fullname:l.fullname,imgUrl:l.imgUrl},t.activities.length>=30&&t.activities.shift(),t.activities.push(e)}const i=t._id?await A.put(`${j}/${t._id}`,t):await A.post(j,t);return O.emit("board updated"),i}async function Gs(t){const e="cajan_22",l="https://api.cloudinary.com/v1_1/cajan22a/image/upload",r=new FormData;return r.append("file",t.target.files[0]),r.append("upload_preset",e),fetch(l,{method:"POST",body:r}).then(s=>s.json()).then(s=>s).catch(s=>console.error(s))}function Rs(){return{id:"g-"+J.makeId(),title:"Enter Group Name",tasks:[],style:{}}}function js(){return{id:"t-"+J.makeId(),title:"",createdAt:Date.now(),style:{},attachments:[]}}function Ps(){return{title:"",isFavorite:!1,createdAt:Date.now(),archivedAt:null,createdBy:x.getLoggedinUser()||x.getGuestUser(),style:{bgClr:"",bgImg:""},labels:[],members:x.getDefaultMembers(),groups:[],activities:[]}}function Vs(t,e){const i=({detail:l})=>{e(l)};return window.addEventListener(t,i),()=>{window.removeEventListener(t,i)}}function qs(t,e){window.dispatchEvent(new CustomEvent(t,{detail:e}))}const Ws={on:Vs,emit:qs},Hs={props:{imgUrls:Array},data(){return{isLoading:!1,input:null}},methods:{onAttachImg(t){this.isLoading=!0,this.$emit("attachImg",t),this.isLoading=!1},closeCmp(){this.$emit("closeCmp")}}},Ys={class:"attachment-preview cmp-preview"},zs={class:"cmp-header"},Xs=o("span",null,null,-1),Qs=[Xs],Zs=o("p",{class:"attach-from"},"Attach from...",-1),Ks=o("hr",{class:"thin-hr"},null,-1),eo=o("div",{class:"pointer"},"Computer",-1),to=o("hr",{class:"thin-hr"},null,-1),so=o("div",{class:"attach-link-title"},"Attach a link",-1),oo=o("div",{class:"attach-preview"},null,-1);function ro(t,e,i,l,r,s){const u=N("focus");return a(),n("section",Ys,[o("div",zs,[o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=(...d)=>s.closeCmp&&s.closeCmp(...d))},Qs)]),o("label",null,[o("input",{type:"file",onChange:e[1]||(e[1]=(...d)=>s.onAttachImg&&s.onAttachImg(...d)),hidden:""},null,32),Zs,Ks,eo]),to,so,$(o("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>r.input=d),class:"attach-input",type:"text",placeholder:"Paste any link here..."},null,512),[[u],[D,r.input]]),o("button",{class:"attach-link-btn",onClick:e[3]||(e[3]=(...d)=>t.showLink&&t.showLink(...d))},"Attach"),oo])}var io=T(Hs,[["render",ro]]);const ao={name:"date-preview",props:{dueDate:String},created(){this.date.dueDate=this.dueDate},data(){return{date:{dueDate:null,isCompleted:!1}}},methods:{saveDate(){this.$emit("saveDate",this.date)},closeCmp(){this.date.dueDate=this.dueDate,this.$emit("closeCmp")}}},no={class:"date-preview pointer"},lo={class:"date-header"},co=o("h3",{class:"date-title"},"Dates",-1),uo=o("hr",{class:"thin-hr"},null,-1);function ho(t,e,i,l,r,s){const u=g("v-date-picker");return a(),n("section",no,[o("div",lo,[co,o("button",{class:"add-task-close-cmp-btn",onClick:e[0]||(e[0]=(...d)=>s.closeCmp&&s.closeCmp(...d))})]),uo,S(u,{modelValue:r.date.dueDate,"onUpdate:modelValue":e[1]||(e[1]=d=>r.date.dueDate=d),mode:"dateTime","minute-increment":5},null,8,["modelValue"]),o("button",{class:"save-btn date-btn",onClick:e[2]||(e[2]=(...d)=>s.saveDate&&s.saveDate(...d))},"Save"),o("button",{class:"remove-date-btn date-btn",onClick:e[3]||(e[3]=(...d)=>s.closeCmp&&s.closeCmp(...d))},"Remove")])}var mo=T(ao,[["render",ho]]);const po={props:{type:String},methods:{closeCmp(){this.$emit("closeCmp")},remove(){this.$emit("remove")}}},go={class:"delete-preview"},_o={class:"delete-header flex"},bo={class:"cmp-header-title"},vo=o("hr",{class:"thin-hr"},null,-1),fo={class:"delete-content-container"},ko={key:0},yo={key:1},Co={key:2};function wo(t,e,i,l,r,s){return a(),n("section",go,[o("div",_o,[o("span",bo,"Delete "+b(i.type)+"?",1),o("a",{onClick:e[0]||(e[0]=(...u)=>s.closeCmp&&s.closeCmp(...u)),class:"close-delete pointer"})]),vo,o("div",fo,[i.type==="task"||i.type==="list"?(a(),n("p",ko," All actions will be removed from the activity feed and you won\u2019t be able to re-open the card. There is no undo. ")):i.type==="label"?(a(),n("p",yo," There is no undo. This will remove this label from all cards and destroy its history. ")):i.type==="checklist"?(a(),n("p",Co,"Deleting a checklist is permanent and there is no way to get it back.")):m("",!0),o("a",{onClick:e[1]||(e[1]=(...u)=>s.remove&&s.remove(...u)),class:"confirm-delete"},"Delete")])])}var Y=T(po,[["render",wo]]);const To={props:{boardLabels:Array,taskLabelIds:Array},emits:["addLabelToTask","addLabelToBoard","updateBoardLabels"],components:{listSlot:V,deleteCmp:Y},data(){return{labels:[],filterTxt:"",defaultLabels:[{id:"l101",color:"#61bd4f",title:"",isSelected:!1},{id:"l102",color:"#f2d600",title:"",isSelected:!1},{id:"l103",color:"#ff9f1a",title:"",isSelected:!1},{id:"l104",color:"#eb5a46",title:"",isSelected:!1},{id:"l105",color:"#c377e0",title:"",isSelected:!1},{id:"l106",color:"#0079bf",title:"",isSelected:!1},{id:"l107",color:"#00c2e0",title:"",isSelected:!1},{id:"l108",color:"#51e898",title:"",isSelected:!1},{id:"l109",color:"#ff78cb",title:"",isSelected:!1},{id:"l110",color:"#344563",title:"",isSelected:!1}],isCreate:!1,isChange:!1,isRemove:!1,selectedLabel:null,labelToChange:{color:null,title:""}}},created(){this.aggregateLabels()},methods:{toggleLabel(t){this.$emit("addLabelToTask",t)},closeCmp(){this.$emit("closeCmp")},aggregateLabels(){this.labels=[],this.labels=this.boardLabels.map(t=>{var e;return t=JSON.parse(JSON.stringify(t)),(e=this.taskLabelIds)!=null&&e.includes(t.id)&&(t.inTask=!0),t})},openCreate(t){if(typeof t=="string"){this.labelToChange=JSON.parse(JSON.stringify(this.boardLabels.find(i=>i.id===t)));const e=this.defaultLabels.find(i=>i.color===this.labelToChange.color);this.selectLabel(e.id),this.isChange=!0;return}this.isCreate=!0},selectLabel(t){this.defaultLabels.forEach(i=>{i.isSelected=i.id===t});const e=this.defaultLabels.find(i=>i.id===t);this.labelToChange.color=e.color},async changeBoardLabels(){const t=JSON.parse(JSON.stringify(this.labelToChange));this.isCreate&&(t.id="l"+J.makeId()),await this.$emit("updateBoardLabels",t),this.aggregateLabels(),this.isCreate=!1,this.isChange=!1},async removeLabelFromBoard(){const t=this.labelToChange.id;await this.$emit("updateBoardLabels",t),this.aggregateLabels(),this.isCreate=!1,this.isChange=!1,this.isRemove=!1}},computed:{getLabels(){const t=new RegExp(this.filterTxt,"i");return this.labels.filter(e=>t.test(e.title))},cmpTitle(){return this.isChange?"Change label":this.isCreate?"Create label":"Labels"},createBtn(){if(this.isCreate)return"Create";if(this.isChange)return"Save"}},watch:{taskLabelIds(){this.aggregateLabels()},boardLabels(){this.aggregateLabels()}}},So={key:0,class:"cmp-preview"},Io={class:"cmp-header"},xo=o("span",null,null,-1),$o=[xo],Bo={class:"cmp-container-title"},Do=o("span",null,null,-1),Uo=[Do],Lo=o("hr",{class:"thin-hr"},null,-1),Oo={key:0,class:"select-label-container"},Ao={class:"choose-labels-container"},No=o("p",{class:"labels-title"},"Labels",-1),Mo={class:"labels-list flex clean-list"},Fo=["onClick"],Eo={class:"label-title"},Jo={key:0,class:"v-icon"},Go=["onClick"],Ro=o("a",null,null,-1),jo=[Ro],Po={key:1,class:"create-label-container"},Vo=o("p",{class:"labels-title"},"Name",-1),qo=L("Select a color"),Wo=["onClick"],Ho={key:0,class:"v-icon"},Yo={class:"create-label-buttons-container flex"};function zo(t,e,i,l,r,s){const u=g("list-slot"),d=g("delete-cmp"),h=N("focus");return r.isRemove?(a(),C(d,{key:1,type:"label",onRemove:s.removeLabelFromBoard,onCloseCmp:s.closeCmp},null,8,["onRemove","onCloseCmp"])):(a(),n("section",So,[o("div",Io,[r.isCreate||r.isChange||r.isRemove?(a(),n("a",{key:0,class:"back-to-cmp-btn",onClick:e[0]||(e[0]=c=>(r.isCreate=!1,r.isChange=!1))},$o)):m("",!0),o("p",Bo,b(s.cmpTitle),1),o("a",{class:"close-cmp-btn",onClick:e[1]||(e[1]=(...c)=>s.closeCmp&&s.closeCmp(...c))},Uo)]),Lo,!r.isCreate&&!r.isChange&&!r.isRemove?(a(),n("section",Oo,[$(o("input",{class:"label-input",type:"text","onUpdate:modelValue":e[2]||(e[2]=c=>r.filterTxt=c),placeholder:"Search labels.."},null,512),[[D,r.filterTxt],[h]]),o("div",Ao,[No,o("ul",Mo,[(a(!0),n(f,null,k(s.getLabels,c=>(a(),n("li",{class:"label-option-container flex",key:c.id},[o("div",{class:"label-option flex pointer",style:B({backgroundColor:c.color}),onClick:p=>s.toggleLabel(c.id)},[o("span",Eo,b(c.title),1),c.inTask?(a(),n("span",Jo)):m("",!0)],12,Fo),o("span",{class:"change-label-btn",onClick:p=>s.openCreate(c.id)},jo,8,Go)]))),128))])]),o("button",{class:"open-create-label-btn",onClick:e[3]||(e[3]=(...c)=>s.openCreate&&s.openCreate(...c))}," Create a new label ")])):(a(),n("section",Po,[o("label",null,[Vo,$(o("input",{type:"text",class:"label-input","onUpdate:modelValue":e[4]||(e[4]=c=>r.labelToChange.title=c)},null,512),[[D,r.labelToChange.title],[h]])]),S(u,null,{title:w(()=>[qo]),list:w(()=>[(a(!0),n(f,null,k(r.defaultLabels,c=>(a(),n("div",{key:c.id,class:"label-option flex pointer",style:B({backgroundColor:c.color}),onClick:p=>s.selectLabel(c.id)},[c.isSelected?(a(),n("span",Ho)):m("",!0)],12,Wo))),128))]),_:1}),o("div",Yo,[o("button",{class:"create-label-btn",onClick:e[5]||(e[5]=y((...c)=>s.changeBoardLabels&&s.changeBoardLabels(...c),["stop"]))},b(s.createBtn),1),r.isChange?(a(),n("button",{key:0,class:"delete-label-btn",onClick:e[6]||(e[6]=y(c=>r.isRemove=!0,["stop"]))}," Delete ")):m("",!0)])]))]))}var Xo=T(To,[["render",zo]]);const Qo={props:{boardMembers:Object,task:Object},components:{userAvatar:G},data(){return{members:[],filterTxt:""}},created(){this.aggregateMembers()},methods:{closeCmp(){this.$emit("closeCmp")},toggleMemberInTask(t){this.$emit("toggleMemberInTask",t)},aggregateMembers(){var e;this.members=[];let t=(e=this.task.members)==null?void 0:e.map(i=>i._id);this.boardMembers.forEach(i=>{t!=null&&t.includes(i._id)&&(i.isCheck=!0),this.members.push(JSON.parse(JSON.stringify(i)))})}},computed:{getMembers(){const t=new RegExp(this.filterTxt,"i");return this.members.filter(e=>t.test(e.fullname))}},watch:{task:{handler(){this.aggregateMembers()},deep:!0}}},Zo={class:"members-preview cmp-preview"},Ko={class:"cmp-header"},er=o("p",{class:"cmp-container-title"},"Members",-1),tr=o("span",null,null,-1),sr=[tr],or=o("hr",{class:"thin-hr"},null,-1),rr={class:"members-container"},ir={class:"input-container"},ar=o("h4",{class:"members-preview-title"},"Board members",-1),nr={class:"board-members-container"},lr=["onClick"],dr={class:"member-fullname"},cr={key:0,class:"member-check"},ur=o("div",null,null,-1);function hr(t,e,i,l,r,s){const u=g("user-avatar"),d=N("focus");return a(),n("section",Zo,[o("div",Ko,[er,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=(...h)=>s.closeCmp&&s.closeCmp(...h))},sr)]),or,o("div",rr,[o("div",ir,[$(o("input",{"onUpdate:modelValue":e[1]||(e[1]=h=>r.filterTxt=h),class:"members-filter",type:"text",placeholder:"Search Members"},null,512),[[d],[D,r.filterTxt]])]),ar,o("ul",nr,[(a(!0),n(f,null,k(s.getMembers,(h,c)=>(a(),n("li",{class:"board-member pointer",key:c,onClick:p=>s.toggleMemberInTask(h)},[S(u,{user:h},null,8,["user"]),o("div",dr,b(h.fullname)+b(`(${h.username})`),1),h.isCheck?(a(),n("div",cr)):m("",!0)],8,lr))),128)),ur])])])}var mr=T(Qo,[["render",hr]]);const pr={name:"cover-unsplash",components:{listSlot:V},props:{style:Object,title:String,attachments:Array},data(){return{currStyle:{bgClr:"",bgImg:"",isFullCover:!1,uploadedImg:""},photos:[],currTitle:"",searchingUnsplash:!1,searchResults:!1,search:"",photo_url:null,download_url:null,searchTerms:["Productivity","Perspective","Organization","Colorful","Nature","Business","Minimal","Space","Animals"],bgColors:[{id:"l101",color:"#61bd4f",isSelected:!1},{id:"l102",color:"#f2d600",isSelected:!1},{id:"l103",color:"#ff9f1a",isSelected:!1},{id:"l104",color:"#eb5a46",isSelected:!1},{id:"l105",color:"#c377e0",isSelected:!1},{id:"l106",color:"#0079bf",isSelected:!1},{id:"l107",color:"#00c2e0",isSelected:!1},{id:"l108",color:"#51e898",isSelected:!1},{id:"l109",color:"#ff78cb",isSelected:!1},{id:"l110",color:"#344563",isSelected:!1}]}},created(){this.currStyle=JSON.parse(JSON.stringify(this.style)),this.currTitle=this.title,this.searchPhoto(this.title)},methods:{searchPhoto(t){const e="Y2X6Y_wdMpqvaYX_4jgO-dOBqVAsQMQpihsIFNOAX5E";let i=20,l=t;l||(l=(this==null?void 0:this.search)||"business"),q.get(`https://api.unsplash.com/search/photos?page=1&per_page=${i}&query=${l}&client_id=${e}`).then(r=>{this.photos=r.data.results}).catch(r=>{console.log(r)})},searchPhotoWithButton(t){this.searchResults=!0,this.searchPhoto(t)},applyPhoto(t){var e;this.currStyle.uploadedImg=((e=t==null?void 0:t.urls)==null?void 0:e.small)||t,this.currStyle.bgClr="",this.currStyle.bgImg="",this.searchResults=!1,this.searchingUnsplash=!1,this.search="",this.$emit("addStyle",this.currStyle)},waitSearch:he.debounce(function(){this.searchPhoto(),this.searchResults=!0,this.search=""},1e3),selectBgClr(t){this.currStyle.bgClr=t,this.currStyle.bgImg="",this.currStyle.uploadedImg="",this.$emit("addStyle",this.currStyle)},removeCover(){this.currStyle.bgClr="",this.currStyle.bgImg="",this.currStyle.uploadedImg="",this.$emit("addStyle",this.currStyle)},closeCmp(){this.$emit("closeCmp")},setFullCover(t){this.currStyle.isFullCover=t,this.$emit("addStyle",this.currStyle)},async onAttachImg(t){const e=await this.$store.dispatch({type:"attachImg",ev:t});this.currStyle.uploadedImg=e.url,this.currStyle.bgClr="",this.currStyle.bgImg="",this.$emit("addStyle",this.currStyle)}},computed:{pageTitle(){return this.searchingUnsplash?"Photo search":"Cover"},currCoverImg(){var t,e;return((t=this.style)==null?void 0:t.bgImg)||((e=this.style)==null?void 0:e.uploadedImg)||""},currCoverBg(){var e;return{"background-color":((e=this.style)==null?void 0:e.bgClr)||""}},deletable(){if(this.style.bgImg||this.style.uploadedImg||this.style.bgClr)return!0}}},gr={class:"cmp-preview cover-unsplash-preview"},_r={class:"cmp-header"},br=o("span",null,null,-1),vr=[br],fr={class:"cmp-container-title"},kr=o("span",null,null,-1),yr=[kr],Cr=o("hr",{class:"thin-hr"},null,-1),wr={key:0,class:"main-cover-screen"},Tr=o("p",{class:"labels-title"},"Size",-1),Sr={class:"cover-size-select"},Ir=["src"],xr=o("div",{class:"over-full-cover-select"},null,-1),$r=o("div",{class:"dummy title"},null,-1),Br=o("div",{class:"dummy text"},null,-1),Dr=["src"],Ur=o("div",{class:"over-full-cover-select"},null,-1),Lr=o("div",{class:"dummy title"},null,-1),Or=o("div",{class:"dummy text"},null,-1),Ar=L("Color"),Nr=["onClick"],Mr=L("Attachments"),Fr=["src","onClick"],Er=o("div",{class:"unsplash-btn full-width-btn pointer"},"Upload a cover image",-1),Jr=L("Photos from Unsplash"),Gr=["src","onClick"],Rr={key:1,class:"search-unsplash-screen"},jr=L("Suggested searches"),Pr=["onClick"],Vr=L("Top photos"),qr=["src","onClick"],Wr={key:2,class:"unsplash-results-screen"},Hr=["src","onClick"];function Yr(t,e,i,l,r,s){const u=g("list-slot");return a(),n("section",gr,[o("div",_r,[r.searchingUnsplash?(a(),n("a",{key:0,class:"back-to-cmp-btn",onClick:e[0]||(e[0]=d=>(r.searchingUnsplash=!1,r.searchResults=!1))},vr)):m("",!0),o("p",fr,b(s.pageTitle),1),o("a",{class:"close-cmp-btn",onClick:e[1]||(e[1]=(...d)=>s.closeCmp&&s.closeCmp(...d))},yr)]),Cr,r.searchingUnsplash?m("",!0):(a(),n("section",wr,[Tr,o("div",Sr,[o("button",{class:"coverSelect pointer",onClick:e[2]||(e[2]=d=>s.setFullCover(!1))},[s.currCoverImg?(a(),n("img",{key:0,class:"coverSelectImg top",src:s.currCoverImg,alt:""},null,8,Ir)):m("",!0),s.currCoverBg?(a(),n("div",{key:1,class:"coverSelectImg top",style:B(s.currCoverBg)},null,4)):m("",!0),xr,$r,Br]),o("button",{class:"coverSelect pointer",onClick:e[3]||(e[3]=d=>s.setFullCover(!0))},[s.currCoverImg?(a(),n("img",{key:0,class:"coverSelectImg",src:s.currCoverImg,alt:""},null,8,Dr)):m("",!0),s.currCoverBg?(a(),n("div",{key:1,class:"coverSelectImg",style:B(s.currCoverBg)},null,4)):m("",!0),Ur,Lr,Or])]),s.deletable?(a(),n("div",{key:0,onClick:e[4]||(e[4]=(...d)=>s.removeCover&&s.removeCover(...d)),class:"unsplash-btn full-width-btn remove-cover pointer"},"Remove cover ")):m("",!0),S(u,null,{title:w(()=>[Ar]),list:w(()=>[(a(!0),n(f,null,k(r.bgColors,d=>(a(),n("div",{key:d.id,class:"label-option flex pointer",style:B({backgroundColor:d.color}),onClick:h=>s.selectBgClr(d.color)},null,12,Nr))),128))]),_:1}),o("section",null,[S(u,null,{title:w(()=>[Mr]),list:w(()=>{var d;return[(a(!0),n(f,null,k((d=i.attachments)==null?void 0:d.slice(0,6),(h,c)=>(a(),n("img",{key:c,class:"unsplash-result-small pointer",src:h,alt:"img",onClick:p=>s.applyPhoto(h)},null,8,Fr))),128))]}),_:1}),o("label",null,[o("input",{type:"file",onChange:e[5]||(e[5]=(...d)=>s.onAttachImg&&s.onAttachImg(...d)),hidden:""},null,32),Er])]),S(u,null,{title:w(()=>[Jr]),list:w(()=>[(a(!0),n(f,null,k(r.photos.slice(0,6),d=>(a(),n("img",{key:d.id,class:"unsplash-result-small pointer",src:d.urls.thumb,alt:"img",onClick:h=>s.applyPhoto(d)},null,8,Gr))),128))]),_:1}),o("button",{class:"unsplash-btn full-width-btn pointer",onClick:e[6]||(e[6]=d=>r.searchingUnsplash=!0)},"Search for photos")])),r.searchingUnsplash&&!r.searchResults?(a(),n("section",Rr,[$(o("input",{type:"text",placeholder:"Search Unsplash for photos",class:"unsplash-search","onUpdate:modelValue":e[7]||(e[7]=d=>r.search=d),onInput:e[8]||(e[8]=(...d)=>s.waitSearch&&s.waitSearch(...d))},null,544),[[D,r.search]]),S(u,null,{title:w(()=>[jr]),list:w(()=>[(a(!0),n(f,null,k(r.searchTerms,(d,h)=>(a(),n("button",{class:"unsplash-btn pointer",key:h,onClick:c=>s.searchPhotoWithButton(d)},b(d),9,Pr))),128))]),_:1}),S(u,null,{title:w(()=>[Vr]),list:w(()=>[(a(!0),n(f,null,k(r.photos.slice(0,12),d=>(a(),n("img",{key:d.id,class:"unsplash-result-small pointer",src:d.urls.thumb,alt:"img",onClick:h=>s.applyPhoto(d)},null,8,qr))),128))]),_:1})])):m("",!0),r.searchResults?(a(),n("section",Wr,[S(u,null,{list:w(()=>[(a(!0),n(f,null,k(r.photos,d=>(a(),n("img",{key:d.id,class:"unsplash-result-large pointer",src:d.urls.thumb,alt:"img",onClick:h=>s.applyPhoto(d)},null,8,Hr))),128))]),_:1})])):m("",!0)])}var zr=T(pr,[["render",Yr]]);const Xr={data(){return{title:"Checklist"}},methods:{closeCmp(){this.$emit("closeCmp")},addChecklist(){this.$emit("createChecklist",this.title)}}},Qr={class:"create-checklist-container"},Zr={class:"checklist-header flex"},Kr=o("span",{class:"cmp-header-title"},"Add checklist",-1),ei=o("hr",{class:"thin-hr"},null,-1),ti={class:"create-checklist-form"},si=o("label",{class:"form-title",for:"txt"},"Title",-1),oi=o("button",{class:"create-form-done pointer"},"Add",-1);function ri(t,e,i,l,r,s){const u=N("focus");return a(),n("section",Qr,[o("div",Zr,[Kr,o("a",{onClick:e[0]||(e[0]=(...d)=>s.closeCmp&&s.closeCmp(...d)),class:"close-checklist pointer"})]),ei,o("div",ti,[o("div",null,[si,o("form",{onSubmit:e[2]||(e[2]=y(d=>s.addChecklist(r.title),["prevent"]))},[$(o("input",{class:"checklist-form","onUpdate:modelValue":e[1]||(e[1]=d=>r.title=d),type:"text",name:"txt",id:"txt"},null,512),[[D,r.title],[u]]),oi],32)])])])}var ii=T(Xr,[["render",ri]]);const ai={props:{task:Object},data(){return{isCreateTodo:!1,newTodo:[],isCheckbox:[],isUpdateTodo:!1,editingTodoId:"",addNewTodo:"",isDonePercentages:[],todoCount:[],isRemove:!1,checklistId:""}},methods:{createTodo(t){this.addNewTodo=t},addTodo(t){console.log(this.newTodo),!(!this.newTodo||!this.newTodo.length)&&(this.$emit("addTodo",this.newTodo,t),this.newTodo="")},removeChecklist(t){this.$emit("removeChecklist",t)},updateTodo(t,e,i){i.stopPropagation();const l=i.currentTarget.textContent;if(!l||!l.length){this.editingTodoId="",this.addNewTodo="";return}this.$emit("updateTodo",t,e,l),this.editingTodoId="",this.addNewTodo=""},removeTodo(t,e){this.$emit("removeTodo",t,e)},openUpdateBar(t){this.editingTodoId=t,this.addNewTodo=""},closeCreateTodo(){this.editingTodoId="",this.addNewTodo=""},checkboxValue(t,e,i){const l=e.id,r=i.target.checked;this.$emit("updateTodoDone",t,l,r)}},computed:{progressBar(){let t=[];return this.task.checklists.forEach(e=>{let i=0,l=e.todos.length;if(l===0){t.push(0);return}e.todos.forEach(s=>{s.isDone&&i++});const r=i/l*100;t.push(r.toFixed(0))}),this.isDonePercentages=t,t},todoDone(){return this.task.checklists.forEach(t=>{t.todos.filter(e=>{if(e.isDone)return"task-done"})})}}},ni={key:0,class:"td-checklist-preview"},li={class:"checklist-title-container"},di={class:"checklist-title"},ci=["onClick"],ui={class:"progress-bar-percentage"},hi={class:"progress-bar-container flex"},mi={class:"checklist-pb-full"},pi={class:"checklist-todo-title"},gi=o("label",{class:"todo-content-edit pointer",for:"todo.id"},null,-1),_i=["onClick","checked"],bi=["onClick","onBlur","onUpdate:modelValue"],vi={key:0,class:"update-todo-btn-container"},fi={class:"update-todo-btn flex"},ki=o("a",{class:"update-todo-text btn"},"Save",-1),yi={class:"remove-todo-btn-wrapper"},Ci=["onMousedown"],wi={key:0,class:"add-todo-container"},Ti=["onClick"],Si={class:"todo-btn-container"},Ii=["onClick"],xi={class:"close-btn-wrapper"};function $i(t,e,i,l,r,s){const u=N("focus");return i.task?(a(),n("section",ni,[(a(!0),n(f,null,k(i.task.checklists,(d,h)=>(a(),n("div",{key:h},[o("div",li,[o("h3",di,b(d.title),1),o("a",{class:"delete-checklist btn",onClick:y(c=>s.removeChecklist(d.id),["stop"])},"Delete",8,ci)]),o("span",ui,b(s.progressBar[h])+"%",1),o("div",hi,[o("div",mi,[o("div",{class:M(["checklist-progress-bar",{green:s.progressBar[h]==="100"}]),style:B({width:s.progressBar[h]+"%",opacity:s.progressBar[h]})},null,6)])]),(a(!0),n(f,null,k(d.todos,c=>(a(),n("div",{key:c.id},[o("div",pi,[gi,o("input",{onClick:y(p=>s.checkboxValue(d.id,c,p),["stop"]),class:"checkbox-input pointer",type:"checkbox",name:"todo.isDone",id:"todo.id",value:"todo.isDone",checked:c.isDone},null,8,_i),$(o("textarea",{onClick:y(p=>s.openUpdateBar(c.id),["stop"]),class:"todo-clickable-area",onBlur:p=>s.updateTodo(d.id,c.id,p),spellcheck:"false",cols:"100",rows:"20","onUpdate:modelValue":p=>c.title=p,ref_for:!0,ref:"textarea"},null,40,bi),[[D,c.title]]),r.editingTodoId===c.id?(a(),n("div",vi,[o("div",fi,[ki,o("span",{onClick:e[0]||(e[0]=(...p)=>s.closeCreateTodo&&s.closeCreateTodo(...p)),class:"close-update pointer"})]),o("div",yi,[o("span",{onMousedown:p=>s.removeTodo(d.id,c.id),class:"remove-todo-btn pointer"},null,40,Ci)])])):m("",!0)])]))),128)),r.addNewTodo?m("",!0):(a(),n("div",wi,[o("button",{class:"add-an-item btn",onClick:y(c=>s.createTodo(d.id),["stop"])},"Add an item",8,Ti)])),r.addNewTodo===d.id?(a(),n("div",{key:1,class:"add-item-container",onBlur:e[3]||(e[3]=(...c)=>s.createTodo&&s.createTodo(...c))},[o("div",null,[$(o("textarea",{class:"add-item-input",placeholder:"Add an item",type:"text","onUpdate:modelValue":e[1]||(e[1]=c=>r.newTodo=c),cols:"30",rows:"10"},null,512),[[u],[D,r.newTodo]]),o("div",Si,[o("button",{class:"add-todo btn",onClick:y(c=>s.addTodo(d.id),["stop"])},"Add",8,Ii),o("div",xi,[o("a",{onClick:e[2]||(e[2]=y((...c)=>s.closeCreateTodo&&s.closeCreateTodo(...c),["stop"])),class:"close-add-todo-btn pointer"})])])])],32)):m("",!0)]))),128))])):m("",!0)}var Bi=T(ai,[["render",$i]]);const Di={props:{activity:Object},data(){return{guestUser:x.getGuestUser()}},computed:{activityTime(){return xe(new Date(this.activity.createdAt),new Date(Date.now()),{includeSeconds:!0,addSuffix:!0})}},components:{userAvatar:G}},Ui={class:"activity-preview flex"},Li={class:"activity-details flex"},Oi={class:"activity-username-txt-container flex"},Ai={class:"activity-username"},Ni={class:"activity-txt"},Mi={class:"activity-time"};function Fi(t,e,i,l,r,s){var d;const u=g("user-avatar");return a(),n("section",Ui,[S(u,{user:i.activity.byMember||r.guestUser},null,8,["user"]),o("div",Li,[o("div",Oi,[o("h3",Ai,b(((d=i.activity.byMember)==null?void 0:d.fullname)||r.guestUser.fullname),1),o("p",Ni,b(i.activity.txt),1)]),o("p",Mi,b(s.activityTime),1)])])}var ve=T(Di,[["render",Fi]]);const Ei={name:"attached-img-preview",props:{attachment:String,idx:Number},methods:{deleteAttachment(){this.$emit("deleteAttachment",this.idx)},makeCover(){this.$emit("makeCover",this.attachment)}}},Ji={class:"attached-img-preview"},Gi=["src"],Ri={class:"attachment-options-container flex"},ji=o("div",{class:"make-cover-icon"},null,-1);function Pi(t,e,i,l,r,s){return a(),n("section",Ji,[o("img",{src:i.attachment,alt:""},null,8,Gi),o("div",Ri,[ji,o("p",{class:"make-cover pointer",onClick:e[0]||(e[0]=(...u)=>s.makeCover&&s.makeCover(...u))},"Make Cover"),o("p",{class:"pointer",onClick:e[1]||(e[1]=(...u)=>s.deleteAttachment&&s.deleteAttachment(...u))},"Delete")])])}var Vi=T(Ei,[["render",Pi]]),qi="/assets/arrow-down.9f6ee7c2.svg",Wi="/assets/loading-task.05eb7451.gif";const Hi={name:"task-details",emits:["updateBoard","addLabelToBoard","updateBoardLabels"],data(){return{task:null,imgUrls:[],currBoard:null,currGroup:null,addingDescription:!1,newDescription:"",detailsShown:!1,checklistTitle:"",handles:{isLabel:!1,isAttachOn:!1,isDatesOn:!1,isMembers:!1,isCover:!1,isDelete:!1,isChecklist:!1}}},async created(){await this.loadTask(),O.on("someone updated",this.boardUpdated)},unmounted(){O.off("someone updated",this.boardUpdated)},methods:{async loadTask(){var r;const{boardId:t,groupId:e,taskId:i}=this.$route.params;this.currBoard=await this.$store.dispatch({type:"loadBoard",boardId:t}),this.currGroup=this.currBoard.groups.find(s=>s.id===e);const l=(r=this.currGroup.tasks)==null?void 0:r.find(s=>s.id===i);this.task=JSON.parse(JSON.stringify(l)),this.newDescription=this.task.description,this.imgUrls=this.task.attachments},boardUpdated(){this.loadTask()},moveToBoard(){const t=this.$store.getters.getCurrBoard;this.$router.push(`/board/${t._id}`)},async addStyle(t){this.task.style=t,await this.saveTask("Updated style"),this.loadTask()},openCmp(t){for(let e in this.handles)this.handles[e]=!1;this.handles[t]=!0},closeCmp(){for(let t in this.handles)this.handles[t]=!1},async saveTaskTitle(t){const e=t.currentTarget.textContent;!e||e===this.task.title||(this.task.title=e,await this.saveTask("Updated task title"),this.loadTask())},async saveDate(t){this.task.dueDate=t,await this.saveTask("Updated due date"),this.closeCmp(),this.loadTask()},async saveTask(t){const e=await this.$store.dispatch({type:"saveTask",boardId:this.currBoard._id,groupId:this.currGroup.id,task:JSON.parse(JSON.stringify(this.task)),changeType:t});this.$emit("updateBoard",e)},addDescription(){this.task.description="",this.addingDescription=!0},clearForm(){this.addingDescription=!1,this.newDescription=""},async saveDescription(){this.task.description=this.newDescription,await this.saveTask("Updated Description"),this.loadTask()},async addLabelToTask(t){this.task.labelIds||(this.task.labelIds=[]),this.task.labelIds.includes(t)?this.task.labelIds=this.task.labelIds.filter(e=>e!==t):this.task.labelIds.push(t),await this.saveTask("Changed Labels"),this.loadTask()},async updateBoardLabels(t){const e=await this.$store.dispatch({type:"editBoard",boardId:this.currBoard._id,changeType:"update labels",val:t});this.currBoard=e,await this.$emit("updateBoard",e)},async toggleMemberInTask(t){this.task.members||(this.task.members=[]);const e=this.task.members.findIndex(i=>i._id===t._id);e===-1?(this.task.members.push(t),this.task.members.isCheck=!0):(this.task.members.splice(e,1),this.task.members.isCheck=!1),await this.saveTask("Added member"),this.loadTask()},async toggleDueDateDone(){this.task.dueDate.isCompleted=!this.task.dueDate.isCompleted,await this.saveTask("updated due date status"),this.loadTask()},async attachImg(t){const e=await this.$store.dispatch({type:"attachImg",ev:t});this.task.attachments||(this.task.attachments=[]),this.task.attachments.push(e.url),this.task.style.uploadedImg="",this.task.style.bgClr="",this.task.style.bgImg=e.url,await this.saveTask("Added image"),this.loadTask()},async deleteAttachment(t){this.task.attachments.splice(t,1),await this.saveTask("Deleted attachment"),this.loadTask()},async makeCover(t){this.task.style.bgImg=t,this.task.style.bgClr="",this.task.style.uploadedImg="",await this.saveTask("Updated cover photo"),this.loadTask()},async removeTask(t){const e=await this.$store.dispatch({type:"removeTask",boardId:this.currBoard._id,groupId:this.currGroup.id,task:this.task,changeType:t});this.$emit("updateBoard",e),this.moveToBoard()},setActivities(){this.taskActivities=this.currBoard.activities.filter(t=>{var e;return((e=t.task)==null?void 0:e.id)===this.task.id})},async createChecklist(t){this.task.checklists||(this.task.checklists=[]);const e={id:J.makeId(),title:t,todos:[]};this.task.checklists.push(e),await this.saveTask("Added checklist"),this.loadTask(),this.closeCmp()},async addTodo(t,e){if(!t)return;this.task.checklists.find(l=>l.id===e).todos.push({id:J.makeId(),title:t,isDone:!1}),await this.saveTask("Added todo"),this.loadTask()},async removeChecklist(t){const e=this.task.checklists.findIndex(i=>i.id===t);this.task.checklists.splice(e,1),await this.saveTask("Removed checklist"),this.loadTask()},async updateTodo(t,e,i){const l=this.task.checklists.find(u=>u.id===t),r=l.todos.find(u=>u.id===e);if(!r)return;r.title=i;const s=l.todos.findIndex(u=>u.id===e);l.todos.splice(s,1,r),await this.saveTask("Updated todo"),this.loadTask()},async updateTodoDone(t,e,i){const l=this.task.checklists.find(u=>u.id===t),r=l.todos.find(u=>u.id===e);r.isDone=i;const s=l.todos.findIndex(u=>u.id===e);l.todos.splice(s,1,r),await this.saveTask("Updated todo"),this.loadTask()},async removeTodo(t,e){const i=this.task.checklists.find(r=>r.id===t),l=i.todos.findIndex(r=>r.id===e);console.log(l),i.todos.splice(l,1),await this.saveTask("removeTodo"),this.loadTask()}},computed:{areDetailsShown(){return this.detailsShown?"Hide Details":"Show Details"},labelsToDisplay(){return this.currBoard.labels.filter(e=>{var i;if((i=this.task.labelIds)!=null&&i.includes(e.id))return e})},formattedDate(){var t=new Date(this.task.dueDate.dueDate);return t.toString().slice(4,21)},dueDateCheckBox(){return this.task.dueDate.isCompleted},overdue(){if(new Date(this.task.dueDate.dueDate).getTime()<Date.now())return!0},coverStyle(){return this.task.style.uploadedImg?{"background-image":`url(${this.task.style.uploadedImg})`,height:"160px","background-color":"#ccd6e0","border-radius":"3px 3px 0 0"}:this.task.style.bgImg?{"background-image":`url(${this.task.style.bgImg})`,height:"160px","background-color":"#ccd6e0","border-radius":"3px 3px 0 0"}:this.task.style.bgClr?{"background-color":this.task.style.bgClr,height:"100px","border-radius":"3px 3px 0 0"}:{display:"none"}},taskActivities(){return this.currBoard.activities.filter(t=>{var e;return((e=t.task)==null?void 0:e.id)===this.task.id})}},components:{userAvatar:G,attachmentPreview:io,datePreview:mo,labelPreview:Xo,membersPreview:mr,coverUnsplash:zr,deleteCmp:Y,createChecklist:ii,checklistActive:Bi,activityPreview:ve,attachedImgPreview:Vi}},Yi={key:1,class:"task-details-main-content"},zi={class:"task-details-container"},Xi={class:"task-title-container"},Qi={class:"task-group-title"},Zi=L(" in list "),Ki={class:"show-member-label flex"},ea={key:0,class:"edit-members-container"},ta=o("p",{class:"members-header"},"Members",-1),sa={class:"members-container flex"},oa={key:1,class:"edit-labels-container"},ra=o("p",{class:"labels-header"},"Labels",-1),ia={class:"labels-container flex"},aa={key:2,class:"due-date-container"},na=o("p",{class:"due-date-title"},"Due date",-1),la={class:"displayed-date-checkbox"},da=["src"],ca={key:0,class:"completed-overdue-label l101-label"},ua={key:1,class:"completed-overdue-label l104-label"},ha=o("img",{src:qi,alt:""},null,-1),ma={class:"edit-description-container"},pa={key:0,class:"description-container"},ga={class:"description-header-container flex"},_a=o("p",{class:"description-header"},"Description",-1),ba={class:"task-description"},va={key:1,class:"add-edit-description-container"},fa=o("p",{class:"description-header"},"Description",-1),ka={key:1,class:"add-description-container"},ya={class:"add-description-buttons-container flex"},Ca={key:0,class:"img-container"},wa=o("p",{class:"img-container-header"},"Attachments",-1),Ta={class:"activities"},Sa={class:"activity-details-header"},Ia=o("p",{class:"activity-header"},"Activity",-1),xa={key:0,class:"activities-list"},$a=o("p",{class:"add-task-buttons-title"},"Add to card",-1),Ba={class:"just-buttons-container"},Da=o("h3",{class:"td-actions"},"Actions",-1),Ua=o("span",{class:"td-delete-icon"},null,-1),La=o("span",null,"Delete",-1),Oa=[Ua,La],Aa={key:2,class:"loading-task-details",src:Wi,alt:""};function Na(t,e,i,l,r,s){var Q,Z,K,ee,te,se,oe,re,ie;const u=g("user-avatar"),d=g("attached-img-preview"),h=g("checklist-active"),c=g("activity-preview"),p=g("members-preview"),U=g("label-preview"),v=g("create-checklist"),F=g("date-preview"),I=g("attachment-preview"),ke=g("cover-unsplash"),ye=g("delete-cmp"),Ce=N("focus");return a(),n("div",{class:"task-details-dark",onClick:e[23]||(e[23]=(..._)=>s.moveToBoard&&s.moveToBoard(..._))},[o("section",{onClick:e[22]||(e[22]=y(()=>{},["stop"])),class:"task-details-page"},[o("button",{class:"go-back-btn",onClick:e[0]||(e[0]=(..._)=>s.moveToBoard&&s.moveToBoard(..._))}),r.task?(a(),n("div",{key:0,style:B(s.coverStyle),class:"task-cover-img"},null,4)):m("",!0),r.task?(a(),n("div",Yi,[o("div",zi,[o("h3",Xi,[o("p",{class:"task-title",contenteditable:"true",onBlur:e[1]||(e[1]=(..._)=>s.saveTaskTitle&&s.saveTaskTitle(..._))},b(r.task.title),33)]),o("p",Qi,[Zi,o("span",null,b(r.currGroup.title),1)]),o("section",Ki,[(Q=r.task.members)!=null&&Q.length?(a(),n("div",ea,[ta,o("div",sa,[(a(!0),n(f,null,k(r.task.members,_=>(a(),C(u,{"v-if":r.task.members,key:_._id,user:_},null,8,["v-if","user"]))),128)),o("button",{class:"avatar-btn flex",onClick:e[2]||(e[2]=y(_=>s.openCmp("isMembers"),["stop"]))})])])):m("",!0),(Z=s.labelsToDisplay)!=null&&Z.length?(a(),n("div",oa,[ra,o("div",ia,[(a(!0),n(f,null,k(s.labelsToDisplay,_=>(a(),n("div",{key:_.id,class:"label-show flex",onClick:e[3]||(e[3]=y(ae=>s.openCmp("isLabel"),["stop"])),style:B({backgroundColor:_.color})},b(_.title),5))),128)),o("button",{class:"label-show-btn flex",onClick:e[4]||(e[4]=y(_=>s.openCmp("isLabel"),["stop"]))})])])):m("",!0),r.task.dueDate?(a(),n("div",aa,[na,o("div",la,[o("input",{type:"checkbox",onClick:e[5]||(e[5]=(..._)=>s.toggleDueDateDone&&s.toggleDueDateDone(..._)),class:"due-date-checkbox",src:s.dueDateCheckBox},null,8,da),o("div",{class:"date-label-container flex",onClick:e[6]||(e[6]=y(_=>s.openCmp("isDatesOn"),["stop"]))},[o("span",null,b(s.formattedDate),1),r.task.dueDate.isCompleted?(a(),n("span",ca,"Completed")):m("",!0),s.overdue&&!r.task.dueDate.isCompleted?(a(),n("span",ua,"Overdue")):m("",!0),ha])])])):m("",!0)]),o("section",ma,[r.task.description?(a(),n("div",pa,[o("div",ga,[_a,o("button",{onClick:e[7]||(e[7]=(..._)=>s.addDescription&&s.addDescription(..._)),class:"edit-description-btn btn"}," Edit ")]),o("p",ba,b(r.task.description),1)])):(a(),n("div",va,[fa,r.addingDescription?(a(),n("div",ka,[$(o("textarea",{"onUpdate:modelValue":e[9]||(e[9]=_=>r.newDescription=_),class:"description-text-area",placeholder:"Add a more detailed description..."},null,512),[[Ce],[D,r.newDescription]]),o("div",ya,[o("button",{class:"save-description-btn btn",onClick:e[10]||(e[10]=(..._)=>s.saveDescription&&s.saveDescription(..._))}," Save "),o("button",{class:"delete-description-btn",onClick:e[11]||(e[11]=(..._)=>s.clearForm&&s.clearForm(..._))})])])):(a(),n("div",{key:0,class:"fake-text-area",onClick:e[8]||(e[8]=(..._)=>s.addDescription&&s.addDescription(..._))}," Add a more detailed description... "))]))]),((ee=(K=r.task)==null?void 0:K.attachments)==null?void 0:ee.length)&&((se=(te=r.task)==null?void 0:te.attachments)==null?void 0:se.length)>0?(a(),n("section",Ca,[wa,(a(!0),n(f,null,k(r.task.attachments,(_,ae)=>(a(),C(d,{key:ae,attachment:_,onMakeCover:s.makeCover,onDeleteAttachment:s.deleteAttachment},null,8,["attachment","onMakeCover","onDeleteAttachment"]))),128))])):m("",!0),(oe=r.task.checklists)!=null&&oe.length?(a(),C(h,{key:1,task:r.task,onAddTodo:s.addTodo,onRemoveChecklist:s.removeChecklist,onUpdateTodo:s.updateTodo,onUpdateTodoDone:s.updateTodoDone,onRemoveTodo:s.removeTodo},null,8,["task","onAddTodo","onRemoveChecklist","onUpdateTodo","onUpdateTodoDone","onRemoveTodo"])):m("",!0),o("section",Ta,[o("div",Sa,[Ia,(re=r.currBoard.activities)!=null&&re.length?(a(),n("button",{key:0,class:"details-shown-btn btn",onClick:e[12]||(e[12]=_=>r.detailsShown=!r.detailsShown)},b(s.areDetailsShown),1)):m("",!0)]),r.detailsShown?(a(),n("div",xa,[(a(!0),n(f,null,k(s.taskActivities,_=>(a(),C(c,{key:_.id,activity:_},null,8,["activity"]))),128))])):m("",!0)])]),o("nav",{onClick:e[21]||(e[21]=y(()=>{},["stop"])),class:"add-task-buttons-container"},[$a,o("div",Ba,[o("button",{onClick:e[13]||(e[13]=y(_=>s.openCmp("isMembers"),["stop"])),class:"members-btn btn",title:"Members"}," Members "),r.handles.isMembers?(a(),C(p,{key:0,boardMembers:r.currBoard.members,task:r.task,onCloseCmp:s.closeCmp,onToggleMemberInTask:s.toggleMemberInTask},null,8,["boardMembers","task","onCloseCmp","onToggleMemberInTask"])):m("",!0),o("button",{onClick:e[14]||(e[14]=y(_=>s.openCmp("isLabel"),["stop"])),class:"labels-btn btn",title:"Labels"}," Labels "),r.handles.isLabel?(a(),C(U,{key:1,boardLabels:r.currBoard.labels,taskLabelIds:r.task.labelIds,onCloseCmp:s.closeCmp,onAddLabelToTask:s.addLabelToTask,onUpdateBoardLabels:s.updateBoardLabels},null,8,["boardLabels","taskLabelIds","onCloseCmp","onAddLabelToTask","onUpdateBoardLabels"])):m("",!0),o("button",{class:"checklist-btn btn",title:"Checklist",onClick:e[15]||(e[15]=y(_=>s.openCmp("isChecklist"),["stop"]))}," Checklist "),r.handles.isChecklist?(a(),C(v,{key:2,onCloseCmp:s.closeCmp,onCreateChecklist:s.createChecklist},null,8,["onCloseCmp","onCreateChecklist"])):m("",!0),o("button",{onClick:e[16]||(e[16]=y(_=>s.openCmp("isDatesOn"),["stop"])),class:"dates-btn btn",title:"Dates"}," Dates "),r.handles.isDatesOn?(a(),C(F,{key:3,dueDate:((ie=r.task.dueDate)==null?void 0:ie.dueDate)||Date.now(),onSaveDate:s.saveDate,onCloseCmp:s.closeCmp},null,8,["dueDate","onSaveDate","onCloseCmp"])):m("",!0),o("button",{onClick:e[17]||(e[17]=y(_=>s.openCmp("isAttachOn"),["stop"])),class:"attachment-img btn",title:"Attachment"}," Attachment "),r.handles.isAttachOn?(a(),C(I,{key:4,imgUrls:r.imgUrls,onAttachImg:s.attachImg,onCloseCmp:s.closeCmp},null,8,["imgUrls","onAttachImg","onCloseCmp"])):m("",!0),o("button",{onClick:e[18]||(e[18]=y(_=>s.openCmp("isCover"),["stop"])),class:"cover-btn btn font-cmp-btn",title:"Cover"}," Cover "),r.handles.isCover?(a(),C(ke,{key:5,style:B(r.task.style),title:r.task.title,attachments:r.task.attachments,onCloseCmp:s.closeCmp,onAddStyle:s.addStyle},null,8,["style","title","attachments","onCloseCmp","onAddStyle"])):m("",!0)]),Da,o("a",{onClick:e[19]||(e[19]=y(_=>s.openCmp("isDelete"),["stop"])),class:"td-delete-btn btn pointer"},Oa),r.handles.isDelete?(a(),C(ye,{key:0,type:"task",onRemove:e[20]||(e[20]=_=>s.removeTask("removed task")),onCloseCmp:s.closeCmp},null,8,["onCloseCmp"])):m("",!0)])])):(a(),n("img",Aa))])])}var fe=T(Hi,[["render",Na]]);const Ma={props:{task:Object,groupId:String,isLabelTitle:Boolean},data(){return{boardId:null}},components:{userAvatar:G,taskDetails:fe},methods:{toTaskDetails(t,e,i){this.$router.push(`/board/${t}/${e}/${i}`)},toggleLabelTitle(){this.$emit("toggleLabelTitle")}},created(){const{boardId:t}=this.$route.params;this.boardId=t},computed:{formattedDate(){var t=new Date(this.task.dueDate.dueDate);return t.toString().slice(4,10)},isTaskOverdue(){if(new Date(this.task.dueDate.dueDate).getTime()<Date.now())return this.task.dueDate.isCompleted?"l101-label":"l104-label"},isChecklistDone(){var i;let t=0,e=0;return(i=this.task.checklists)==null||i.forEach(l=>{t+=l.todos.length,l.todos.filter(r=>{r.isDone&&e++})}),t===e},labelsToDisplay(){return this.$store.getters.getCurrBoard.labels.filter(e=>{if(this.task.labelIds.includes(e.id))return e})},attachmentCount(){var t;return(t=this.task.attachments)==null?void 0:t.length},checkListsCount(){var i,l;var t=0;(i=this.task.checklists)==null||i.forEach(r=>t+=r.todos.length);var e=0;return(l=this.task.checklists)==null||l.forEach(r=>{e+=r.todos.filter(u=>u.isDone).length}),`${e}/${t}`},openLabel(){return{open:this.isLabelTitle}},taskImgUrl(){return this.task.style.uploadedImg?this.task.style.uploadedImg:this.task.style.bgImg?this.task.style.bgImg:void 0},fullCoverStyle(){var t;return this.task.style.uploadedImg?{backgroundImage:`url(${this.task.style.uploadedImg})`,height:"220px",backgroundColor:"#ccd6e0"}:this.task.style.bgImg?{backgroundImage:`url(${this.task.style.bgImg})`,height:"220px",backgroundColor:"#ccd6e0"}:{"background-color":((t=this.task.style)==null?void 0:t.bgClr)||"#FFFFFF",height:"54px"}},fullCoverTxt(){return this.task.style.uploadedImg||this.task.style.bgImg?"is-img":J.isDarkColor(this.task.style.bgClr)?"is-dark-bg":"is-light-bg"},coverStyle(){return this.task.style.bgClr?{"background-color":this.task.style.bgClr,height:"32px"}:{display:"none"}}}},Fa={key:1,class:"top-cover-selected"},Ea=["src"],Ja={class:"task-preview-icons"},Ga={class:"task-content"},Ra={class:"task-snapshot flex"},ja={key:0,class:"description-img-preview",title:"Card description"},Pa=o("span",{class:""},null,-1),Va={key:2,class:"attachment-img-preview",title:"Attachment"},qa={class:"user-avatar-pos flex"};function Wa(t,e,i,l,r,s){var d,h,c,p,U;const u=g("user-avatar");return a(),n("div",{onClick:e[2]||(e[2]=v=>s.toTaskDetails(this.boardId,this.groupId,this.task.id)),class:"task-preview-container"},[this.task.style.isFullCover?(a(),n("div",{key:0,style:B(s.fullCoverStyle),class:"full-cover-selected"},[o("p",{class:M([s.fullCoverTxt,"full-cover-title"])},b(i.task.title),3)],4)):(a(),n("div",Fa,[o("div",{style:B(s.coverStyle),class:"task-preview-cover"},null,4),s.taskImgUrl&&!i.task.style.bgClr?(a(),n("img",{key:0,class:"top-cover-img",src:s.taskImgUrl,alt:"",draggable:"false"},null,8,Ea)):m("",!0),o("div",Ja,[(d=i.task.labelIds)!=null&&d.length?(a(),n("div",{key:0,class:"labels-container",onClick:e[1]||(e[1]=y((...v)=>t.showLabelTitle&&t.showLabelTitle(...v),["stop"]))},[(a(!0),n(f,null,k(s.labelsToDisplay,v=>(a(),n("div",{key:v.id,class:M(["task-preview-label",s.openLabel]),style:B({backgroundColor:v.color}),onClick:e[0]||(e[0]=y((...F)=>s.toggleLabelTitle&&s.toggleLabelTitle(...F),["stop"]))},[i.isLabelTitle?(a(),n("span",{key:0,class:M(s.openLabel)},b(v.title),3)):m("",!0)],6))),128))])):m("",!0),o("div",Ga,b(i.task.title),1),o("div",Ra,[(h=i.task.description)!=null&&h.length?(a(),n("div",ja)):m("",!0),(c=i.task.checklists)!=null&&c.length?(a(),n("div",{key:1,class:M(["checklists-img-preview",{"todo-done":s.isChecklistDone}]),title:"Checklist items"},[o("span",{class:M(["checklist-img-font flex",{white:s.isChecklistDone}])},null,2),Pa,L(" "+b(s.checkListsCount),1)],2)):m("",!0),(p=i.task.attachments)!=null&&p.length?(a(),n("div",Va,b(s.attachmentCount),1)):m("",!0),(U=i.task.dueDate)!=null&&U.dueDate?(a(),n("div",{key:3,class:M(["date-img-preview",s.isTaskOverdue])},b(s.formattedDate),3)):m("",!0),o("div",qa,[(a(!0),n(f,null,k(i.task.members,v=>{var F;return a(),C(u,{class:"user-avatar","v-if":(F=i.task.members)==null?void 0:F.length,key:v._id,user:v},null,8,["v-if","user"])}),128))])])])]))])}var Ha=T(Ma,[["render",Wa]]);const Ya={props:{group:Object,isLabelTitle:Boolean},components:{taskPreview:Ha,deleteCmp:Y,Container:me,Draggable:pe},data(){return{isAdding:!1,newTaskTitle:"",isRemove:!1}},methods:{getPayload(t){return()=>t},onDrop(t){typeof t.removedIndex!="number"&&typeof t.addedIndex!="number"||this.$emit("dropped",{ev:t,groupToId:this.group.id})},async saveIfTxt(){await J.delay(100),this.newTaskTitle?this.addTask():this.clearForm()},clearForm(){this.isAdding=!1,this.newTaskTitle=""},async openAddTask(){this.isAdding=!0,await $e();var t=this.$refs.list,e=t.offsetTop;t.scrollTo(0,e+t.scrollHeight)},addTask(){if(this.newTaskTitle){const t=E.getEmptyTask();t.title=this.newTaskTitle,this.$emit("saveGroup",{groupId:this.group.id,changeType:"add task",newValue:t}),this.clearForm()}else{this.isAdding=!1;return}},saveTitle(t){const e=t.currentTarget.textContent;e!==this.group.title&&this.$emit("saveGroup",{groupId:this.group.id,changeType:"save group title",newValue:e})},toggleLabelTitle(){this.$emit("toggleLabelTitle")},toggleRemove(){this.isRemove=!this.isRemove},removeGroup(){this.$emit("removeGroup",this.group.id)}},computed:{calcHeight(){return{add:this.isAdding}}}},za={class:"groups-border"},Xa={class:"outside-group flex"},Qa={key:1,class:"add-task-container"},Za={class:"add-task-buttons-container flex"},Ka={class:"bottom-outside-group"};function en(t,e,i,l,r,s){var U;const u=g("delete-cmp"),d=g("task-preview"),h=g("Draggable"),c=g("Container"),p=N("focus");return a(),n("section",za,[o("div",Xa,[o("p",{class:"group-title pointer",contenteditable:"true",onBlur:e[0]||(e[0]=(...v)=>s.saveTitle&&s.saveTitle(...v))},b(i.group.title),33),o("span",{class:"remove-group-btn",onClick:e[1]||(e[1]=(...v)=>s.toggleRemove&&s.toggleRemove(...v))})]),r.isRemove?(a(),C(u,{key:0,type:"list",onRemove:s.removeGroup,onCloseCmp:s.toggleRemove},null,8,["onRemove","onCloseCmp"])):m("",!0),o("div",{class:M(["group-container",s.calcHeight]),ref:"list"},[(U=i.group.tasks)!=null&&U.length?(a(),C(c,{key:0,class:"tasks-container","group-name":"group",orientation:"vertical","get-child-payload":s.getPayload(i.group.id),onDrop:s.onDrop},{default:w(()=>[(a(!0),n(f,null,k(i.group.tasks,v=>(a(),C(h,{class:"draggable-container middle-group-list",key:v.id},{default:w(()=>[S(d,{task:v,groupId:i.group.id,isLabelTitle:i.isLabelTitle,onToggleLabelTitle:s.toggleLabelTitle},null,8,["task","groupId","isLabelTitle","onToggleLabelTitle"])]),_:2},1024))),128))]),_:1},8,["get-child-payload","onDrop"])):m("",!0),r.isAdding?(a(),n("div",Qa,[$(o("textarea",{onBlur:e[2]||(e[2]=y((...v)=>s.saveIfTxt&&s.saveIfTxt(...v),["stop"])),"onUpdate:modelValue":e[3]||(e[3]=v=>r.newTaskTitle=v),placeholder:"Enter a title for this card..."},null,544),[[p],[D,r.newTaskTitle]]),o("div",Za,[o("button",{class:"adding-task-btn btn",ref:"bottom",onClick:e[4]||(e[4]=(...v)=>s.addTask&&s.addTask(...v))}," Add card ",512),o("button",{class:"delete-task-btn",onClick:e[5]||(e[5]=(...v)=>s.clearForm&&s.clearForm(...v))})])])):m("",!0)],2),o("div",Ka,[r.isAdding?m("",!0):(a(),n("div",{key:0,class:"add-task-btn",onClick:e[6]||(e[6]=(...v)=>s.openAddTask&&s.openAddTask(...v))}," Add a card "))])])}var tn=T(Ya,[["render",en]]);const sn={props:{board:Object},data(){return{filterBy:{txt:""}}},methods:{setFilter(){this.$emit("setFilter",this.filterBy)}},computed:{checkBox(){return"../../src/assets/svgs/empty-checkbox.svg"}},components:{userAvatar:G}},on={class:"board-filter"},rn={class:"cmp-header"},an=o("p",{class:"cmp-container-title"},"Filter",-1),nn=o("span",null,null,-1),ln=[nn],dn=o("hr",{class:"thin-hr"},null,-1),cn={class:"filter-search-container"},un=o("p",{class:"filter-section-title"},"Keyword",-1),hn=o("p",{class:"search-description"},"Search cards, members, labels, and more.",-1),mn={class:"filter-member-container"},pn=o("p",{class:"filter-section-title"},"Members",-1),gn={class:"filter-no-member flex"},_n=["src"],bn=o("div",{class:"filter-no-user-avatar flex"},null,-1),vn=o("p",{class:"filter-user-name"},"No members",-1),fn=o("input",{type:"checkbox",value:"no",hidden:""},null,-1),kn={class:"filter-members-list"},yn=["src"],Cn={class:"filter-user-name"},wn=["value"];function Tn(t,e,i,l,r,s){const u=g("user-avatar"),d=N("focus"),h=N("modal");return a(),n("section",on,[o("div",rn,[an,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=c=>t.$emit("closeCmp"))},ln)]),dn,o("label",cn,[un,$(o("input",{type:"text",class:"search-input",placeholder:"Enter a keyword...",onInput:e[1]||(e[1]=(...c)=>s.setFilter&&s.setFilter(...c))},null,544),[[d],[h,r.filterBy.txt]]),hn]),o("div",mn,[pn,o("label",gn,[o("img",{class:"checkbox-icon",src:s.checkBox},null,8,_n),bn,vn,fn]),o("div",kn,[(a(!0),n(f,null,k(i.board.members,c=>(a(),n("label",{key:c._id,class:"filter-member flex"},[o("img",{class:"checkbox-icon",src:s.checkBox},null,8,yn),S(u,{user:c},null,8,["user"]),o("p",Cn,b(c.fullname),1),o("input",{type:"checkbox",value:c._id,hidden:""},null,8,wn)]))),128))])])])}var Sn=T(sn,[["render",Tn]]),In="/assets/photos.2b952301.jpg",xn="/assets/colors.05334064.jpg";const $n={props:{board:Object},data(){return{filterBy:"",handles:{isAbout:!1,isSearch:!1,isChangeBg:!1,isShowActivities:!1},bgOptions:{isChangClr:!1,isChangImg:!1},bgClr:"",bgImg:"",bgColors:[{id:"l101",color:"#61bd4f",isSelected:!1},{id:"l102",color:"#f2d600",isSelected:!1},{id:"l103",color:"#ff9f1a",isSelected:!1},{id:"l104",color:"#eb5a46",isSelected:!1},{id:"l105",color:"#c377e0",isSelected:!1},{id:"l106",color:"#0079bf",isSelected:!1},{id:"l107",color:"#00c2e0",isSelected:!1},{id:"l108",color:"#51e898",isSelected:!1},{id:"l109",color:"#ff78cb",isSelected:!1},{id:"l110",color:"#344563",isSelected:!1}],search:"",photos:[],isLoading:!1,attachments:[]}},methods:{searchPhoto(t){const e="Y2X6Y_wdMpqvaYX_4jgO-dOBqVAsQMQpihsIFNOAX5E";let i=20,l=t;l||(l=this.search),q.get(`https://api.unsplash.com/search/photos?page=1&per_page=${i}&query=${l}&client_id=${e}`).then(r=>{this.photos=r.data.results}).catch(r=>{console.log(r)})},waitSearch:he.debounce(function(){this.searchPhoto()},1e3),toggleMenuContent(t){if(this.bgOptions.isChangClr||this.bgOptions.isChangImg){this.toggleBgOption();return}for(let e in this.handles)this.handles[e]=!1;typeof t=="string"&&(this.handles[t]=!0)},toggleBgOption(t){for(const e in this.bgOptions)this.bgOptions[e]=!1;typeof t=="string"&&(this.bgOptions[t]=!0,t==="isChangImg"&&this.searchPhoto(this.board.title))},selectBg(t,e){this.$emit("editBoard",t,e)},async onAttachImg(t){this.isLoading=!0;const e=await this.$emit("attachImg",t);this.attachments.push(e),this.isLoading=!1}},computed:{activitiesToDisplay(){const t=this.board.activities.sort((e,i)=>e.createdAt>i.createdAt?-1:1);return this.handles.isShowActivities?t:t.slice(0,20)},cmpTitle(){return this.handles.isAbout?"About":this.handles.isSearch?"Search":this.bgOptions.isChangClr?"Colors":this.bgOptions.isChangImg?"Photos":this.handles.isChangeBg?"Change background":this.handles.isShowActivities?"Activity":"Menu"}},components:{activityPreview:ve,listSlot:V}},Bn={class:"board-menu"},Dn={class:"cmp-header"},Un=o("span",null,null,-1),Ln=[Un],On={class:"cmp-container-title"},An=o("span",null,null,-1),Nn=[An],Mn=o("hr",{class:"thin-hr"},null,-1),Fn={class:"menu-content"},En={key:0,class:"menu-options flex"},Jn=o("span",{class:"trello-icon"},null,-1),Gn=o("div",null,[o("p",{class:"menu-option-about"},"About this board"),o("p",{class:"menu-option-about-description"}," Add description to your board ")],-1),Rn=[Jn,Gn],jn=o("img",{class:"board-bg-preview",src:ge},null,-1),Pn=o("p",{class:"menu-option-bgc"},"Change background",-1),Vn=[jn,Pn],qn=o("hr",{class:"thin-hr"},null,-1),Wn={key:1,class:"menu-activities-container"},Hn={class:"activities-list"},Yn={key:2,class:"change-bg-container"},zn={key:0,class:"change-bg-choose"},Xn={class:"photos-colors-options flex"},Qn=o("img",{class:"photos-option",src:In},null,-1),Zn=o("p",{class:"photos-option-title"},"Photos",-1),Kn=[Qn,Zn],el=o("img",{class:"colors-option",src:xn},null,-1),tl=o("p",{class:"color-option-title"},"Colors",-1),sl=[el,tl],ol=o("hr",{class:"thin-hr"},null,-1),rl=o("p",{class:"custom-option-title"},"Custom",-1),il={class:"customs-container flex"},al={class:"custom-input-label"},nl=o("div",{class:"custom-option"},[o("span")],-1),ll={class:"options-list"},dl=["onClick"],cl={key:1,class:"change-bg-img-screen"},ul=["src","onClick"];function hl(t,e,i,l,r,s){const u=g("activity-preview"),d=g("list-slot"),h=N("focus");return a(),n("section",Bn,[o("div",Dn,[r.handles.isAbout||r.handles.isChangeBg||r.handles.isShowActivities?(a(),n("a",{key:0,class:"back-to-cmp-btn",onClick:e[0]||(e[0]=(...c)=>s.toggleMenuContent&&s.toggleMenuContent(...c))},Ln)):m("",!0),o("p",On,b(s.cmpTitle),1),o("a",{class:"close-cmp-btn",onClick:e[1]||(e[1]=c=>t.$emit("closeCmp"))},Nn)]),Mn,o("section",Fn,[!r.handles.isAbout&&!r.handles.isChangeBg&&!r.handles.isShowActivities?(a(),n("div",En,[o("div",{class:"menu-option",onClick:e[2]||(e[2]=c=>s.toggleMenuContent("isAbout"))},Rn),o("div",{class:"menu-option",onClick:e[3]||(e[3]=c=>s.toggleMenuContent("isChangeBg"))},Vn),qn])):m("",!0),!r.handles.isAbout&&!r.handles.isChangeBg?(a(),n("section",Wn,[r.handles.isShowActivities?m("",!0):(a(),n("p",{key:0,class:"activity-header",onClick:e[4]||(e[4]=c=>s.toggleMenuContent("isShowActivities"))}," Activity ")),o("div",Hn,[(a(!0),n(f,null,k(s.activitiesToDisplay,c=>(a(),C(u,{key:c.id,activity:c},null,8,["activity"]))),128))]),r.handles.isShowActivities?m("",!0):(a(),n("a",{key:1,class:"show-allActivities",onClick:e[5]||(e[5]=c=>s.toggleMenuContent("isShowActivities"))},"View all activity"))])):m("",!0),r.handles.isChangeBg?(a(),n("section",Yn,[!r.bgOptions.isChangClr&&!r.bgOptions.isChangImg?(a(),n("div",zn,[o("div",Xn,[o("div",{class:"photos-option-container",onClick:e[6]||(e[6]=c=>s.toggleBgOption("isChangImg"))},Kn),o("div",{class:"colors-option-container",onClick:e[7]||(e[7]=c=>s.toggleBgOption("isChangClr"))},sl)]),ol,rl,o("div",il,[o("label",al,[o("input",{type:"file",onChange:e[8]||(e[8]=(...c)=>s.onAttachImg&&s.onAttachImg(...c)),hidden:""},null,32),nl])])])):m("",!0),o("div",ll,[r.bgOptions.isChangClr?(a(),C(d,{key:0},{list:w(()=>[(a(!0),n(f,null,k(r.bgColors,c=>(a(),n("div",{key:c.id,class:"colors-option",style:B({backgroundColor:c.color}),onClick:p=>s.selectBg("bgClr",c.color)},null,12,dl))),128))]),_:1})):m("",!0),r.bgOptions.isChangImg?(a(),n("div",cl,[$(o("input",{type:"text",placeholder:"Search Unsplash for photos",class:"unsplash-search","onUpdate:modelValue":e[9]||(e[9]=c=>r.search=c),onInput:e[10]||(e[10]=(...c)=>s.waitSearch&&s.waitSearch(...c))},null,544),[[h],[D,r.search]]),S(d,null,{list:w(()=>[(a(!0),n(f,null,k(r.photos,(c,p)=>(a(),n("img",{key:p,class:"photos-option",src:c.urls.thumb,alt:"img",onClick:U=>s.selectBg("bgImg",c)},null,8,ul))),128))]),_:1})])):m("",!0)])])):m("",!0)])])}var ml=T($n,[["render",hl]]);const pl={name:"invite-user",props:{members:Array},components:{userAvatar:G},data(){return{users:null,selected:[]}},async created(){await this.$store.dispatch({type:"loadUsers"}),this.users=this.$store.getters.users},methods:{addMemberToBoard(){if(!this.selected.length)return;const t=this.users.filter(e=>{if(this.selected.includes(e._id))return e});this.$emit("addMemberToBoard","add members",t)}}},gl={key:0,class:"invite-user"},_l={class:"invite-user-header"},bl=o("p",{class:"invite-user-title"},"Invite to board",-1),vl=o("span",null,null,-1),fl=[vl],kl=o("hr",{class:"thin-hr"},null,-1),yl={class:"invite-content"},Cl={class:"select-container"},wl={class:"members-container"},Tl=o("h4",{class:"members-preview-title"},"Board members",-1),Sl={class:"board-members-container"},Il={class:"member-fullname"};function xl(t,e,i,l,r,s){const u=g("el-option"),d=g("el-select"),h=g("user-avatar");return r.users?(a(),n("section",gl,[o("div",_l,[bl,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=c=>t.$emit("closeCmp"))},fl)]),kl,o("div",yl,[o("div",Cl,[S(d,{modelValue:r.selected,"onUpdate:modelValue":e[1]||(e[1]=c=>r.selected=c),multiple:"",placeholder:"Select user",style:{width:"100%"}},{default:w(()=>[(a(!0),n(f,null,k(r.users,c=>(a(),C(u,{key:c._id,label:c.fullname,value:c._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o("button",{class:"add-members-btn",onClick:e[2]||(e[2]=(...c)=>s.addMemberToBoard&&s.addMemberToBoard(...c))}," Invite ")]),o("div",wl,[Tl,o("ul",Sl,[(a(!0),n(f,null,k(i.members,c=>(a(),n("li",{class:"board-member",key:c._id},[S(h,{user:c},null,8,["user"]),o("div",Il,b(c.fullname)+b(`(${c.username})`),1)]))),128))])])])])):m("",!0)}var $l=T(pl,[["render",xl]]),z="/assets/full-star.b170b7f3.png",X="/assets/empty-star.b48fd479.png";const Bl={name:"board-details",data(){return{board:null,dndInfo:{},isLabelTitle:!1,isOpenFilter:!1,isOpenMenu:!1,isOpenInvite:!1}},components:{boardGroup:tn,userAvatar:G,Container:me,Draggable:pe,boardFilter:Sn,boardMenu:ml,inviteUser:$l},async created(){this.unsubscribe=Ws.on("show-msg",this.showMsg);const{boardId:t}=this.$route.params;this.topic=t,O.emit("board topic",this.topic),O.on("someone updated",this.boardUpdated)},unmounted(){O.off("someone updated",this.boardUpdated)},methods:{onDrop(t){const e=this.board.groups.splice(t.removedIndex,1)[0];this.board.groups.splice(t.addedIndex,0,e),this.saveDnd()},dropCard({ev:t,groupToId:e}){this.dndInfo.groupFromId=t.payload,t.payload!==e&&(this.dndInfo.groupToId=e),(t.removedIndex||typeof t.removedIndex=="number")&&(this.dndInfo.removedIndex=t.removedIndex),(t.addedIndex||typeof t.addedIndex=="number")&&(this.dndInfo.addedIndex=t.addedIndex),(this.dndInfo.addedIndex||typeof this.dndInfo.addedIndex=="number")&&(this.dndInfo.removedIndex||typeof this.dndInfo.removedIndex=="number")&&this.moveTask()},moveTask(){const t=this.board.groups.find(l=>l.id===this.dndInfo.groupFromId),e=this.dndInfo.groupToId?this.board.groups.find(l=>l.id===this.dndInfo.groupToId):t,i=t.tasks.splice(this.dndInfo.removedIndex,1)[0];e.tasks.splice(this.dndInfo.addedIndex,0,i),this.saveDnd(),this.dndInfo={}},async loadBoard(t){this.board=await this.$store.dispatch({type:"loadBoard",boardId:t})},async saveDnd(){this.board=await this.$store.dispatch({type:"saveBoard",board:JSON.parse(JSON.stringify(this.board))})},async editBoard(t,e){try{this.board=await this.$store.dispatch({type:"editBoard",boardId:this.board._id,changeType:t,val:e})}catch{}},async attachImg(t){const{url:e}=await this.$store.dispatch({type:"attachImg",ev:t});return await this.editBoard("bgImg",e),e},async addGroup(){const t=E.getEmptyGroup();this.board=await this.$store.dispatch({type:"saveGroup",boardId:this.board._id,group:t,changeType:"Added a new group"})},async saveGroup({groupId:t,changeType:e,newValue:i}){const l=JSON.parse(JSON.stringify(this.board.groups.find(r=>r.id===t)));switch(e){case"save group title":l.title=i;break;case"add task":l.tasks.push(i);break}this.board=await this.$store.dispatch({type:"saveGroup",boardId:this.board._id,group:l,changeType:e})},async removeGroup(t){this.board=await this.$store.dispatch({type:"removeGroup",boardId:this.board._id,groupId:t})},toggleLabelTitle(){this.isLabelTitle=!this.isLabelTitle},toggleFilter(){this.isOpenFilter=!this.isOpenFilter},setFilter(t){this.$store.commit({type:"setFilter",filterBy:t})},boardUpdated(){this.loadBoard(this.board._id)},toggleMenu(){this.isOpenMenu=!this.isOpenMenu},moveToDashboard(t){this.$router.push(`/${t}/dashboard`)}},computed:{isStarred(){return this.board.isFavorite?"filled":"stroke"},background(){var i,l,r,s;const t=((r=(l=(i=this.board.style)==null?void 0:i.bgImg)==null?void 0:l.urls)==null?void 0:r.regular)||"",e=((s=this.board.style)==null?void 0:s.bgClr)||"";return{backgroundImage:`url(${t})`,backgroundColor:e}},updatedBoardFromStore(){return this.$store.getters.boards}},watch:{"$route.params.boardId":{immediate:!0,handler(){const{boardId:t}=this.$route.params;!t||this.loadBoard(t)}}},unmounted(){this.unsubscribe()}},Dl={class:"board-header flex"},Ul={class:"board-title-container flex"},Ll=o("button",{class:"btn-board-details btn-board"},"Board",-1),Ol={key:0,class:"star",src:z,alt:""},Al={key:1,class:"star",src:X},Nl={class:"members-nav-bar flex"},Ml={class:"board-members-container flex"},Fl={class:"board-header-nav flex"},El={class:"groups-layout"},Jl={class:"groups-container flex"},Gl=o("span",null,null,-1),Rl=L(" Add another list "),jl=[Gl,Rl];function Pl(t,e,i,l,r,s){const u=g("router-view"),d=g("user-avatar"),h=g("invite-user"),c=g("board-filter"),p=g("board-menu"),U=g("board-group"),v=g("Draggable"),F=g("Container");return r.board?(a(),n("section",{key:0,class:"board-container",style:B(s.background)},[S(u,{onUpdateBoard:e[0]||(e[0]=I=>s.loadBoard(r.board._id))}),o("header",Dl,[o("div",Ul,[Ll,o("div",{class:"board-title",contenteditable:"true",onBlur:e[1]||(e[1]=I=>s.editBoard("board title",I))},b(r.board.title),33),o("button",{class:"star-btn btn-board btn",onClick:e[2]||(e[2]=y(I=>s.editBoard("toggle favorite"),["stop"]))},[r.board.isFavorite?(a(),n("img",Ol)):(a(),n("img",Al))])]),o("div",Nl,[o("div",Ml,[(a(!0),n(f,null,k(r.board.members,I=>(a(),C(d,{"v-if":r.board.members,key:I._id,user:I},null,8,["v-if","user"]))),128))]),o("button",{class:"invite-btn btn-board btn",onClick:e[3]||(e[3]=I=>r.isOpenInvite=!r.isOpenInvite)}," Invite "),r.isOpenInvite?(a(),C(h,{key:0,members:r.board.members,onCloseCmp:e[4]||(e[4]=I=>r.isOpenInvite=!r.isOpenInvite),onAddMemberToBoard:s.editBoard},null,8,["members","onAddMemberToBoard"])):m("",!0)]),o("nav",Fl,[o("button",{class:"filter-btn btn-board btn",onClick:e[5]||(e[5]=(...I)=>s.toggleFilter&&s.toggleFilter(...I))}," Filter "),r.isOpenFilter?(a(),C(c,{key:0,board:r.board,onCloseCmp:s.toggleFilter,onSetFilter:s.setFilter},null,8,["board","onCloseCmp","onSetFilter"])):m("",!0),o("button",{class:"show-menu-btn btn-board btn",onClick:e[6]||(e[6]=(...I)=>s.toggleMenu&&s.toggleMenu(...I))}," Show menu "),r.isOpenMenu?(a(),C(p,{key:1,board:r.board,onCloseCmp:s.toggleMenu,onEditBoard:s.editBoard,onAttachImg:s.attachImg},null,8,["board","onCloseCmp","onEditBoard","onAttachImg"])):m("",!0)])]),o("div",El,[o("article",Jl,[S(F,{onDrop:s.onDrop,orientation:"horizontal"},{default:w(()=>[(a(!0),n(f,null,k(r.board.groups,I=>(a(),C(v,{class:"draggable-container flex",key:I.id},{default:w(()=>[S(U,{group:I,isLabelTitle:r.isLabelTitle,onDropped:s.dropCard,onSaveGroup:s.saveGroup,onToggleLabelTitle:s.toggleLabelTitle,onRemoveGroup:s.removeGroup},null,8,["group","isLabelTitle","onDropped","onSaveGroup","onToggleLabelTitle","onRemoveGroup"])]),_:2},1024))),128))]),_:1},8,["onDrop"]),o("div",{class:"add-group",onClick:e[7]||(e[7]=(...I)=>s.addGroup&&s.addGroup(...I))},jl)])])],4)):m("",!0)}var Vl=T(Bl,[["render",Pl]]);const ql={name:"work-space",data(){return{isFavorite:!1,isCreateBoard:!1}},methods:{toBoardDetails(t){this.$router.push(`/board/${t}`)},async toggleFavorite(t){this.$store.dispatch({type:"editBoard",boardId:t,changeType:"toggle favorite"})},async removeBoard(t){this.$store.dispatch({type:"removeBoard",boardId:t})}},computed:{boards(){return this.$store.getters.boards},favoriteBoards(){return this.$store.getters.favoriteBoards},cardBackground(){var t;return this.board.style.bgImg?{backgroundImage:`url(${(t=board.style)==null?void 0:t.bgImg})`}:this.board.style.bgClr?{backgroundColor:`(${this.board.style.bgClr})`}:""}},components:{createBoard:_e}},Wl={class:"workspace-page-container"},Hl={class:"all-boards-container"},Yl=o("h1",null,"Favorite boards",-1),zl={class:"favorite-boards flex"},Xl=["onClick"],Ql={class:"favorite-board-title"},Zl=["onClick"],Kl={key:0,class:"ws-full-star",src:z},ed={key:1,class:"ws-empty-star",src:X},td=o("h3",{class:"all-boards-title"},"All boards",-1),sd={class:"saved-boards"},od=["onClick"],rd={class:"title"},id=["onClick"],ad={key:0,class:"ws-full-star",src:z},nd={key:1,class:"ws-empty-star",src:X};function ld(t,e,i,l,r,s){const u=g("create-board");return a(),n("main",Wl,[o("section",Hl,[o("section",null,[Yl,o("ul",zl,[(a(!0),n(f,null,k(s.favoriteBoards,d=>{var h,c,p,U;return a(),n("li",{key:d._id,onClick:v=>s.toBoardDetails(d._id),class:"board-preview img-pos style-font",style:B({backgroundImage:`url(${((p=(c=(h=d.style)==null?void 0:h.bgImg)==null?void 0:c.urls)==null?void 0:p.thumb)||""})`,backgroundColor:((U=d.style)==null?void 0:U.bgClr)||""})},[o("h2",Ql,b(d.title),1),o("a",{class:"star-container",onClick:y(v=>s.toggleFavorite(d._id),["stop"])},[d.isFavorite?(a(),n("img",Kl)):(a(),n("img",ed))],8,Zl)],12,Xl)}),128))])]),td,o("article",sd,[(a(!0),n(f,null,k(s.boards,d=>{var h,c,p,U;return a(),n("div",{key:d._id,onClick:v=>s.toBoardDetails(d._id),class:"board-preview img-pos style-font",style:B({backgroundImage:`url(${((p=(c=(h=d.style)==null?void 0:h.bgImg)==null?void 0:c.urls)==null?void 0:p.thumb)||""})`,backgroundColor:((U=d.style)==null?void 0:U.bgClr)||""})},[o("h2",rd,b(d.title),1),o("a",{class:"star-container",onClick:y(v=>s.toggleFavorite(d._id),["stop"])},[d.isFavorite?(a(),n("img",ad)):(a(),n("img",nd))],8,id)],12,od)}),128)),o("button",{onClick:e[0]||(e[0]=d=>r.isCreateBoard=!0),class:"board-preview justify-center add-card"}," Create new board "),r.isCreateBoard?(a(),C(u,{key:0,onCloseCmp:e[1]||(e[1]=d=>r.isCreateBoard=!1)})):m("",!0)])])])}var dd=T(ql,[["render",ld]]);const cd={name:"home",data(){return{loginCred:{username:"",password:""},signupCred:{fullname:"",username:"",password:""},isSignIn:!0,msg:""}},computed:{loggedinUser(){return this.$store.getters.loggedinUser},loginSignUpButton(){return this.isSignIn?"Sign up for an account":"Back"}},created(){this.loadUsers()},methods:{async doLogin(){if(!this.loginCred.username){this.msg="Please enter username/password";return}try{await this.$store.dispatch({type:"login",userCred:this.loginCred}),this.$router.push("/board")}catch{this.msg="Failed to login"}},doLogout(){this.$store.dispatch({type:"logout"})},async doSignup(){if(!this.signupCred.fullname||!this.signupCred.password||!this.signupCred.username){this.msg="Please fill out all of the form details";return}try{await this.$store.dispatch({type:"signup",userCred:this.signupCred}),this.$router.push("/board")}catch{this.msg="Failed to sign up new user"}},toggleLoginSignUp(){this.isSignIn=!this.isSignIn},async removeUser(t){try{await this.$store.dispatch({type:"removeUser",userId:t}),this.msg="User removed"}catch{this.msg="Failed to remove user"}},async guestLogin(){try{await this.$store.dispatch({type:"login",userCred:{username:"Guest",password:"123"}}),this.$router.push("/board")}catch(t){console.log(t),this.msg="Failed to do guest login"}},loadUsers(){this.$store.dispatch({type:"loadUsers"})}}},ud={class:"login-page"},hd=o("h1",{class:"login-logo-header"},[o("div",{class:"login-icon"},[o("span")]),L(" Mellow ")],-1),md={class:"main-login-container"},pd=o("p",{class:"login-welcome-msg"},"Log in to Mellow",-1),gd={key:1,class:"login-form-container"},_d=o("button",{class:"login-button"},"Log In",-1),bd=o("div",{class:"or-div"},"OR",-1),vd=o("button",{class:"login-button"},"Login",-1),fd=o("hr",{class:"thin-hr"},null,-1),kd={class:"signup-select-container"},yd=o("span",{class:"trello-dot"},null,-1);function Cd(t,e,i,l,r,s){return a(),n("section",ud,[hd,o("div",md,[pd,s.loggedinUser?(a(),n("button",{key:0,class:"log-out-button",onClick:e[0]||(e[0]=(...u)=>s.doLogout&&s.doLogout(...u))}," Logout "+b(s.loggedinUser.username),1)):(a(),n("section",gd,[r.isSignIn?(a(),n("form",{key:0,class:"sign-in-form",onSubmit:e[4]||(e[4]=y((...u)=>s.doLogin&&s.doLogin(...u),["prevent"]))},[$(o("input",{class:"login-form-input",type:"text","onUpdate:modelValue":e[1]||(e[1]=u=>r.loginCred.username=u),placeholder:"Enter username"},null,512),[[D,r.loginCred.username]]),$(o("input",{class:"login-form-input",type:"password","onUpdate:modelValue":e[2]||(e[2]=u=>r.loginCred.password=u),placeholder:"Enter password"},null,512),[[D,r.loginCred.password]]),_d,bd,o("button",{class:"login-button guest",onClick:e[3]||(e[3]=(...u)=>s.guestLogin&&s.guestLogin(...u))}," Login as Guest ")],32)):m("",!0),r.isSignIn?m("",!0):(a(),n("form",{key:1,class:"sign-up-form",onSubmit:e[8]||(e[8]=y((...u)=>s.doSignup&&s.doSignup(...u),["prevent"]))},[$(o("input",{class:"login-form-input",type:"text","onUpdate:modelValue":e[5]||(e[5]=u=>r.signupCred.fullname=u),placeholder:"Enter your full name"},null,512),[[D,r.signupCred.fullname]]),$(o("input",{class:"login-form-input",type:"text","onUpdate:modelValue":e[6]||(e[6]=u=>r.signupCred.username=u),placeholder:"Enter username"},null,512),[[D,r.signupCred.username]]),$(o("input",{class:"login-form-input",type:"password","onUpdate:modelValue":e[7]||(e[7]=u=>r.signupCred.password=u),placeholder:"Enter password"},null,512),[[D,r.signupCred.password]]),vd],32)),fd,o("div",kd,[o("a",{class:"sign-up-toggle",onClick:e[9]||(e[9]=(...u)=>s.toggleLoginSignUp&&s.toggleLoginSignUp(...u))}," Can't log in?"),yd,o("a",{class:"sign-up-toggle",onClick:e[10]||(e[10]=(...u)=>s.toggleLoginSignUp&&s.toggleLoginSignUp(...u))},b(s.loginSignUpButton),1)])]))])])}var wd=T(cd,[["render",Cd]]);const Td=Be({history:De("/"),routes:[{path:"/",name:"home",component:cs},{path:"/login",name:"login",component:wd},{path:"/board",name:"work-space",component:dd},{path:"/board/:boardId",name:"board-details",component:Vl,children:[{path:":groupId/:taskId",name:"task-details",component:fe}]},{path:"/about",name:"about",component:_s}]});var Sd={state:{boards:[],currBoard:null,filterBy:null},getters:{boards({boards:t}){return JSON.parse(JSON.stringify(t))},favoriteBoards({boards:t}){return t.filter(e=>e.isFavorite)},getCurrBoard({currBoard:t}){return JSON.parse(JSON.stringify(t))}},mutations:{setFilter(t,{filterBy:e}){t.filterBy=e},setBoards(t,{boards:e}){t.boards=e},addBoard(t,{board:e}){t.boards.push(e)},removeBoard(t,{boardId:e}){t.boards=t.boards.filter(i=>i._id!==e)},setCurrBoard(t,{board:e}){t.currBoard=JSON.parse(JSON.stringify(e))},saveBoard(t,{savedBoard:e}){const i=t.boards.findIndex(l=>l._id===e._id);t.boards.splice(i,1,e)}},actions:{async loadBoards({commit:t}){try{const e=await E.query();t({type:"setBoards",boards:e})}catch(e){console.log("board module loadBoards cant load boards now",e)}},async loadBoard({commit:t},{boardId:e}){try{const i=await E.getById(e);return t({type:"setCurrBoard",board:i}),JSON.parse(JSON.stringify(i))}catch(i){console.log("board module loadBoard cant load board now",i)}},async addBoard({dispatch:t},{title:e,bgClr:i,bgImg:l}){try{const r=E.getEmptyBoard();r.title=e,r.style.bgClr=i,r.style.bgImg=l;const s={txt:"Add board"};return await t({type:"saveBoard",board:JSON.parse(JSON.stringify(boardToUpdate)),activity:JSON.parse(JSON.stringify(s))})}catch(r){console.log("board module addBoard cant load boards now",r)}},async removeBoard({commit:t},{boardId:e}){try{await E.remove(e),t({type:"removeBoard",boardId:e})}catch(i){console.log("board module removeBoard cant load boards now",i)}},async removeTask({dispatch:t,state:e},{boardId:i,groupId:l,task:r,changeType:s}){try{const u=JSON.parse(JSON.stringify(e.boards.find(p=>p._id===i))),d=u.groups.find(p=>p.id===l),h=d.tasks.findIndex(p=>p.id===r.id);d.tasks.splice(h,1);const c={txt:s,groupId:l,task:{id:r.id,title:r.title}};return await t({type:"saveBoard",board:JSON.parse(JSON.stringify(u)),activity:JSON.parse(JSON.stringify(c))})}catch(u){console.log("board module removeTask cant remove task now",u)}},async removeGroup({dispatch:t,state:e},{boardId:i,groupId:l}){try{const r=JSON.parse(JSON.stringify(e.boards.find(d=>d._id===i))),s=r.groups.findIndex(d=>d.id===l);r.groups.splice(s,1);const u={txt:"remove group",group:{id:l}};return await t({type:"saveBoard",board:JSON.parse(JSON.stringify(r)),activity:JSON.parse(JSON.stringify(u))})}catch(r){console.log("board module removeGroup cant remove group now",r)}},async editBoard({state:t,dispatch:e},{boardId:i,changeType:l,val:r}){try{const s=JSON.parse(JSON.stringify(t.boards.find(h=>h._id===i)));let u;switch(l){case"bgClr":s.style[l]=r,s.style.bgImg="",u="background";break;case"bgImg":s.style[l]=r,s.style.bgClr="",u="background";break;case"board title":s.title=r.currentTarget.textContent,u="title";break;case"toggle favorite":s.isFavorite=!s.isFavorite,u="toggle favorite";break;case"add members":let h=s.members.map(c=>c._id);r.forEach(c=>{h!=null&&h.includes(c._id)||s.members.push(JSON.parse(JSON.stringify(c)))}),u="members";break;case"update labels":if(typeof r=="string"){const c=s.labels.findIndex(p=>p.id===r);s.labels.splice(c,1)}else{const c=s.labels.findIndex(p=>p.id===r.id);c===-1?s.labels.push(r):s.labels.splice(c,1,r)}u="labels";break}const d={txt:`Change board ${u}`};return await e({type:"saveBoard",board:JSON.parse(JSON.stringify(s)),activity:JSON.parse(JSON.stringify(d))})}catch(s){throw console.log("board module editBoard cant edit board now",s),s}},async saveBoard({commit:t},{board:e,activity:i}){try{const l=await E.save(e,i);return t({type:"saveBoard",savedBoard:l}),t({type:"setCurrBoard",board:l}),JSON.parse(JSON.stringify(l))}catch(l){throw console.log("board module saveBoard cant save board now",l),l}},async attachImg({commit:t},{ev:e}){try{return await E.uploadImg(e)}catch(i){console.log("board module attachImg cant attach img now",i)}},async saveTask({dispatch:t,state:e},{boardId:i,groupId:l,task:r,changeType:s}){try{const u=JSON.parse(JSON.stringify(e.boards.find(p=>p._id===i))),d=u.groups.find(p=>p.id===l),h=d.tasks.findIndex(p=>p.id===r.id);h===-1?d.tasks.push(r):d.tasks.splice(h,1,r);const c={txt:s,groupId:l,task:{id:r.id,title:r.title}};return await t({type:"saveBoard",board:JSON.parse(JSON.stringify(u)),activity:JSON.parse(JSON.stringify(c))})}catch(u){console.log("board module saveTask cant save task now",u)}},async saveGroup({dispatch:t,state:e},{boardId:i,group:l,changeType:r}){try{const s=JSON.parse(JSON.stringify(e.boards.find(h=>h._id===i))),u=s.groups.findIndex(h=>h.id===l.id);u===-1?s.groups.push(l):s.groups.splice(u,1,l);const d={txt:r,group:{id:l.id,title:l.title}};return await t({type:"saveBoard",board:JSON.parse(JSON.stringify(s)),activity:JSON.parse(JSON.stringify(d))})}catch(s){console.log("board module saveGroup cant save group now",s)}}}},Id={state:{loggedinUser:x.getLoggedinUser(),users:[],watchedUser:null,guestUser:x.getGuestUser()},getters:{users({users:t}){return JSON.parse(JSON.stringify(t))},loggedinUser({loggedinUser:t}){return t},watchedUser({watchedUser:t}){return t},getGuestUser({guestUser:t}){return t}},mutations:{setLoggedinUser(t,{user:e}){t.loggedinUser=e?de({},e):null},setWatchedUser(t,{user:e}){t.watchedUser=e},setUsers(t,{users:e}){t.users=e},removeUser(t,{userId:e}){t.users=t.users.filter(i=>i._id!==e)},setGuestUser(t,{guestUser:e}){t.guestUser=e}},actions:{async login({commit:t},{userCred:e}){try{const i=await x.login(e);return t({type:"setLoggedinUser",user:i}),i}catch(i){throw console.log("userStore: Error in login",i),i}},async signup({commit:t},{userCred:e}){try{const i=await x.signup(e);return t({type:"setLoggedinUser",user:i}),i}catch(i){throw console.log("userStore: Error in signup",i),i}},async logout({commit:t}){try{await x.logout(),t({type:"setLoggedinUser",user:null})}catch(e){throw console.log("userStore: Error in logout",e),e}},async loadUsers({commit:t}){try{const e=await x.getUsers();t({type:"setUsers",users:e})}catch(e){throw console.log("userStore: Error in loadUsers",e),e}},async getUserById({commit:t},{userId:e}){try{const i=await x.getById(e);return console.log(i),JSON.parse(JSON.stringify(i))}catch(i){throw console.log("userStore: Error in getUserById",i),i}},async loadAndWatchUser({commit:t},{userId:e}){try{console.log("store");const i=await x.getById(e);t({type:"setWatchedUser",user:i}),O.off(ue),O.on(ue,l=>{t({type:"setWatchedUser",user:l})})}catch(i){throw console.log("userStore: Error in loadAndWatchUser",i),i}},async removeUser({commit:t},{userId:e}){try{await x.remove(e),t({type:"removeUser",userId:e})}catch(i){throw console.log("userStore: Error in removeUser",i),i}},async updateUser({commit:t},{user:e}){try{e=await x.update(e),t({type:"setUser",user:e})}catch(i){throw console.log("userStore: Error in updateUser",i),i}},loadGuestUser({commit:t}){const e=x.getGuestUser();t({type:"setGuestUser",guestUser:e})},async loadUsers({commit:t}){try{const e=await x.getUsers();t({type:"setUsers",users:e})}catch(e){throw console.log("userStore: Error in loadUsers",e),e}}}};const xd=Ue({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{boardStore:Sd,userStore:Id}}),$d={mounted(t){t.focus()}};const R=Le(Zt);R.directive("focus",$d);R.use(Oe);R.use(Ae,{});R.use(Ne,{accessKey:"Y2X6Y_wdMpqvaYX_4jgO-dOBqVAsQMQpihsIFNOAX5E",secret:"W5FeRrlFbgAz3i3d54dHnDm9okVhUeUIXZ6TyvZC_H4"});R.use(Me);R.use(Td);R.use(xd);R.mount("#app");
