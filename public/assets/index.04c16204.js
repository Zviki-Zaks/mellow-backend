var Te=Object.defineProperty;var re=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var le=(t,e,i)=>e in t?Te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ne=(t,e)=>{for(var i in e||(e={}))Ie.call(e,i)&&le(t,i,e[i]);if(re)for(var i of re(e))xe.call(e,i)&&le(t,i,e[i]);return t};import{a as J,l as Ae,o as r,c as l,b as o,F as f,r as C,t as _,d as de,e as m,f as j,n as S,g as I,w,h as A,v as D,i as E,j as g,k as y,m as B,p as v,_ as he,q as Se,C as ge,D as pe,s as De,u as Be,x as Ue,y as $e,z as Le,U as Oe,A as Fe}from"./vendor.b75cec86.js";const Me=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function i(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(a){if(a.ep)return;a.ep=!0;const s=i(a);fetch(a.href,s)}};Me();const je="/api/";var Ee=J.create({withCredentials:!0});const M={get(t,e){return q(t,"GET",e)},post(t,e){return q(t,"POST",e)},put(t,e){return q(t,"PUT",e)},delete(t,e){return q(t,"DELETE",e)}};async function q(t,e="GET",i=null){try{return(await Ee({url:`${je}${t}`,method:e,data:i,params:e==="GET"?i:null})).data}catch(d){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data:`,i),console.dir(d),d.response&&d.response.status,d}}const ce="user-updated",Ne="",F=Re();F.setup();function Re(){var t=null;return{async setup(){t=Ae(Ne)},on(i,d){t.on(i,d)},off(i,d=null){!t||(d?t.off(i,d):t.removeAllListeners(i))},emit(i,d){t.emit(i,d)},terminate(){t=null}}}const W="loggedinUser",L={login:We,logout:Ye,signup:Ze,getLoggedinUser:me,getUsers:Ge,getById:qe,remove:Pe,update:Je,getGuestUser:Ve};function Ge(){return M.get("user")}async function qe(t){return await M.get(`user/${t}`)}function Pe(t){return M.delete(`user/${t}`)}async function Je(t){return t=await M.put(`user/${t._id}`,t),me()._id===t._id&&Z(t),t}async function We(t){const e=await M.post("auth/login",t);if(F.emit("set-user-socket",e._id),e)return Z(e)}async function Ze(t){const e=await M.post("auth/signup",t);return F.emit("set-user-socket",e._id),Z(e)}async function Ye(){return sessionStorage.removeItem(W),F.emit("unset-user-socket"),await M.post("auth/logout")}function Z(t){return sessionStorage.setItem(W,JSON.stringify(t)),t}function me(){return JSON.parse(sessionStorage.getItem(W)||"null")}function Ve(){return{_id:"624298a9e48762573484a9e5",username:"Guest",fullname:"Guest User",imgUrl:"../src/assets/svgs/guest.svg"}}var be="/assets/board.17ad90ee.jpg",T=(t,e)=>{const i=t.__vccOpts||t;for(const[d,a]of e)i[d]=a;return i};const He={methods:{goToBoard(t){this.$emit("closeCmp"),this.$router.push(`/board/${t}`)}},computed:{boards(){return this.$store.getters.boards}}},Xe={class:"board-recent"},ze={class:"cmp-header"},Qe=o("p",{class:"cmp-container-title"},"Recent",-1),Ke=o("span",null,null,-1),et=[Ke],tt=o("hr",{class:"thin-hr"},null,-1),st={class:"recent-boards-list"},ot=["onClick"],at=["src"],it={key:1,class:"recent-board-preview-img",src:be},rt={class:"recent-board-title"};function lt(t,e,i,d,a,s){return r(),l("section",Xe,[o("div",ze,[Qe,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=u=>t.$emit("closeCmp"))},et)]),tt,o("div",st,[(r(!0),l(f,null,C(s.boards,u=>(r(),l("div",{class:"recent-board-preview flex",key:u._id,onClick:n=>s.goToBoard(u._id)},[u.style.bgImg?(r(),l("img",{key:0,class:"recent-board-preview-img",src:u.style.bgImg},null,8,at)):(r(),l("img",it)),o("p",rt,_(u.title),1)],8,ot))),128))])])}var nt=T(He,[["render",lt]]);const dt={},ct={class:"list-slot-container"},ut={class:"list-title"},ht={class:"slot-options-list"};function gt(t,e){return r(),l("article",ct,[o("div",ut,[de(t.$slots,"title")]),o("div",ht,[de(t.$slots,"list")])])}var P=T(dt,[["render",gt]]),pt="/assets/groups.80c5d532.svg";const mt={data(){return{title:"",bgClr:"",bgImg:"",selectedBg:"",photos:["https://images.unsplash.com/photo-1648138754706-4fccd621a5f9?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDR8MzE3MDk5fHx8fHwyfHwxNjQ4NjUyNTQ3&ixlib=rb-1.2.1&q=80&w=400","https://images.unsplash.com/photo-1648537949908-25fc530b5f7d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDF8MzE3MDk5fHx8fHwyfHwxNjQ4NjUyNTQ3&ixlib=rb-1.2.1&q=80&w=400","https://images.unsplash.com/photo-1647960666864-01fdaed3431f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDE0fDMxNzA5OXx8fHx8Mnx8MTY0ODY1MjU0Nw&ixlib=rb-1.2.1&q=80&w=400"],isRequired:!1,bgColors:[{id:"l101",color:"#61bd4f",isSelected:!1},{id:"l102",color:"#f2d600",isSelected:!1},{id:"l103",color:"#ff9f1a",isSelected:!1},{id:"l104",color:"#eb5a46",isSelected:!1},{id:"l105",color:"#c377e0",isSelected:!1},{id:"l106",color:"#0079bf",isSelected:!1},{id:"l107",color:"#00c2e0",isSelected:!1},{id:"l108",color:"#51e898",isSelected:!1},{id:"l109",color:"#ff78cb",isSelected:!1},{id:"l110",color:"#344563",isSelected:!1}]}},methods:{goToBoard(t){this.$emit("closeCmp"),this.$router.push(`/board/${t}`)},requiredTitle(){this.title||(this.isRequired=!0)},async addBoard(){const t=await this.$store.dispatch({type:"addBoard",title:this.title,bgClr:this.bgClr,bgImg:this.bgImg});this.$router.push(`/board/${t}`),this.$emit("closeCmp")},selectBg(t,e){this[t]=e,this.selectedBg=e}},computed:{required(){return{required:this.isRequired}}},components:{listSlot:P}},bt={class:"create-board"},_t={class:"cmp-header"},ft=o("p",{class:"cmp-container-title"},"Create board",-1),kt=o("span",null,null,-1),vt=[kt],yt=o("hr",{class:"thin-hr"},null,-1),Ct={class:"choose-bg-container"},wt=o("p",{class:"choose-bg-title"},"Background",-1),Tt=o("img",{class:"bg-preview-img",src:pt},null,-1),It=[Tt],xt=["src","onClick"],At=["onClick"],St={class:"add-title-container"},Dt=o("p",{class:"add-title-title"},"Board title",-1),Bt={key:0,class:"add-title-required"},Ut=["disabled"];function $t(t,e,i,d,a,s){const u=m("list-slot"),n=j("focus");return r(),l("section",bt,[o("div",_t,[ft,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=h=>t.$emit("closeCmp"))},vt)]),yt,o("div",Ct,[wt,o("div",{class:"bg-preview",style:S({backgroundColor:a.selectedBg,backgroundImage:"url("+a.selectedBg+")"})},It,4),I(u,null,{list:w(()=>[(r(!0),l(f,null,C(a.photos,(h,c)=>(r(),l("img",{key:c,class:"unsplash-result-small",src:h,alt:"img",onClick:b=>s.selectBg("bgImg",h)},null,8,xt))),128))]),_:1}),I(u,null,{list:w(()=>[(r(!0),l(f,null,C(a.bgColors,h=>(r(),l("div",{key:h.id,class:"label-option flex pointer",style:S({backgroundColor:h.color}),onClick:c=>s.selectBg("bgClr",h.color)},null,12,At))),128))]),_:1})]),o("div",St,[Dt,A(o("input",{class:E(["add-title-input",s.required]),type:"text","onUpdate:modelValue":e[1]||(e[1]=h=>a.title=h),placeholder:"Enter title..",onBlur:e[2]||(e[2]=(...h)=>s.requiredTitle&&s.requiredTitle(...h)),onFocus:e[3]||(e[3]=h=>a.isRequired=!1)},null,34),[[D,a.title],[n]]),a.isRequired?(r(),l("p",Bt," \u{1F44B} Board title is required ")):g("",!0)]),o("button",{class:"create-board-btn",onClick:e[4]||(e[4]=(...h)=>s.addBoard&&s.addBoard(...h)),disabled:!a.title}," Create ",8,Ut)])}var _e=T(mt,[["render",$t]]);const Lt={props:{user:Object},methods:{},computed:{imgAvatar(){if(this.user.imgUrl)return this.user.imgUrl},nameAvatar(){if(!this.user.imgUrl){const e=this.user.fullname.split(" ");var t="";return e.forEach(i=>{t+=i.charAt(0)}),t.toUpperCase()}}}},Ot={class:"user-avatar"},Ft={key:0,class:"user-avatar-guest flex"},Mt=["src"],jt={key:2,class:"user-avatar-name flex"};function Et(t,e,i,d,a,s){return r(),l("div",Ot,[i.user.username==="Guest"?(r(),l("span",Ft)):i.user.imgUrl?(r(),l("img",{key:1,class:"user-avatar-img",src:s.imgAvatar},null,8,Mt)):(r(),l("span",jt,_(s.nameAvatar),1))])}var N=T(Lt,[["render",Et]]),Nt="/assets/trello.92b2080b.svg",Rt="/assets/bell.adefe4be.svg";const Gt={data(){return{handles:{isRecent:!1,isCreateBoard:!1},isBlue:!1,isLogin:!1}},created(){},methods:{openCmp(t){if(typeof t!="string"){for(let e in this.handles)this.handles[e]=!1;return}if(this.handles[t]===!0)this.handles[t]=!1;else{for(let e in this.handles)this.handles[e]=!1;this.handles[t]=!0}}},computed:{bgc(){return{blue:this.isBlue}},currLoggedInUser(){const t=this.$store.getters.loggedinUser;return t&&(this.userLoggedIn=!0),t||this.$store.getters.getGuestUser},userIsLoggedIn(){if(this.$store.getters.loggedinUser)return!0}},watch:{"$route.path":{immediate:!0,handler(){const t=this.$route.path;t==="/board"||t==="/login"?this.isBlue=!0:this.isBlue=!1}}},components:{boardRecent:nt,createBoard:_e,userAvatar:N}},qt={class:"app-header-inner flex"},Pt=o("img",{class:"logo-img",src:Nt,alt:""},null,-1),Jt=o("h3",{class:"logo"},"Mellow",-1),Wt={class:"app-header-nav flex"},Zt={class:"app-header-left-nav flex"},Yt=B(" Workspace "),Vt=o("span",{class:"header-arrow-icon"},null,-1),Ht=[Yt,Vt],Xt=B(" Recent "),zt=o("span",{class:"header-arrow-icon"},null,-1),Qt=[Xt,zt],Kt=B(" Create "),es={key:0,class:"header-arrow-icon"},ts={class:"app-header-right-nav flex"},ss=B("Log in"),os=B("Sign up"),as=o("div",{class:"header-bell pointer"},[o("img",{src:Rt})],-1);function is(t,e,i,d,a,s){const u=m("router-link"),n=m("board-recent"),h=m("create-board"),c=m("user-avatar");return r(),l("header",{class:E(["app-header-container",s.bgc])},[o("div",qt,[I(u,{class:"logo-link flex",to:"/"},{default:w(()=>[Pt,Jt]),_:1}),o("nav",Wt,[o("div",Zt,[o("button",{class:"btn-header flex",onClick:e[0]||(e[0]=b=>t.$router.push("/board"))},Ht),o("button",{class:"btn-header flex",onClick:e[1]||(e[1]=b=>s.openCmp("isRecent"))},Qt),a.handles.isRecent?(r(),y(n,{key:0,onCloseCmp:s.openCmp},null,8,["onCloseCmp"])):g("",!0),o("button",{class:"btn-header flex",onClick:e[2]||(e[2]=b=>s.openCmp("isCreateBoard"))},[Kt,a.handles.isCreateBoard?(r(),l("span",es)):g("",!0)]),a.handles.isCreateBoard?(r(),y(h,{key:1,onCloseCmp:s.openCmp},null,8,["onCloseCmp"])):g("",!0)]),o("div",ts,[s.userIsLoggedIn?g("",!0):(r(),y(u,{key:0,class:"login-btn",onClick:e[3]||(e[3]=b=>a.isLogin=!0),to:"/login"},{default:w(()=>[ss]),_:1})),s.userIsLoggedIn?g("",!0):(r(),y(u,{key:1,class:"signup-btn",onClick:e[4]||(e[4]=b=>a.isLogin=!0),to:"/login"},{default:w(()=>[os]),_:1})),as,s.currLoggedInUser?(r(),y(c,{key:2,class:"pointer",user:s.currLoggedInUser},null,8,["user"])):g("",!0)])])])],2)}var rs=T(Gt,[["render",is]]);const ls={components:{appHeader:rs},data(){return{}},created(){this.$store.dispatch({type:"loadBoards"}),this.$store.dispatch({type:"loadGuestUser"})},methods:{},computed:{},unmounted(){}};function ns(t,e,i,d,a,s){const u=m("app-header"),n=m("router-view");return r(),l(f,null,[I(u),I(n)],64)}var ds=T(ls,[["render",ns]]),cs="/assets/mellow-cover.354e12f4.png",us="/assets/example-board.a4540770.png";const hs={components:{},data(){return{}},created(){},methods:{},computed:{},unmounted(){}},gs={class:"home-page-container"},ps={class:"title-container"},ms=o("h1",{class:"home-logo"}," Mellow helps teams move work forward ",-1),bs=o("h3",{class:"title"},"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your your team works is unique - accomplish it all with Mellow",-1),_s=o("span",{class:"guest-login-button"},"Start as guest",-1),fs=o("div",{class:"homepage-img"},[o("img",{class:"home-page-img",src:cs})],-1),ks=o("div",{class:"secondary-text"},[o("h1",null," It's more than work. It's a way of working together."),o("h3",null,"Start with a Mellow board, lists, and cards. Customize and expand with more features as your teamwork grows. Manage projects, organize tasks, and build team spirit\u2014all in one place."),o("img",{src:us,alt:""})],-1);function vs(t,e,i,d,a,s){const u=m("router-link");return r(),l("section",gs,[o("div",ps,[ms,bs,I(u,{class:"home-link",to:"/board"},{default:w(()=>[_s]),_:1}),fs]),ks])}var ys=T(hs,[["render",vs]]);const Cs={},ws={class:"about"},Ts=o("h1",null,"This is an about page",-1),Is=[Ts];function xs(t,e){return r(),l("div",ws,Is)}var As=T(Cs,[["render",xs]]);const $={saveToStorage:Ss,loadFromStorage:Ds,makeId:Us,getRandomIntInclusive:$s,delay:Bs,isDarkColor:Ls};function Ss(t,e){localStorage.setItem(t,JSON.stringify(e)||null)}function Ds(t){let e=localStorage.getItem(t);return e?JSON.parse(e):void 0}function Bs(t=1500){return new Promise(e=>{setTimeout(e,t)})}function Us(t=8){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=0;d<t;d++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}function $s(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)}function Ls(t){if(!t)return;t=t.substring(1);const e=parseInt(t,16),i=e>>16&255,d=e>>8&255,a=e>>0&255;var s=.2126*i+.7152*d+.0722*a;return s<100}const ue="boards_db",G="board",O={query:Os,getById:Fs,remove:Ms,save:js,getEmptyBoard:Gs,getEmptyGroup:Ns,getEmptyTask:Rs,uploadImg:Es};qs();async function Os(t={}){return await M.get(G,t)}async function Fs(t){return await M.get(`${G}/${t}`)}async function Ms(t){return await M.delete(`${G}/${t}`)}async function js(t){return t._id?await M.put(`${G}/${t._id}`,t):await M.post(G,t)}async function Es(t){const e="cajan_22",d="https://api.cloudinary.com/v1_1/cajan22a/image/upload",a=new FormData;return a.append("file",t.target.files[0]),a.append("upload_preset",e),fetch(d,{method:"POST",body:a}).then(s=>s.json()).then(s=>s).catch(s=>console.error(s))}function Ns(){return{id:"g-"+$.makeId(),title:"Enter Group Name",tasks:[],style:{}}}function Rs(){return{id:"t-"+$.makeId(),title:"",createdAt:Date.now(),style:{},attachments:[]}}function Gs(){return{title:"",isFavorite:!1,createdAt:Date.now(),archivedAt:null,createdBy:L.getLoggedinUser()||L.getGuestUser(),style:{bgClr:"",bgImg:""},labels:[],members:[L.getGuestUser()],groups:[],activities:[]}}function qs(){let t=$.loadFromStorage(ue);return(!t||!t.length)&&(t=[{_id:"b101",title:"Frontend Build",isFavorite:!1,createdAt:1648368189547,createdBy:{_id:"u101",fullname:"Abi Abambi",imgUrl:""},style:{bgImg:"../assets/imgs/1.jpg"},labels:[{id:"l101",color:"#61bd4f",title:"Done"},{id:"l102",color:"#f2d600",title:"Urgent"},{id:"l103",color:"#ff9f1a",title:"Immediate"},{id:"l104",color:"#eb5a46",title:""},{id:"l105",color:"#c377e0",title:""},{id:"l106",color:"#0079bf",title:""}],members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u106",fullname:"Almog Ben-Binyamin",username:"Almog",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2021-12-10_at_16.38.26_sft38h.jpg",mentions:[]},{_id:"u107",fullname:"Zviki zaks",username:"Zviki",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.17.15_rq2ja9.jpg",mentions:[]}],groups:[{id:"g101",title:"Immediate Todos",tasks:[{id:"c101",title:"Replace logo",style:{bgClr:"",bgImg:"",isFullCover:!1}},{id:"t-nMLMX279",title:"Remove excess pixels between group-list and scroll bar",createdAt:1648369020184,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],labelIds:["l102","l103","l104"],dueDate:{dueDate:"2022-03-26T08:20:13.473Z",isCompleted:!1}},{id:"t-TI4ANfXQ",title:"Render the photos to task preview",createdAt:1648369100551,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:["http://res.cloudinary.com/cajan22a/image/upload/v1648373054/books-g629e7f9c8_640_ihanz0.jpg"],labelIds:["l101"]}],style:{}},{id:"g102",title:"Components to Build",tasks:[{id:"c103",title:"Archive instead of Delete",style:{bgClr:"",bgImg:"",isFullCover:!1}},{id:"c104",title:"Proper layout and full CRUD of images",checklists:[{id:"YEtgF",title:"Checklist",todos:[{id:"325jX",title:"To Do 1",isDone:!1}]}],style:{bgClr:"26de81",bgImg:"",isFullCover:!1},members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u107",fullname:"Zviki zaks",username:"Zviki",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.17.15_rq2ja9.jpg",mentions:[]}],labelIds:["l102","l103","l104"],description:"Toggle should change image on task preview"},{id:"t-PiYcSy3j",title:"Cover photo, make sure the first added is the default",createdAt:1648369148256,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],description:"...subsequent ones can be changed manually to be the cover photos. Trello has this as its default, looks really nice",dueDate:{dueDate:"2022-03-27T09:30:00.000Z",isCompleted:!1}},{id:"c105",title:"Render and add comments",status:"in-progress",description:"This will need a full update when the sockets are added but for now work on basic adding and rendering",comments:[{id:"ZdPnm",txt:"also @yaronb please CR this",createdAt:1590999817436,byMember:{_id:"u101",fullname:"Tal Tarablus",imgUrl:"http://res.cloudinary.com/shaishar9/image/upload/v1590850482/j1glw3c9jsoz2py0miol.jpg"}}],checklists:[{id:"YEhmFk111",title:"Checklist",todos:[{id:"212jX111",title:"To Do 1",isDone:!0}]},{id:"YEhmF222",title:"Checklist",todos:[{id:"212jX222",title:"To Do 2",isDone:!1},{id:"212jX333",title:"To Do 3 is done",isDone:!0}]}],members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u106",fullname:"Almog Ben-Binyamin",username:"Almog",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2021-12-10_at_16.38.26_sft38h.jpg",mentions:[]},{_id:"u107",fullname:"Zviki zaks",username:"Zviki",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.17.15_rq2ja9.jpg",mentions:[]}],labelIds:["l107","l108","l103"],createdAt:1590999730348,byMember:{_id:"u101",username:"Tal",fullname:"Tal Tarablus",imgUrl:"http://res.cloudinary.com/shaishar9/image/upload/v1590850482/j1glw3c9jsoz2py0miol.jpg"},style:{bgClr:"",bgImg:"",isFullCover:!1},dueDate:{dueDate:"2022-03-29T21:40:27.228Z",isCompleted:!1},attachments:["http://res.cloudinary.com/cajan22a/image/upload/v1648363384/Headshot_Yoni_2021_gkcpbo.jpg"]},{id:"t-KkqBkx4T",title:"Checklists, super important to be next on our list, it adds a lot of value",createdAt:1648369395722,members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u106",fullname:"Almog Ben-Binyamin",username:"Almog",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2021-12-10_at_16.38.26_sft38h.jpg",mentions:[]}],style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[]},{id:"t-QzjP3br7",title:"Full CRUD of name and cards, without exception",createdAt:1648371305685,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],labelIds:["l102"]},{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared",createdAt:1648369658477,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],labelIds:["l105"],dueDate:{dueDate:"2022-03-28T08:25:53.455Z",isCompleted:!1}}],style:{}},{id:"g-05mqUAOd",title:"Feedback from Avior",tasks:[{id:"t-J6zOG2sn",title:"Take a few pictures from the internet for demo data",createdAt:1648368936226,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],description:"",dueDate:{dueDate:"2022-03-30T15:25:00.000Z",isCompleted:!1}},{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job",createdAt:1648369464026,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:["http://res.cloudinary.com/cajan22a/image/upload/v1648373021/dog-gd9e48bc3a_640_xonhij.jpg"],members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u106",fullname:"Almog Ben-Binyamin",username:"Almog",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2021-12-10_at_16.38.26_sft38h.jpg",mentions:[]},{_id:"u107",fullname:"Zviki zaks",username:"Zviki",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.17.15_rq2ja9.jpg",mentions:[]}],labelIds:["l105","l106"],description:"The meeting will be short, give a quick run through of the flow, get good feedback",dueDate:{dueDate:"2022-03-27T09:30:00.000Z",isCompleted:!1}}],style:{}},{id:"g-Wen1SpyZ",title:"Done",tasks:[{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6",createdAt:1648369068557,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:["http://res.cloudinary.com/cajan22a/image/upload/v1648373005/code-g6edc9f26e_640_bznsbp.jpg"],labelIds:["l101"],dueDate:{dueDate:"2022-03-26T16:20:00.000Z",isCompleted:!0}},{id:"t-7JKrUUZr",title:"Clean up demo data",createdAt:1648369083537,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[]}],style:{}},{id:"g-va8kuIE2",title:"For later this week",tasks:[{id:"t-0HhNSPhU",title:"Look at Quello for extra add-on ideas",createdAt:1648369345282,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],labelIds:["l105"]},{id:"t-U5qT2Gud",title:"Full working filter",createdAt:1648373985129,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],dueDate:{dueDate:"2022-03-28T14:00:00.000Z",isCompleted:!1},labelIds:["l102"]}],style:{}},{id:"g-HIKOO3fg",title:"Plan for Backend",tasks:[{id:"t-UEohipxO",title:"Make list of all potential bugs",createdAt:1648373155582,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],dueDate:{dueDate:"2022-03-31T09:25:01.470Z",isCompleted:!1}}],style:{}}],activities:[{id:"a101",txt:"Changed Color",createdAt:154514,byMember:{_id:"u101",fullname:"Abi Abambi",imgUrl:""},task:{id:"c101",title:"Replace Logo"}},{id:"rgQTUE70",txt:"save group title",createdAt:1648368203097,group:{id:"g101",title:"Group 1"}},{id:"tl2mQu8G",txt:"save group title",createdAt:1648368204208,group:{id:"g101",title:"Group 1"}},{id:"NnJYheAO",txt:"save group title",createdAt:1648368238800,group:{id:"g101",title:"Immediate Todos"}},{id:"1eThwGFa",txt:"save group title",createdAt:1648368247802,group:{id:"g102",title:"Group 2"}},{id:"TwyX7WVn",txt:"save group title",createdAt:1648368257335,group:{id:"g102",title:"Group 2"}},{id:"P9N2ZAx5",txt:"save group title",createdAt:1648368266639,group:{id:"g102",title:"Components to Build"}},{id:"ZJfHOeCx",txt:"save group title",createdAt:1648368294433,group:{id:"g-05mqUAOd",title:"Backend"}},{id:"a5o3Iidt",txt:"save group title",createdAt:1648368301129,group:{id:"g-Wen1SpyZ",title:"Done"}},{id:"yTPbecRE",txt:"save group title",createdAt:1648368321763,group:{id:"g-05mqUAOd",title:"Backend"}},{id:"GZ8MoaPj",txt:"save group title",createdAt:1648368341989,group:{id:"g-05mqUAOd",title:""}},{id:"w4QDHcjt",txt:"save group title",createdAt:1648368362600,group:{id:"g-05mqUAOd",title:""}},{id:"uDaQqQy5",txt:"save group title",createdAt:1648368473189,group:{id:"g-05mqUAOd",title:""}},{id:"6YEYWYEX",txt:"save group title",createdAt:1648368484876,group:{id:"g-05mqUAOd",title:"Feedback from Avior"}},{id:"87inrkd0",txt:"save group title",createdAt:1648368866764,group:{id:"g101",title:"Immediate Todos"}},{id:"uEUUMiyC",txt:"add task",createdAt:1648368936226,group:{id:"g-05mqUAOd",title:"Feedback from Avior"}},{id:"5IHDG42X",txt:"save group title",createdAt:1648368936285,group:{id:"g-Wen1SpyZ",title:"Done"}},{id:"7vJxYdQt",txt:"add task",createdAt:1648369020184,group:{id:"g-05mqUAOd",title:"Feedback from Avior"}},{id:"3D5DAGK1",txt:"add task",createdAt:1648369068558,group:{id:"g-Wen1SpyZ",title:"Done"}},{id:"GdJKjLTI",txt:"add task",createdAt:1648369083538,group:{id:"g-Wen1SpyZ",title:"Done"}},{id:"AK6NkjMO",txt:"add task",createdAt:1648369100552,group:{id:"g101",title:"Immediate Todos"}},{id:"LvhBJbun",txt:"add task",createdAt:1648369148256,group:{id:"g102",title:"Components to Build"}},{id:"ApT83fwp",txt:"Updated Description",groupId:"g102",createdAt:1648369196991,task:{id:"t-PiYcSy3j",title:"Cover photo, make sure the first added is the default, subsequent ones can be changed manually to be the cover photos"}},{id:"8inzUrXY",txt:"Updated due date",groupId:"g102",createdAt:1648369215650,task:{id:"t-PiYcSy3j",title:"Cover photo, make sure the first added is the default, subsequent ones can be changed manually to be the cover photos"}},{id:"1j6i4sgw",txt:"Change Labels",groupId:"g-Wen1SpyZ",createdAt:1648369233890,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"XMAfpcgo",txt:"Updated due date",groupId:"g-Wen1SpyZ",createdAt:1648369247655,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"YoopJ1OF",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648369250689,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"UVjL7gYu",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369267807,task:{id:"t-nMLMX279",title:"Remove exess pixels between group-list and scroll bar"}},{id:"ezQ6TWn9",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369269161,task:{id:"t-nMLMX279",title:"Remove exess pixels between group-list and scroll bar"}},{id:"W0pkvrro",txt:"Updated due date",groupId:"g-05mqUAOd",createdAt:1648369278955,task:{id:"t-nMLMX279",title:"Remove exess pixels between group-list and scroll bar"}},{id:"b5U2QiON",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369290122,task:{id:"t-nMLMX279",title:"Remove exess pixels between group-list and scroll bar"}},{id:"7It3Jw4j",txt:"save group title",createdAt:1648369329171,group:{id:"g-va8kuIE2",title:"For later this week"}},{id:"3netnQsO",txt:"add task",createdAt:1648369345283,group:{id:"g-va8kuIE2",title:"For later this week"}},{id:"5ec3PT7P",txt:"Change Labels",groupId:"g-va8kuIE2",createdAt:1648369350698,task:{id:"t-0HhNSPhU",title:"Look at Quello for extra add-on ideas"}},{id:"Txn8Q0s6",txt:"add task",createdAt:1648369395723,group:{id:"g102",title:"Components to Build"}},{id:"jZj19qyo",txt:"add task",createdAt:1648369464026,group:{id:"g-05mqUAOd",title:"Feedback from Avior"}},{id:"CQttIpht",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369471149,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"wTFoRgEN",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369472114,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"YuMVHdES",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369474619,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"sCe6KWcd",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369477254,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"pa94Rc8n",txt:"Updated Description",groupId:"g-05mqUAOd",createdAt:1648369511025,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"fk7jMogv",txt:"Updated due date",groupId:"g-05mqUAOd",createdAt:1648369564076,task:{id:"t-J6zOG2sn",title:"Take a few pi"}},{id:"GkbtB5Wj",txt:"save group title",createdAt:1648369582777,group:{id:"g102",title:"Components to Build"}},{id:"mUJFLJqX",txt:"add task",createdAt:1648369658477,group:{id:"g102",title:"Components to Build"}},{id:"PcqvtoZs",txt:"Change Labels",groupId:"g102",createdAt:1648369663901,task:{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared"}},{id:"2jM4ahQR",txt:"Change Labels",groupId:"g102",createdAt:1648369665708,task:{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared"}},{id:"j6q98tUs",txt:"Change Labels",groupId:"g102",createdAt:1648369667429,task:{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared"}},{id:"ISNmFvAR",txt:"Updated due date",groupId:"g102",createdAt:1648369677032,task:{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared"}},{id:"a60GcWLC",txt:"save group title",createdAt:1648369801257,group:{id:"g102",title:"Components to Build"}},{id:"aeWY4nye",txt:"Change Labels",groupId:"g102",createdAt:1648369821021,task:{id:"c104",title:"Do that"}},{id:"pbYblrs5",txt:"Updated Description",groupId:"g102",createdAt:1648369839129,task:{id:"c104",title:"Do that"}},{id:"r5smZnq2",txt:"add task",createdAt:1648371305686,group:{id:"g102",title:"Components to Build"}},{id:"xbx7PIlZ",txt:"Change Labels",groupId:"g102",createdAt:1648371313288,task:{id:"t-QzjP3br7",title:"Full CRUD of name and cards, without exception"}},{id:"n2Hh1vdy",txt:"updated due date status",groupId:"g102",createdAt:1648372421123,task:{id:"c105",title:"Render and add comments"}},{id:"nZsE6loT",txt:"updated due date status",groupId:"g102",createdAt:1648372423456,task:{id:"c105",title:"Render and add comments"}},{id:"wdOYGCff",txt:"Updated due date",groupId:"g-05mqUAOd",createdAt:1648372610248,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"Hd2beyNT",txt:"added image",groupId:"g-Wen1SpyZ",createdAt:1648373006079,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"sFpDOclC",txt:"added image",groupId:"g-05mqUAOd",createdAt:1648373021964,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"dX3EetsR",txt:"added image",groupId:"g101",createdAt:1648373055028,task:{id:"t-TI4ANfXQ",title:"Render the photos to task preview"}},{id:"hM8PG5Pw",txt:"save group title",createdAt:1648373139535,group:{id:"g-HIKOO3fg",title:"Plan for Backend"}},{id:"t8LDFpAF",txt:"add task",createdAt:1648373155582,group:{id:"g-HIKOO3fg",title:"Plan for Backend"}},{id:"LUSVaFui",txt:"Updated due date",groupId:"g-HIKOO3fg",createdAt:1648373163955,task:{id:"t-UEohipxO",title:"Make list of all potential bugs"}},{id:"YB2j4QxX",txt:"Change Labels",groupId:"g102",createdAt:1648373182175,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"avUgqMSz",txt:"Change Labels",groupId:"g102",createdAt:1648373185066,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"1oxnrHrf",txt:"Change Labels",groupId:"g102",createdAt:1648373185950,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"I8AfnCeK",txt:"Change Labels",groupId:"g102",createdAt:1648373186906,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"ZTDq4Kag",txt:"Change Labels",groupId:"g-Wen1SpyZ",createdAt:1648373683999,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"5UCdn61P",txt:"Change Labels",groupId:"g-Wen1SpyZ",createdAt:1648373687858,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"DLtWg9TA",txt:"Change Labels",groupId:"g101",createdAt:1648373886086,task:{id:"t-TI4ANfXQ",title:"Render the photos to task preview"}},{id:"hgAfsbaq",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648373919422,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"Zgxes34w",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648373921247,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"cpklmrLH",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648373941156,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"2HzfmzeT",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648373950964,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"PFGtTe2z",txt:"add task",createdAt:1648373985130,group:{id:"g-va8kuIE2",title:"For later this week"}},{id:"GvqmcnAR",txt:"Updated due date",groupId:"g-va8kuIE2",createdAt:1648374000642,task:{id:"t-U5qT2Gud",title:"Full working filter"}},{id:"EEOxWqqY",txt:"Change Labels",groupId:"g-va8kuIE2",createdAt:1648374006294,task:{id:"t-U5qT2Gud",title:"Full working filter"}},{id:"hEqZEU2e",txt:"Change Labels",groupId:"g102",createdAt:1648375093084,task:{id:"c105",title:"Render and add comments"}},{id:"ptnvPaty",txt:"Change Labels",groupId:"g102",createdAt:1648375269313,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"pSWmQ9Gt",txt:"Change Labels",groupId:"g102",createdAt:1648375269877,task:{id:"c104",title:"Proper layout and full CRUD of images"}}]}],$.saveToStorage(ue,t)),t}function Ps(t,e){const i=({detail:d})=>{e(d)};return window.addEventListener(t,i),()=>{window.removeEventListener(t,i)}}function Js(t,e){window.dispatchEvent(new CustomEvent(t,{detail:e}))}const Ws={on:Ps,emit:Js},Zs={props:{imgUrls:Array},components:{},data(){return{isLoading:!1,input:null}},created(){},methods:{onAttachImg(t){this.isLoading=!0,this.$emit("attachImg",t),this.isLoading=!1},showLink(){console.log(this.input),console.log("not working till we fix img upload on second time")},closeCmp(){this.$emit("closeCmp")}},computed:{},unmounted(){}},Ys={class:"attachment-preview cmp-preview"},Vs={class:"cmp-header"},Hs=o("span",null,null,-1),Xs=[Hs],zs=o("p",{class:"attach-from"},"Attach from...",-1),Qs=o("hr",{class:"thin-hr"},null,-1),Ks=o("div",{class:"pointer"},"Computer",-1),eo=o("hr",{class:"thin-hr"},null,-1),to=o("div",{class:"attach-link-title"},"Attach a link",-1),so=o("div",{class:"attach-preview"},null,-1);function oo(t,e,i,d,a,s){const u=j("focus");return r(),l("section",Ys,[o("div",Vs,[o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=(...n)=>s.closeCmp&&s.closeCmp(...n))},Xs)]),o("label",null,[o("input",{type:"file",onChange:e[1]||(e[1]=(...n)=>s.onAttachImg&&s.onAttachImg(...n)),hidden:""},null,32),zs,Qs,Ks]),eo,to,A(o("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>a.input=n),class:"attach-input",type:"text",placeholder:"Paste any link here..."},null,512),[[u],[D,a.input]]),o("button",{class:"attach-link-btn",onClick:e[3]||(e[3]=(...n)=>s.showLink&&s.showLink(...n))},"Attach"),so])}var ao=T(Zs,[["render",oo]]);const io={name:"date-preview",props:{dueDate:Number},created(){this.date.dueDate=this.dueDate},data(){return{date:{dueDate:null,isCompleted:!1}}},methods:{saveDate(){console.log(this.date,"this is the date from the library"),this.$emit("saveDate",this.date)},closeCmp(){this.date.dueDate=this.dueDate,this.$emit("closeCmp")}}},ro={class:"date-preview pointer"},lo={class:"date-header"},no=o("h3",{class:"date-title"},"Dates",-1),co=o("hr",{class:"thin-hr"},null,-1);function uo(t,e,i,d,a,s){const u=m("v-date-picker");return r(),l("section",ro,[o("div",lo,[no,o("button",{class:"add-task-close-cmp-btn",onClick:e[0]||(e[0]=(...n)=>s.closeCmp&&s.closeCmp(...n))})]),co,I(u,{modelValue:a.date.dueDate,"onUpdate:modelValue":e[1]||(e[1]=n=>a.date.dueDate=n),mode:"dateTime","minute-increment":5},null,8,["modelValue"]),o("button",{class:"save-btn date-btn",onClick:e[2]||(e[2]=(...n)=>s.saveDate&&s.saveDate(...n))},"Save"),o("button",{class:"remove-date-btn date-btn",onClick:e[3]||(e[3]=(...n)=>s.closeCmp&&s.closeCmp(...n))},"Remove")])}var ho=T(io,[["render",uo]]);const go={props:{type:String},components:{},data(){return{}},created(){},methods:{closeCmp(){this.$emit("closeCmp")},remove(){this.$emit("remove")}},computed:{},unmounted(){}},po={class:"delete-preview"},mo={class:"delete-header flex"},bo={class:"cmp-header-title"},_o=o("hr",{class:"thin-hr"},null,-1),fo={class:"delete-content-container"},ko={key:0},vo={key:1},yo={key:2};function Co(t,e,i,d,a,s){return r(),l("section",po,[o("div",mo,[o("span",bo,"Delete "+_(i.type)+"?",1),o("a",{onClick:e[0]||(e[0]=(...u)=>s.closeCmp&&s.closeCmp(...u)),class:"close-delete pointer"})]),_o,o("div",fo,[i.type==="task"||i.type==="list"?(r(),l("p",ko," All actions will be removed from the activity feed and you won\u2019t be able to re-open the card. There is no undo. ")):i.type==="label"?(r(),l("p",vo," There is no undo. This will remove this label from all cards and destroy its history. ")):i.type==="checklist"?(r(),l("p",yo,"Deleting a checklist is permanent and there is no way to get it back.")):g("",!0),o("a",{onClick:e[1]||(e[1]=(...u)=>s.remove&&s.remove(...u)),class:"confirm-delete"},"Delete")])])}var Y=T(go,[["render",Co]]);const wo={props:{boardLabels:Array,taskLabelIds:Array},emits:["addLabelToTask","addLabelToBoard","updateBoardLabels"],components:{listSlot:P,deleteCmp:Y},data(){return{labels:[],filterTxt:"",defaultLabels:[{id:"l101",color:"#61bd4f",title:"",isSelected:!1},{id:"l102",color:"#f2d600",title:"",isSelected:!1},{id:"l103",color:"#ff9f1a",title:"",isSelected:!1},{id:"l104",color:"#eb5a46",title:"",isSelected:!1},{id:"l105",color:"#c377e0",title:"",isSelected:!1},{id:"l106",color:"#0079bf",title:"",isSelected:!1},{id:"l107",color:"#00c2e0",title:"",isSelected:!1},{id:"l108",color:"#51e898",title:"",isSelected:!1},{id:"l109",color:"#ff78cb",title:"",isSelected:!1},{id:"l110",color:"#344563",title:"",isSelected:!1}],isCreate:!1,isChange:!1,isRemove:!1,selectedLabel:null,labelToChange:{color:null,title:""}}},created(){this.aggregateLabels()},methods:{toggleLabel(t){this.$emit("addLabelToTask",t)},closeCmp(){this.$emit("closeCmp")},aggregateLabels(){this.labels=[],this.labels=this.boardLabels.map(t=>{var e;return t=JSON.parse(JSON.stringify(t)),(e=this.taskLabelIds)!=null&&e.includes(t.id)&&(t.inTask=!0),t})},openCreate(t){if(typeof t=="string"){this.labelToChange=JSON.parse(JSON.stringify(this.boardLabels.find(i=>i.id===t)));const e=this.defaultLabels.find(i=>i.color===this.labelToChange.color);this.selectLabel(e.id),this.isChange=!0;return}this.isCreate=!0},selectLabel(t){this.defaultLabels.forEach(i=>{i.isSelected=i.id===t});const e=this.defaultLabels.find(i=>i.id===t);this.labelToChange.color=e.color},async changeBoardLabels(){const t=JSON.parse(JSON.stringify(this.labelToChange));this.isCreate&&(t.id="l"+$.makeId(),console.log(t)),await this.$emit("updateBoardLabels",t),this.aggregateLabels(),this.isCreate=!1,this.isChange=!1},async removeLabelFromBoard(){const t=this.labelToChange.id;await this.$emit("updateBoardLabels",t),this.aggregateLabels(),this.isCreate=!1,this.isChange=!1,this.isRemove=!1}},computed:{getLabels(){const t=new RegExp(this.filterTxt,"i");return this.labels.filter(e=>t.test(e.title))},cmpTitle(){return this.isChange?"Change label":this.isCreate?"Create label":"Labels"},createBtn(){if(this.isCreate)return"Create";if(this.isChange)return"Save"}},watch:{taskLabelIds(){this.aggregateLabels()}},unmounted(){}},To={key:0,class:"cmp-preview"},Io={class:"cmp-header"},xo=o("span",null,null,-1),Ao=[xo],So={class:"cmp-container-title"},Do=o("span",null,null,-1),Bo=[Do],Uo=o("hr",{class:"thin-hr"},null,-1),$o={key:0,class:"select-label-container"},Lo={class:"choose-labels-container"},Oo=o("p",{class:"labels-title"},"Labels",-1),Fo={class:"labels-list flex clean-list"},Mo=["onClick"],jo={class:"label-title"},Eo={key:0,class:"v-icon"},No=["onClick"],Ro=o("a",null,null,-1),Go=[Ro],qo={key:1,class:"create-label-container"},Po=o("p",{class:"labels-title"},"Name",-1),Jo=B("Select a color"),Wo=["onClick"],Zo={key:0,class:"v-icon"},Yo={class:"create-label-buttons-container flex"};function Vo(t,e,i,d,a,s){const u=m("list-slot"),n=m("delete-cmp"),h=j("focus");return r(),l(f,null,[a.isRemove?g("",!0):(r(),l("section",To,[o("div",Io,[a.isCreate||a.isChange||a.isRemove?(r(),l("a",{key:0,class:"back-to-cmp-btn",onClick:e[0]||(e[0]=c=>(a.isCreate=!1,a.isChange=!1))},Ao)):g("",!0),o("p",So,_(s.cmpTitle),1),o("a",{class:"close-cmp-btn",onClick:e[1]||(e[1]=(...c)=>s.closeCmp&&s.closeCmp(...c))},Bo)]),Uo,!a.isCreate&&!a.isChange&&!a.isRemove?(r(),l("section",$o,[A(o("input",{class:"label-input",type:"text","onUpdate:modelValue":e[2]||(e[2]=c=>a.filterTxt=c),placeholder:"Search labels.."},null,512),[[D,a.filterTxt],[h]]),o("div",Lo,[Oo,o("ul",Fo,[(r(!0),l(f,null,C(s.getLabels,c=>(r(),l("li",{class:"label-option-container flex",key:c.id},[o("div",{class:"label-option flex pointer",style:S({backgroundColor:c.color}),onClick:b=>s.toggleLabel(c.id)},[o("span",jo,_(c.title),1),c.inTask?(r(),l("span",Eo)):g("",!0)],12,Mo),o("span",{class:"change-label-btn",onClick:b=>s.openCreate(c.id)},Go,8,No)]))),128))])]),o("button",{class:"open-create-label-btn",onClick:e[3]||(e[3]=(...c)=>s.openCreate&&s.openCreate(...c))}," Create a new label ")])):(r(),l("section",qo,[o("label",null,[Po,A(o("input",{type:"text",class:"label-input","onUpdate:modelValue":e[4]||(e[4]=c=>a.labelToChange.title=c)},null,512),[[D,a.labelToChange.title],[h]])]),I(u,null,{title:w(()=>[Jo]),list:w(()=>[(r(!0),l(f,null,C(a.defaultLabels,c=>(r(),l("div",{key:c.id,class:"label-option flex pointer",style:S({backgroundColor:c.color}),onClick:b=>s.selectLabel(c.id)},[c.isSelected?(r(),l("span",Zo)):g("",!0)],12,Wo))),128))]),_:1}),o("div",Yo,[o("button",{class:"create-label-btn",onClick:e[5]||(e[5]=v((...c)=>s.changeBoardLabels&&s.changeBoardLabels(...c),["stop"]))},_(s.createBtn),1),a.isChange?(r(),l("button",{key:0,class:"delete-label-btn",onClick:e[6]||(e[6]=v(c=>a.isRemove=!0,["stop"]))}," Delete ")):g("",!0)])]))])),a.isRemove?(r(),y(n,{key:1,type:"label",onRemove:s.removeLabelFromBoard,onCloseCmp:s.closeCmp},null,8,["onRemove","onCloseCmp"])):g("",!0)],64)}var Ho=T(wo,[["render",Vo]]);const Xo={props:{boardMembers:Object,task:Object},components:{userAvatar:N},data(){return{members:[],filterTxt:""}},created(){this.aggregateMembers()},methods:{closeCmp(){this.$emit("closeCmp"),console.log("closing cmp")},toggleMemberInTask(t){console.log(),this.$emit("toggleMemberInTask",t)},aggregateMembers(){var e;this.members=[];let t=(e=this.task.members)==null?void 0:e.map(i=>i._id);this.boardMembers.forEach(i=>{t!=null&&t.includes(i._id)&&(i.isCheck=!0),this.members.push(JSON.parse(JSON.stringify(i)))})}},computed:{getMembers(){const t=new RegExp(this.filterTxt,"i");return this.members.filter(e=>t.test(e.fullname))}},watch:{task:{handler(){this.aggregateMembers()},deep:!0}},unmounted(){}},zo={class:"members-preview cmp-preview"},Qo={class:"cmp-header"},Ko=o("p",{class:"cmp-container-title"},"Members",-1),ea=o("span",null,null,-1),ta=[ea],sa=o("hr",{class:"thin-hr"},null,-1),oa={class:"members-container"},aa={class:"input-container"},ia=o("h4",{class:"members-preview-title"},"Board members",-1),ra={class:"board-members-container"},la=["onClick"],na={class:"member-fullname"},da={key:0,class:"member-check"},ca=o("div",null,null,-1);function ua(t,e,i,d,a,s){const u=m("user-avatar"),n=j("focus");return r(),l("section",zo,[o("div",Qo,[Ko,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=(...h)=>s.closeCmp&&s.closeCmp(...h))},ta)]),sa,o("div",oa,[o("div",aa,[A(o("input",{"onUpdate:modelValue":e[1]||(e[1]=h=>a.filterTxt=h),class:"members-filter",type:"text",placeholder:"Search Members"},null,512),[[n],[D,a.filterTxt]])]),ia,o("ul",ra,[(r(!0),l(f,null,C(s.getMembers,(h,c)=>(r(),l("li",{class:"board-member pointer",key:c,onClick:b=>s.toggleMemberInTask(h)},[I(u,{user:h},null,8,["user"]),o("div",na,_(h.fullname)+_(`(${h.username})`),1),h.isCheck?(r(),l("div",da)):g("",!0)],8,la))),128)),ca])])])}var ha=T(Xo,[["render",ua]]);const ga={name:"cover-unsplash",components:{listSlot:P},props:{style:Object,title:String,attachments:Array},data(){return{currStyle:{bgClr:"",bgImg:"",isFullCover:!1,uploadedImg:""},photos:[],currTitle:"",searchingUnsplash:!1,searchResults:!1,search:"",photo_url:null,download_url:null,searchTerms:["Productivity","Perspective","Organization","Colorful","Nature","Business","Minimal","Space","Animals"],bgColors:[{id:"l101",color:"#61bd4f",isSelected:!1},{id:"l102",color:"#f2d600",isSelected:!1},{id:"l103",color:"#ff9f1a",isSelected:!1},{id:"l104",color:"#eb5a46",isSelected:!1},{id:"l105",color:"#c377e0",isSelected:!1},{id:"l106",color:"#0079bf",isSelected:!1},{id:"l107",color:"#00c2e0",isSelected:!1},{id:"l108",color:"#51e898",isSelected:!1},{id:"l109",color:"#ff78cb",isSelected:!1},{id:"l110",color:"#344563",isSelected:!1}]}},created(){this.currStyle=JSON.parse(JSON.stringify(this.style)),this.currTitle=this.title,this.searchPhoto(this.title)},methods:{searchPhoto(t){const e="Y2X6Y_wdMpqvaYX_4jgO-dOBqVAsQMQpihsIFNOAX5E";let i=20,d=t;d||(d=(this==null?void 0:this.search)||"business"),J.get(`https://api.unsplash.com/search/photos?page=1&per_page=${i}&query=${d}&client_id=${e}`).then(a=>{this.photos=a.data.results}).catch(a=>{console.log(a)})},searchPhotoWithButton(t){this.searchResults=!0,this.searchPhoto(t)},applyPhoto(t){var e;this.currStyle.uploadedImg=((e=t==null?void 0:t.urls)==null?void 0:e.regular)||t,this.currStyle.bgClr="",this.currStyle.bgImg="",this.searchResults=!1,this.searchingUnsplash=!1,this.search="",this.$emit("addStyle",this.currStyle)},waitSearch:he.debounce(function(){this.searchPhoto(),this.searchResults=!0,this.search=""},1e3),selectBgClr(t){this.currStyle.bgClr=t,this.currStyle.bgImg="",this.currStyle.uploadedImg="",this.$emit("addStyle",this.currStyle)},removeCover(){this.currStyle.bgClr="",this.currStyle.bgImg="",this.currStyle.uploadedImg="",this.$emit("addStyle",this.currStyle)},closeCmp(){this.$emit("closeCmp")},setFullCover(t){this.currStyle.isFullCover=t,this.$emit("addStyle",this.currStyle)},async onAttachImg(t){const e=await this.$store.dispatch({type:"attachImg",ev:t});this.currStyle.uploadedImg=e.url,this.currStyle.bgClr="",this.currStyle.bgImg="",this.$emit("addStyle",this.currStyle)}},computed:{pageTitle(){return this.searchingUnsplash?"Photo search":"Cover"},currCoverImg(){var t,e;return((t=this.style)==null?void 0:t.bgImg)||((e=this.style)==null?void 0:e.uploadedImg)||""},currCoverBg(){var e;return{"background-color":((e=this.style)==null?void 0:e.bgClr)||"#5E6C84"}},deletable(){if(this.style.bgImg||this.style.uploadedImg||this.style.bgClr)return!0}}},pa={class:"cmp-preview cover-unsplash-preview"},ma={class:"cmp-header"},ba=o("span",null,null,-1),_a=[ba],fa={class:"cmp-container-title"},ka=o("span",null,null,-1),va=[ka],ya=o("hr",{class:"thin-hr"},null,-1),Ca={key:0,class:"main-cover-screen"},wa=o("p",{class:"labels-title"},"Size",-1),Ta={class:"cover-size-select"},Ia=["src"],xa=o("div",{class:"over-full-cover-select"},null,-1),Aa=o("div",{class:"dummy title"},null,-1),Sa=o("div",{class:"dummy text"},null,-1),Da=["src"],Ba=o("div",{class:"over-full-cover-select"},null,-1),Ua=o("div",{class:"dummy title"},null,-1),$a=o("div",{class:"dummy text"},null,-1),La=B("Color"),Oa=["onClick"],Fa=B("Attachments"),Ma=["src","onClick"],ja=o("div",{class:"unsplash-btn full-width-btn pointer"},"Upload a cover image",-1),Ea=B("Photos from Unsplash"),Na=["src","onClick"],Ra={key:1,class:"search-unsplash-screen"},Ga=B("Suggested searches"),qa=["onClick"],Pa=B("Top photos"),Ja=["src","onClick"],Wa={key:2,class:"unsplash-results-screen"},Za=["src","onClick"];function Ya(t,e,i,d,a,s){const u=m("list-slot");return r(),l("section",pa,[o("div",ma,[a.searchingUnsplash?(r(),l("a",{key:0,class:"back-to-cmp-btn",onClick:e[0]||(e[0]=n=>(a.searchingUnsplash=!1,a.searchResults=!1))},_a)):g("",!0),o("p",fa,_(s.pageTitle),1),o("a",{class:"close-cmp-btn",onClick:e[1]||(e[1]=(...n)=>s.closeCmp&&s.closeCmp(...n))},va)]),ya,a.searchingUnsplash?g("",!0):(r(),l("section",Ca,[wa,o("div",Ta,[o("button",{class:"coverSelect pointer",onClick:e[2]||(e[2]=n=>s.setFullCover(!1))},[s.currCoverImg?(r(),l("img",{key:0,class:"coverSelectImg top",src:s.currCoverImg,alt:""},null,8,Ia)):g("",!0),s.currCoverBg?(r(),l("div",{key:1,class:"coverSelectImg top",style:S(s.currCoverBg)},null,4)):g("",!0),xa,Aa,Sa]),o("button",{class:"coverSelect pointer",onClick:e[3]||(e[3]=n=>s.setFullCover(!0))},[s.currCoverImg?(r(),l("img",{key:0,class:"coverSelectImg",src:s.currCoverImg,alt:""},null,8,Da)):g("",!0),s.currCoverBg?(r(),l("div",{key:1,class:"coverSelectImg",style:S(s.currCoverBg)},null,4)):g("",!0),Ba,Ua,$a])]),s.deletable?(r(),l("div",{key:0,onClick:e[4]||(e[4]=(...n)=>s.removeCover&&s.removeCover(...n)),class:"unsplash-btn full-width-btn remove-cover pointer"},"Remove cover")):g("",!0),I(u,null,{title:w(()=>[La]),list:w(()=>[(r(!0),l(f,null,C(a.bgColors,n=>(r(),l("div",{key:n.id,class:"label-option flex pointer",style:S({backgroundColor:n.color}),onClick:h=>s.selectBgClr(n.color)},null,12,Oa))),128))]),_:1}),o("section",null,[I(u,null,{title:w(()=>[Fa]),list:w(()=>{var n;return[(r(!0),l(f,null,C((n=i.attachments)==null?void 0:n.slice(0,6),(h,c)=>(r(),l("img",{key:c,class:"unsplash-result-small pointer",src:h,alt:"img",onClick:b=>s.applyPhoto(h)},null,8,Ma))),128))]}),_:1}),o("label",null,[o("input",{type:"file",onChange:e[5]||(e[5]=(...n)=>s.onAttachImg&&s.onAttachImg(...n)),hidden:""},null,32),ja])]),I(u,null,{title:w(()=>[Ea]),list:w(()=>[(r(!0),l(f,null,C(a.photos.slice(0,6),n=>(r(),l("img",{key:n.id,class:"unsplash-result-small pointer",src:n.urls.thumb,alt:"img",onClick:h=>s.applyPhoto(n)},null,8,Na))),128))]),_:1}),o("button",{class:"unsplash-btn full-width-btn pointer",onClick:e[6]||(e[6]=n=>a.searchingUnsplash=!0)}," Search for photos ")])),a.searchingUnsplash&&!a.searchResults?(r(),l("section",Ra,[A(o("input",{type:"text",placeholder:"Search Unsplash for photos",class:"unsplash-search","onUpdate:modelValue":e[7]||(e[7]=n=>a.search=n),onInput:e[8]||(e[8]=(...n)=>s.waitSearch&&s.waitSearch(...n))},null,544),[[D,a.search]]),I(u,null,{title:w(()=>[Ga]),list:w(()=>[(r(!0),l(f,null,C(a.searchTerms,(n,h)=>(r(),l("button",{class:"unsplash-btn pointer",key:h,onClick:c=>s.searchPhotoWithButton(n)},_(n),9,qa))),128))]),_:1}),I(u,null,{title:w(()=>[Pa]),list:w(()=>[(r(!0),l(f,null,C(a.photos.slice(0,12),n=>(r(),l("img",{key:n.id,class:"unsplash-result-small pointer",src:n.urls.thumb,alt:"img",onClick:h=>s.applyPhoto(n)},null,8,Ja))),128))]),_:1})])):g("",!0),a.searchResults?(r(),l("section",Wa,[I(u,null,{list:w(()=>[(r(!0),l(f,null,C(a.photos,n=>(r(),l("img",{key:n.id,class:"unsplash-result-large pointer",src:n.urls.thumb,alt:"img",onClick:h=>s.applyPhoto(n)},null,8,Za))),128))]),_:1})])):g("",!0)])}var Va=T(ga,[["render",Ya]]);const Ha={components:{},data(){return{title:"Checklist"}},created(){},methods:{closeCmp(){this.$emit("closeCmp")},addChecklist(){this.$emit("createChecklist",this.title)}},computed:{},unmounted(){}},Xa={class:"create-checklist-container"},za={class:"checklist-header flex"},Qa=o("span",{class:"cmp-header-title"},"Add checklist",-1),Ka=o("hr",{class:"thin-hr"},null,-1),ei={class:"create-checklist-form"},ti=o("label",{class:"form-title",for:"txt"},"Title",-1),si=o("button",{class:"create-form-done pointer"},"Add",-1);function oi(t,e,i,d,a,s){const u=j("focus");return r(),l("section",Xa,[o("div",za,[Qa,o("a",{onClick:e[0]||(e[0]=(...n)=>s.closeCmp&&s.closeCmp(...n)),class:"close-checklist pointer"})]),Ka,o("div",ei,[o("div",null,[ti,o("form",{onSubmit:e[2]||(e[2]=v(n=>s.addChecklist(a.title),["prevent"]))},[A(o("input",{class:"checklist-form","onUpdate:modelValue":e[1]||(e[1]=n=>a.title=n),type:"text",name:"txt",id:"txt"},null,512),[[D,a.title],[u]]),si],32)])])])}var ai=T(Ha,[["render",oi]]);const ii={props:{task:Object},components:{},data(){return{isCreateTodo:!1,newTodo:[],isCheckbox:[],isUpdateTodo:!1,editingTodoId:"",addNewTodo:"",isDonePercentages:[],todoCount:[],isRemove:!1,checklistId:""}},created(){},mounted(){},methods:{createTodo(t){this.addNewTodo=t,console.log("checkListId",t),console.log("this.addNewTodo",this.addNewTodo)},addTodo(t){console.log(this.newTodo),!(!this.newTodo||!this.newTodo.length)&&(this.$emit("addTodo",this.newTodo,t),this.newTodo="")},removeChecklist(t){console.log(t,t),this.$emit("removeChecklist",t)},updateTodo(t,e,i){i.stopPropagation(),console.log("updating!!!!"),console.log(e);const d=i.currentTarget.textContent;if(!d||!d.length){this.editingTodoId="",this.addNewTodo="";return}console.log("updating with good value !!!!"),this.$emit("updateTodo",t,e,d),this.editingTodoId="",this.addNewTodo=""},removeTodo(t,e){this.$emit("removeTodo",t,e)},openUpdateBar(t){console.log("open"),this.editingTodoId=t,this.addNewTodo=""},closeCreateTodo(){console.log("closing"),this.editingTodoId="",this.addNewTodo=""},checkboxValue(t,e,i){const d=e.id,a=i.target.checked;console.log(i.target.checked),this.$emit("updateTodoDone",t,d,a)}},computed:{progressBar(){let t=[];return this.task.checklists.forEach(e=>{let i=0,d=e.todos.length;if(d===0){t.push(0);return}e.todos.forEach(s=>{s.isDone&&i++});const a=i/d*100;t.push(a.toFixed(0))}),this.isDonePercentages=t,t},todoDone(){return this.task.checklists.forEach(t=>{t.todos.filter(e=>{if(e.isDone)return"task-done"})})}},unmounted(){}},ri={key:0,class:"td-checklist-preview"},li={class:"checklist-title-container"},ni={class:"checklist-title"},di=["onClick"],ci={class:"progress-bar-percentage"},ui={class:"progress-bar-container flex"},hi={class:"checklist-pb-full"},gi={class:"checklist-todo-title"},pi=o("label",{class:"todo-content-edit pointer",for:"todo.id"},null,-1),mi=["onClick","checked"],bi=["onClick","onBlur","onUpdate:modelValue"],_i={key:0,class:"update-todo-btn-container"},fi={class:"update-todo-btn flex"},ki=o("a",{class:"update-todo-text btn"},"Save",-1),vi={class:"remove-todo-btn-wrapper"},yi=["onMousedown"],Ci={key:0,class:"add-todo-container"},wi=["onClick"],Ti={class:"todo-btn-container"},Ii=["onClick"],xi={class:"close-btn-wrapper"};function Ai(t,e,i,d,a,s){const u=j("focus");return i.task?(r(),l("section",ri,[(r(!0),l(f,null,C(i.task.checklists,(n,h)=>(r(),l("div",{key:h},[o("div",li,[o("h3",ni,_(n.title),1),o("a",{class:"delete-checklist btn",onClick:v(c=>s.removeChecklist(n.id),["stop"])},"Delete",8,di)]),o("span",ci,_(s.progressBar[h])+"%",1),o("div",ui,[o("div",hi,[o("div",{class:E(["checklist-progress-bar",{green:s.progressBar[h]==="100"}]),style:S({width:s.progressBar[h]+"%",opacity:s.progressBar[h]})},null,6)])]),(r(!0),l(f,null,C(n.todos,c=>(r(),l("div",{key:c.id},[o("div",gi,[pi,o("input",{onClick:v(b=>s.checkboxValue(n.id,c,b),["stop"]),class:"checkbox-input pointer",type:"checkbox",name:"todo.isDone",id:"todo.id",value:"todo.isDone",checked:c.isDone},null,8,mi),A(o("textarea",{onClick:v(b=>s.openUpdateBar(c.id),["stop"]),class:"todo-clickable-area",onBlur:b=>s.updateTodo(n.id,c.id,b),spellcheck:"false",cols:"100",rows:"20","onUpdate:modelValue":b=>c.title=b,ref_for:!0,ref:"textarea"},_(c.title),41,bi),[[D,c.title]]),a.editingTodoId===c.id?(r(),l("div",_i,[o("div",fi,[ki,o("span",{onClick:e[0]||(e[0]=(...b)=>s.closeCreateTodo&&s.closeCreateTodo(...b)),class:"close-update pointer"})]),o("div",vi,[o("span",{onMousedown:b=>s.removeTodo(n.id,c.id),class:"remove-todo-btn pointer"},null,40,yi)])])):g("",!0)])]))),128)),a.addNewTodo?g("",!0):(r(),l("div",Ci,[o("button",{class:"add-an-item btn",onClick:v(c=>s.createTodo(n.id),["stop"])},"Add an item",8,wi)])),a.addNewTodo===n.id?(r(),l("div",{key:1,class:"add-item-container",onBlur:e[3]||(e[3]=(...c)=>s.createTodo&&s.createTodo(...c))},[o("div",null,[A(o("textarea",{class:"add-item-input",placeholder:"Add an item",type:"text","onUpdate:modelValue":e[1]||(e[1]=c=>a.newTodo=c),cols:"30",rows:"10"},null,512),[[u],[D,a.newTodo]]),o("div",Ti,[o("button",{class:"add-todo btn",onClick:v(c=>s.addTodo(n.id),["stop"])},"Add",8,Ii),o("div",xi,[o("a",{onClick:e[2]||(e[2]=v((...c)=>s.closeCreateTodo&&s.closeCreateTodo(...c),["stop"])),class:"close-add-todo-btn pointer"})])])])],32)):g("",!0)]))),128))])):g("",!0)}var Si=T(ii,[["render",Ai]]);const Di={props:{activity:Object},data(){return{guestUser:L.getGuestUser()}},created(){},computed:{activityTime(){return Se(new Date(this.activity.createdAt),new Date(Date.now()),{includeSeconds:!0,addSuffix:!0})}},components:{userAvatar:N}},Bi={class:"activity-preview flex"},Ui={class:"activity-details flex"},$i={class:"activity-username-txt-container flex"},Li={class:"activity-username"},Oi={class:"activity-txt"},Fi={class:"activity-time"};function Mi(t,e,i,d,a,s){var n;const u=m("user-avatar");return r(),l("section",Bi,[I(u,{user:i.activity.byMember||a.guestUser},null,8,["user"]),o("div",Ui,[o("div",$i,[o("h3",Li,_(((n=i.activity.byMember)==null?void 0:n.fullname)||a.guestUser.fullname),1),o("p",Oi,_(i.activity.txt),1)]),o("p",Fi,_(s.activityTime),1)])])}var fe=T(Di,[["render",Mi]]);const ji={name:"attached-img-preview",props:{attachment:String,idx:Number},methods:{deleteAttachment(){this.$emit("deleteAttachment",this.idx)},makeCover(){this.$emit("makeCover",this.attachment)}}},Ei={class:"attached-img-preview"},Ni=["src"],Ri={class:"attachment-options-container flex"},Gi=o("div",{class:"make-cover-icon"},null,-1);function qi(t,e,i,d,a,s){return r(),l("section",Ei,[o("img",{src:i.attachment,alt:""},null,8,Ni),o("div",Ri,[Gi,o("p",{class:"make-cover pointer",onClick:e[0]||(e[0]=(...u)=>s.makeCover&&s.makeCover(...u))},"Make Cover"),o("p",{class:"pointer",onClick:e[1]||(e[1]=(...u)=>s.deleteAttachment&&s.deleteAttachment(...u))},"Delete")])])}var Pi=T(ji,[["render",qi]]),Ji="/assets/arrow-down.9f6ee7c2.svg",Wi="/assets/loading-task.05eb7451.gif";const Zi={name:"task-details",emits:["updateBoard","addLabelToBoard","updateBoardLabels"],data(){return{task:null,imgUrls:[],currBoard:null,currGroup:null,addingDescription:!1,newDescription:"",detailsShown:!1,checklistTitle:"",handles:{isLabel:!1,isAttachOn:!1,isDatesOn:!1,isMembers:!1,isCover:!1,isDelete:!1,isChecklist:!1}}},async created(){await this.loadTask(),F.on("someone updated",this.boardUpdated)},unmounted(){F.off("someone updated",this.boardUpdated)},methods:{async loadTask(){var a;const{boardId:t,groupId:e,taskId:i}=this.$route.params;this.currBoard=await this.$store.dispatch({type:"loadBoard",boardId:t}),this.currGroup=this.currBoard.groups.find(s=>s.id===e);const d=(a=this.currGroup.tasks)==null?void 0:a.find(s=>s.id===i);this.task=JSON.parse(JSON.stringify(d)),this.newDescription=this.task.description,this.imgUrls=this.task.attachments},boardUpdated(){this.loadTask()},moveToBoard(){const t=this.$store.getters.getCurrBoard;this.$router.push(`/board/${t._id}`)},async addStyle(t){this.task.style=t,await this.saveTask("Updated style"),this.loadTask()},openCmp(t){for(let e in this.handles)this.handles[e]=!1;this.handles[t]=!0},closeCmp(){for(let t in this.handles)this.handles[t]=!1},async saveTaskTitle(t){const e=t.currentTarget.textContent;this.task.title=e,await this.saveTask("Updated task title"),this.loadTask()},async saveDate(t){this.task.dueDate=t,await this.saveTask("Updated due date"),this.closeCmp(),this.loadTask()},async saveTask(t){const e={id:$.makeId(),txt:t,groupId:this.currGroup.id,createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser,task:{id:this.task.id,title:this.task.title}},i=await this.$store.dispatch({type:"saveTask",boardId:this.currBoard._id,groupId:this.currGroup.id,task:this.task,activity:e});this.$emit("updateBoard",i)},addDescription(){this.task.description="",this.addingDescription=!0},clearForm(){this.addingDescription=!1,this.newDescription=""},async saveDescription(){this.task.description=this.newDescription,await this.saveTask("Updated Description"),this.loadTask()},async addLabelToTask(t){this.task.labelIds||(this.task.labelIds=[]),this.task.labelIds.includes(t)?this.task.labelIds=this.task.labelIds.filter(e=>e!==t):this.task.labelIds.push(t),await this.saveTask("Changed Labels"),this.loadTask()},async updateBoardLabels(t){const e=await this.$store.dispatch({type:"editBoard",boardId:this.currBoard._id,changeType:"update labels",val:t});await this.$emit("updateBoard",e)},async toggleMemberInTask(t){this.task.members||(this.task.members=[]);const e=this.task.members.findIndex(i=>i._id===t._id);e===-1?(this.task.members.push(t),this.task.members.isCheck=!0):(this.task.members.splice(e,1),this.task.members.isCheck=!1),await this.saveTask("Added member"),this.loadTask()},async toggleDueDateDone(){this.task.dueDate.isCompleted=!this.task.dueDate.isCompleted,await this.saveTask("updated due date status"),this.loadTask()},async attachImg(t){const e=await this.$store.dispatch({type:"attachImg",ev:t});this.task.attachments||(this.task.attachments=[]),this.task.attachments.push(e.url),this.task.style.uploadedImg="",this.task.style.bgClr="",this.task.style.bgImg=e.url,await this.saveTask("Added image"),this.loadTask()},async deleteAttachment(t){this.task.attachments.splice(t,1),await this.saveTask("Deleted attachment"),this.loadTask()},async makeCover(t){this.task.style.bgImg=t,this.task.style.bgClr="",this.task.style.uploadedImg="",await this.saveTask("Updated cover photo"),this.loadTask()},async removeTask(t){const e={id:$.makeId(),txt:t,groupId:this.currGroup.id,createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser,task:{id:this.task.id,title:this.task.title}},i=await this.$store.dispatch({type:"removeTask",boardId:this.currBoard._id,groupId:this.currGroup.id,task:this.task,activity:e});this.$emit("updateBoard",i),this.moveToBoard()},setActivities(){this.taskActivities=this.currBoard.activities.filter(t=>{var e;return((e=t.task)==null?void 0:e.id)===this.task.id})},async createChecklist(t){this.task.checklists||(this.task.checklists=[]);const e={id:$.makeId(),title:t,todos:[]};this.task.checklists.push(e),await this.saveTask("Added checklist"),this.loadTask(),this.closeCmp()},async addTodo(t,e){if(!t)return;this.task.checklists.find(d=>d.id===e).todos.push({id:$.makeId(),title:t,isDone:!1}),await this.saveTask("Added todo"),console.log("task",this.task),this.loadTask()},async removeChecklist(t){const e=this.task.checklists.findIndex(i=>i.id===t);this.task.checklists.splice(e,1),await this.saveTask("Removed checklist"),this.loadTask()},async updateTodo(t,e,i){const d=this.task.checklists.find(u=>u.id===t),a=d.todos.find(u=>u.id===e);if(!a)return;a.title=i;const s=d.todos.findIndex(u=>u.id===e);d.todos.splice(s,1,a),await this.saveTask("Updated todo"),this.loadTask()},async updateTodoDone(t,e,i){const d=this.task.checklists.find(u=>u.id===t),a=d.todos.find(u=>u.id===e);a.isDone=i;const s=d.todos.findIndex(u=>u.id===e);d.todos.splice(s,1,a),await this.saveTask("Updated todo"),this.loadTask()},async removeTodo(t,e){const i=this.task.checklists.find(a=>a.id===t),d=i.todos.findIndex(a=>a.id===e);console.log(d),i.todos.splice(d,1),await this.saveTask("removeTodo"),this.loadTask()}},computed:{areDetailsShown(){return this.detailsShown?"Hide Details":"Show Details"},labelsToDisplay(){return this.currBoard.labels.filter(e=>{var i;if((i=this.task.labelIds)!=null&&i.includes(e.id))return e})},formattedDate(){var t=new Date(this.task.dueDate.dueDate);return t.toString().slice(4,21)},dueDateCheckBox(){return this.task.dueDate.isCompleted},overdue(){if(new Date(this.task.dueDate.dueDate).getTime()<Date.now())return!0},coverStyle(){return this.task.style.uploadedImg?{"background-image":`url(${this.task.style.uploadedImg})`,height:"160px","background-color":"#ccd6e0","border-radius":"3px 3px 0 0"}:this.task.style.bgImg?{"background-image":`url(${this.task.style.bgImg})`,height:"160px","background-color":"#ccd6e0","border-radius":"3px 3px 0 0"}:this.task.style.bgClr?{"background-color":this.task.style.bgClr,height:"100px","border-radius":"3px 3px 0 0"}:{display:"none"}},taskActivities(){return this.currBoard.activities.filter(t=>{var e;return((e=t.task)==null?void 0:e.id)===this.task.id})}},components:{userAvatar:N,attachmentPreview:ao,datePreview:ho,labelPreview:Ho,membersPreview:ha,coverUnsplash:Va,deleteCmp:Y,createChecklist:ai,checklistActive:Si,activityPreview:fe,attachedImgPreview:Pi}},Yi={key:1,class:"task-details-main-content"},Vi={class:"task-details-container"},Hi={class:"task-title-container"},Xi={class:"task-group-title"},zi=B(" in list "),Qi={class:"show-member-label flex"},Ki={key:0,class:"edit-members-container"},er=o("p",{class:"members-header"},"Members",-1),tr={class:"members-container flex"},sr={key:1,class:"edit-labels-container"},or=o("p",{class:"labels-header"},"Labels",-1),ar={class:"labels-container flex"},ir={key:2,class:"due-date-container"},rr=o("p",{class:"due-date-title"},"Due date",-1),lr={class:"displayed-date-checkbox"},nr=["src"],dr={key:0,class:"completed-overdue-label l101-label"},cr={key:1,class:"completed-overdue-label l104-label"},ur={class:"edit-description-container"},hr={key:0,class:"description-container"},gr={class:"description-header-container flex"},pr=o("p",{class:"description-header"},"Description",-1),mr={class:"task-description"},br={key:1,class:"add-edit-description-container"},_r=o("p",{class:"description-header"},"Description",-1),fr={key:1,class:"add-description-container"},kr={class:"add-description-buttons-container flex"},vr={key:0,class:"img-container"},yr=o("p",{class:"img-container-header"},"Attachments",-1),Cr={class:"activities"},wr={class:"activity-details-header"},Tr=o("p",{class:"activity-header"},"Activity",-1),Ir={key:0,class:"activities-list"},xr=o("p",{class:"add-task-buttons-title"},"Add to card",-1),Ar={class:"just-buttons-container"},Sr=o("h3",{class:"td-actions"},"Actions",-1),Dr=o("span",{class:"td-delete-icon"},null,-1),Br=o("span",null,"Delete",-1),Ur=[Dr,Br],$r={key:2,class:"loading-task-details",src:Wi,alt:""};function Lr(t,e,i,d,a,s){var X,z,Q,K,ee,te,se,oe,ae;const u=m("user-avatar"),n=m("attached-img-preview"),h=m("checklist-active"),c=m("activity-preview"),b=m("members-preview"),U=m("label-preview"),k=m("create-checklist"),x=m("date-preview"),ve=m("attachment-preview"),ye=m("cover-unsplash"),Ce=m("delete-cmp"),we=j("focus");return r(),l("div",{class:"task-details-dark",onClick:e[23]||(e[23]=(...p)=>s.moveToBoard&&s.moveToBoard(...p))},[o("section",{onClick:e[22]||(e[22]=v(()=>{},["stop"])),class:"task-details-page"},[o("button",{class:"go-back-btn",onClick:e[0]||(e[0]=(...p)=>s.moveToBoard&&s.moveToBoard(...p))}),a.task?(r(),l("div",{key:0,style:S(s.coverStyle),class:"task-cover-img"},null,4)):g("",!0),a.task?(r(),l("div",Yi,[o("div",Vi,[o("h3",Hi,[o("p",{class:"task-title",contenteditable:"true",onBlur:e[1]||(e[1]=(...p)=>s.saveTaskTitle&&s.saveTaskTitle(...p))},_(a.task.title),33)]),o("p",Xi,[zi,o("span",null,_(a.currGroup.title),1)]),o("section",Qi,[(X=a.task.members)!=null&&X.length?(r(),l("div",Ki,[er,o("div",tr,[(r(!0),l(f,null,C(a.task.members,p=>(r(),y(u,{"v-if":a.task.members,key:p._id,user:p},null,8,["v-if","user"]))),128)),o("button",{class:"avatar-btn flex",onClick:e[2]||(e[2]=v(p=>s.openCmp("isMembers"),["stop"]))})])])):g("",!0),(z=s.labelsToDisplay)!=null&&z.length?(r(),l("div",sr,[or,o("div",ar,[(r(!0),l(f,null,C(s.labelsToDisplay,p=>(r(),l("div",{key:p.id,class:"label-show flex",onClick:e[3]||(e[3]=v(ie=>s.openCmp("isLabel"),["stop"])),style:S({backgroundColor:p.color})},_(p.title),5))),128)),o("button",{class:"label-show-btn flex",onClick:e[4]||(e[4]=v(p=>s.openCmp("isLabel"),["stop"]))})])])):g("",!0),a.task.dueDate?(r(),l("div",ir,[rr,o("div",lr,[o("input",{type:"checkbox",onClick:e[5]||(e[5]=(...p)=>s.toggleDueDateDone&&s.toggleDueDateDone(...p)),class:"due-date-checkbox",src:s.dueDateCheckBox},null,8,nr),o("span",null,_(s.formattedDate),1),a.task.dueDate.isCompleted?(r(),l("span",dr,"Completed")):g("",!0),s.overdue&&!a.task.dueDate.isCompleted?(r(),l("span",cr,"Overdue")):g("",!0),o("img",{onClick:e[6]||(e[6]=(...p)=>t.toggleDates&&t.toggleDates(...p)),src:Ji,alt:""})])])):g("",!0)]),o("section",ur,[a.task.description?(r(),l("div",hr,[o("div",gr,[pr,o("button",{onClick:e[7]||(e[7]=(...p)=>s.addDescription&&s.addDescription(...p)),class:"edit-description-btn btn"}," Edit ")]),o("p",mr,_(a.task.description),1)])):(r(),l("div",br,[_r,a.addingDescription?(r(),l("div",fr,[A(o("textarea",{"onUpdate:modelValue":e[9]||(e[9]=p=>a.newDescription=p),class:"description-text-area",placeholder:"Add a more detailed description..."},null,512),[[we],[D,a.newDescription]]),o("div",kr,[o("button",{class:"save-description-btn btn",onClick:e[10]||(e[10]=(...p)=>s.saveDescription&&s.saveDescription(...p))}," Save "),o("button",{class:"delete-description-btn",onClick:e[11]||(e[11]=(...p)=>s.clearForm&&s.clearForm(...p))})])])):(r(),l("div",{key:0,class:"fake-text-area",onClick:e[8]||(e[8]=(...p)=>s.addDescription&&s.addDescription(...p))}," Add a more detailed description... "))]))]),((K=(Q=a.task)==null?void 0:Q.attachments)==null?void 0:K.length)&&((te=(ee=a.task)==null?void 0:ee.attachments)==null?void 0:te.length)>0?(r(),l("section",vr,[yr,(r(!0),l(f,null,C(a.task.attachments,(p,ie)=>(r(),y(n,{key:ie,attachment:p,onMakeCover:s.makeCover,onDeleteAttachment:s.deleteAttachment},null,8,["attachment","onMakeCover","onDeleteAttachment"]))),128))])):g("",!0),(se=a.task.checklists)!=null&&se.length?(r(),y(h,{key:1,task:a.task,onAddTodo:s.addTodo,onRemoveChecklist:s.removeChecklist,onUpdateTodo:s.updateTodo,onUpdateTodoDone:s.updateTodoDone,onRemoveTodo:s.removeTodo},null,8,["task","onAddTodo","onRemoveChecklist","onUpdateTodo","onUpdateTodoDone","onRemoveTodo"])):g("",!0),o("section",Cr,[o("div",wr,[Tr,(oe=a.currBoard.activities)!=null&&oe.length?(r(),l("button",{key:0,class:"details-shown-btn btn",onClick:e[12]||(e[12]=p=>a.detailsShown=!a.detailsShown)},_(s.areDetailsShown),1)):g("",!0)]),a.detailsShown?(r(),l("div",Ir,[(r(!0),l(f,null,C(s.taskActivities,p=>(r(),y(c,{key:p.id,activity:p},null,8,["activity"]))),128))])):g("",!0)])]),o("nav",{onClick:e[21]||(e[21]=v(()=>{},["stop"])),class:"add-task-buttons-container"},[xr,o("div",Ar,[o("button",{onClick:e[13]||(e[13]=v(p=>s.openCmp("isMembers"),["stop"])),class:"members-btn btn",title:"Members"}," Members "),a.handles.isMembers?(r(),y(b,{key:0,boardMembers:a.currBoard.members,task:a.task,onCloseCmp:s.closeCmp,onToggleMemberInTask:s.toggleMemberInTask},null,8,["boardMembers","task","onCloseCmp","onToggleMemberInTask"])):g("",!0),o("button",{onClick:e[14]||(e[14]=v(p=>s.openCmp("isLabel"),["stop"])),class:"labels-btn btn",title:"Labels"}," Labels "),a.handles.isLabel?(r(),y(U,{key:1,boardLabels:a.currBoard.labels,taskLabelIds:a.task.labelIds,onCloseCmp:s.closeCmp,onAddLabelToTask:s.addLabelToTask,onRemoveLabelFromBoard:t.removeLabelFromBoard,onUpdateBoardLabels:s.updateBoardLabels},null,8,["boardLabels","taskLabelIds","onCloseCmp","onAddLabelToTask","onRemoveLabelFromBoard","onUpdateBoardLabels"])):g("",!0),o("button",{class:"checklist-btn btn",title:"Checklist",onClick:e[15]||(e[15]=v(p=>s.openCmp("isChecklist"),["stop"]))}," Checklist "),a.handles.isChecklist?(r(),y(k,{key:2,onCloseCmp:s.closeCmp,onCreateChecklist:s.createChecklist},null,8,["onCloseCmp","onCreateChecklist"])):g("",!0),o("button",{onClick:e[16]||(e[16]=v(p=>s.openCmp("isDatesOn"),["stop"])),class:"dates-btn btn",title:"Dates"}," Dates "),a.handles.isDatesOn?(r(),y(x,{key:3,dueDate:((ae=a.task.dueDate)==null?void 0:ae.dueDate)||Date.now(),onSaveDate:s.saveDate,onCloseCmp:s.closeCmp},null,8,["dueDate","onSaveDate","onCloseCmp"])):g("",!0),o("button",{onClick:e[17]||(e[17]=v(p=>s.openCmp("isAttachOn"),["stop"])),class:"attachment-img btn",title:"Attachment"}," Attachment "),a.handles.isAttachOn?(r(),y(ve,{key:4,imgUrls:a.imgUrls,onAttachImg:s.attachImg,onCloseCmp:s.closeCmp},null,8,["imgUrls","onAttachImg","onCloseCmp"])):g("",!0),o("button",{onClick:e[18]||(e[18]=v(p=>s.openCmp("isCover"),["stop"])),class:"cover-btn btn font-cmp-btn",title:"Cover"}," Cover "),a.handles.isCover?(r(),y(ye,{key:5,style:S(a.task.style),title:a.task.title,attachments:a.task.attachments,onCloseCmp:s.closeCmp,onAddStyle:s.addStyle},null,8,["style","title","attachments","onCloseCmp","onAddStyle"])):g("",!0)]),Sr,o("a",{onClick:e[19]||(e[19]=v(p=>s.openCmp("isDelete"),["stop"])),class:"td-delete-btn btn pointer"},Ur),a.handles.isDelete?(r(),y(Ce,{key:0,type:"task",onRemove:e[20]||(e[20]=p=>s.removeTask("removed task")),onCloseCmp:s.closeCmp},null,8,["onCloseCmp"])):g("",!0)])])):(r(),l("img",$r))])])}var ke=T(Zi,[["render",Lr]]);const Or={props:{task:Object,groupId:String,isLabelTitle:Boolean},data(){return{boardId:null}},components:{userAvatar:N,taskDetails:ke},methods:{toTaskDetails(t,e,i){console.log(i),this.$router.push(`/board/${t}/${e}/${i}`)},toggleLabelTitle(){this.$emit("toggleLabelTitle")}},created(){const{boardId:t}=this.$route.params;this.boardId=t},computed:{formattedDate(){var t=new Date(this.task.dueDate.dueDate);return t.toString().slice(4,10)},isTaskOverdue(){if(new Date(this.task.dueDate.dueDate).getTime()<Date.now())return this.task.dueDate.isCompleted?"l101-label":"l104-label"},isChecklistDone(){var i;let t=0,e=0;return(i=this.task.checklists)==null||i.forEach(d=>{t+=d.todos.length,d.todos.filter(a=>{a.isDone&&e++})}),t===e},labelsToDisplay(){return this.$store.getters.getCurrBoard.labels.filter(e=>{if(this.task.labelIds.includes(e.id))return e})},attachmentCount(){var t;return(t=this.task.attachments)==null?void 0:t.length},checkListsCount(){var i,d;var t=0;(i=this.task.checklists)==null||i.forEach(a=>t+=a.todos.length);var e=0;return(d=this.task.checklists)==null||d.forEach(a=>{e+=a.todos.filter(u=>u.isDone).length}),`${e}/${t}`},openLabel(){return{open:this.isLabelTitle}},taskImgUrl(){return this.task.style.uploadedImg?this.task.style.uploadedImg:this.task.style.bgImg?this.task.style.bgImg:void 0},fullCoverStyle(){var t;return this.task.style.uploadedImg?{backgroundImage:`url(${this.task.style.uploadedImg})`,height:"220px",backgroundColor:"#ccd6e0"}:this.task.style.bgImg?{backgroundImage:`url(${this.task.style.bgImg})`,height:"220px",backgroundColor:"#ccd6e0"}:{"background-color":((t=this.task.style)==null?void 0:t.bgClr)||"#FFFFFF",height:"54px"}},fullCoverTxt(){return this.task.style.uploadedImg||this.task.style.bgImg?"is-img":$.isDarkColor(this.task.style.bgClr)?"is-dark-bg":"is-light-bg"},coverStyle(){return this.task.style.bgClr?{"background-color":this.task.style.bgClr,height:"32px"}:{display:"none"}}}},Fr={key:1,class:"top-cover-selected"},Mr=["src"],jr={class:"task-preview-icons"},Er={class:"task-content"},Nr={class:"task-snapshot flex"},Rr={key:0,class:"description-img-preview",title:"Card description"},Gr=o("span",{class:""},null,-1),qr={key:2,class:"attachment-img-preview",title:"Attachment"},Pr={class:"user-avatar-pos flex"};function Jr(t,e,i,d,a,s){var n,h,c,b,U;const u=m("user-avatar");return r(),l("div",{onClick:e[2]||(e[2]=k=>s.toTaskDetails(this.boardId,this.groupId,this.task.id)),class:"task-preview-container"},[this.task.style.isFullCover?(r(),l("div",{key:0,style:S(s.fullCoverStyle),class:"full-cover-selected"},[o("p",{class:E([s.fullCoverTxt,"full-cover-title"])},_(i.task.title),3)],4)):(r(),l("div",Fr,[o("div",{style:S(s.coverStyle),class:"task-preview-cover"},null,4),s.taskImgUrl&&!i.task.style.bgClr?(r(),l("img",{key:0,class:"top-cover-img",src:s.taskImgUrl,alt:"",draggable:"false"},null,8,Mr)):g("",!0),o("div",jr,[(n=i.task.labelIds)!=null&&n.length?(r(),l("div",{key:0,class:"labels-container",onClick:e[1]||(e[1]=v((...k)=>t.showLabelTitle&&t.showLabelTitle(...k),["stop"]))},[(r(!0),l(f,null,C(s.labelsToDisplay,k=>(r(),l("div",{key:k.id,class:E(["task-preview-label",s.openLabel]),style:S({backgroundColor:k.color}),onClick:e[0]||(e[0]=v((...x)=>s.toggleLabelTitle&&s.toggleLabelTitle(...x),["stop"]))},[i.isLabelTitle?(r(),l("span",{key:0,class:E(s.openLabel)},_(k.title),3)):g("",!0)],6))),128))])):g("",!0),o("div",Er,_(i.task.title),1),o("div",Nr,[(h=i.task.description)!=null&&h.length?(r(),l("div",Rr)):g("",!0),(c=i.task.checklists)!=null&&c.length?(r(),l("div",{key:1,class:E(["checklists-img-preview",{"todo-done":s.isChecklistDone}]),title:"Checklist items"},[o("span",{class:E(["checklist-img-font flex",{white:s.isChecklistDone}])},null,2),Gr,B(_(s.checkListsCount),1)],2)):g("",!0),(b=i.task.attachments)!=null&&b.length?(r(),l("div",qr,_(s.attachmentCount),1)):g("",!0),(U=i.task.dueDate)!=null&&U.dueDate?(r(),l("div",{key:3,class:E(["date-img-preview",s.isTaskOverdue])},_(s.formattedDate),3)):g("",!0),o("div",Pr,[(r(!0),l(f,null,C(i.task.members,k=>{var x;return r(),y(u,{class:"user-avatar","v-if":(x=i.task.members)==null?void 0:x.length,key:k._id,user:k},null,8,["v-if","user"])}),128))])])])]))])}var Wr=T(Or,[["render",Jr]]);const Zr={props:{group:Object,isLabelTitle:Boolean},components:{taskPreview:Wr,deleteCmp:Y,Container:ge,Draggable:pe},data(){return{isAdding:!1,newTaskTitle:"",isRemove:!1}},methods:{getPayload(t){return()=>t},onDrop(t){typeof t.removedIndex!="number"&&typeof t.addedIndex!="number"||this.$emit("dropped",{ev:t,groupToId:this.group.id})},async saveIfTxt(){await $.delay(100),this.newTaskTitle?this.addTask():this.clearForm()},clearForm(){this.isAdding=!1,this.newTaskTitle=""},async openAddTask(){this.isAdding=!0,await $.delay(50)},addTask(){if(this.newTaskTitle){const t=O.getEmptyTask();t.title=this.newTaskTitle,this.$emit("saveGroup",{groupId:this.group.id,type:"add task",newValue:t}),this.clearForm()}else{this.isAdding=!1;return}},saveTitle(t){const e=t.currentTarget.textContent;this.$emit("saveGroup",{groupId:this.group.id,type:"save group title",newValue:e})},toggleLabelTitle(){this.$emit("toggleLabelTitle")},toggleRemove(){this.isRemove=!this.isRemove,console.log(this.isRemove)},removeGroup(){this.$emit("removeGroup",this.group.id),console.log("group",this.group.id)}},computed:{calcHeight(){return{add:this.isAdding}}}},Yr={class:"groups-border"},Vr={class:"outside-group flex"},Hr={class:"bottom-outside-group"},Xr={key:1,class:"add-task-container"},zr={class:"add-task-buttons-container flex"};function Qr(t,e,i,d,a,s){var U;const u=m("delete-cmp"),n=m("task-preview"),h=m("Draggable"),c=m("Container"),b=j("focus");return r(),l("section",Yr,[o("div",Vr,[o("p",{class:"group-title pointer",contenteditable:"true",onBlur:e[0]||(e[0]=(...k)=>s.saveTitle&&s.saveTitle(...k))},_(i.group.title),33),o("span",{class:"remove-group-btn",onClick:e[1]||(e[1]=(...k)=>s.toggleRemove&&s.toggleRemove(...k))})]),a.isRemove?(r(),y(u,{key:0,type:"list",onRemove:s.removeGroup,onCloseCmp:s.toggleRemove},null,8,["onRemove","onCloseCmp"])):g("",!0),o("div",{class:E(["group-container",s.calcHeight])},[(U=i.group.tasks)!=null&&U.length?(r(),y(c,{key:0,class:"tasks-container","group-name":"group",orientation:"vertical","get-child-payload":s.getPayload(i.group.id),onDrop:s.onDrop},{default:w(()=>[(r(!0),l(f,null,C(i.group.tasks,k=>(r(),y(h,{class:"draggable-container middle-group-list",key:k.id},{default:w(()=>[I(n,{task:k,groupId:i.group.id,isLabelTitle:i.isLabelTitle,onToggleLabelTitle:s.toggleLabelTitle},null,8,["task","groupId","isLabelTitle","onToggleLabelTitle"])]),_:2},1024))),128))]),_:1},8,["get-child-payload","onDrop"])):g("",!0)],2),o("div",Hr,[a.isAdding?(r(),l("div",Xr,[A(o("textarea",{onBlur:e[3]||(e[3]=v((...k)=>s.saveIfTxt&&s.saveIfTxt(...k),["stop"])),"onUpdate:modelValue":e[4]||(e[4]=k=>a.newTaskTitle=k),placeholder:"Enter a title for this card..."},null,544),[[b],[D,a.newTaskTitle]]),o("div",zr,[o("button",{class:"adding-task-btn btn",onClick:e[5]||(e[5]=(...k)=>s.addTask&&s.addTask(...k))},"Add card"),o("button",{class:"delete-task-btn",onClick:e[6]||(e[6]=(...k)=>s.clearForm&&s.clearForm(...k))})])])):(r(),l("div",{key:0,class:"add-task-btn",onClick:e[2]||(e[2]=(...k)=>s.openAddTask&&s.openAddTask(...k))},"Add a card"))])])}var Kr=T(Zr,[["render",Qr]]);const el={props:{board:Object},data(){return{filterBy:{txt:""}}},methods:{setFilter(){this.$emit("setFilter",this.filterBy)}},computed:{checkBox(){return"../../src/assets/svgs/empty-checkbox.svg"}},components:{userAvatar:N}},tl={class:"board-filter"},sl={class:"cmp-header"},ol=o("p",{class:"cmp-container-title"},"Filter",-1),al=o("span",null,null,-1),il=[al],rl=o("hr",{class:"thin-hr"},null,-1),ll={class:"filter-search-container"},nl=o("p",{class:"filter-section-title"},"Keyword",-1),dl=o("p",{class:"search-description"},"Search cards, members, labels, and more.",-1),cl={class:"filter-member-container"},ul=o("p",{class:"filter-section-title"},"Members",-1),hl={class:"filter-no-member flex"},gl=["src"],pl=o("div",{class:"filter-no-user-avatar flex"},null,-1),ml=o("p",{class:"filter-user-name"},"No members",-1),bl=o("input",{type:"checkbox",value:"no",hidden:""},null,-1),_l={class:"filter-members-list"},fl=["src"],kl={class:"filter-user-name"},vl=["value"];function yl(t,e,i,d,a,s){const u=m("user-avatar"),n=j("focus"),h=j("modal");return r(),l("section",tl,[o("div",sl,[ol,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=c=>t.$emit("closeCmp"))},il)]),rl,o("label",ll,[nl,A(o("input",{type:"text",class:"search-input",placeholder:"Enter a keyword...",onInput:e[1]||(e[1]=(...c)=>s.setFilter&&s.setFilter(...c))},null,544),[[n],[h,a.filterBy.txt]]),dl]),o("div",cl,[ul,o("label",hl,[o("img",{class:"checkbox-icon",src:s.checkBox},null,8,gl),pl,ml,bl]),o("div",_l,[(r(!0),l(f,null,C(i.board.members,c=>(r(),l("label",{key:c._id,class:"filter-member flex"},[o("img",{class:"checkbox-icon",src:s.checkBox},null,8,fl),I(u,{user:c},null,8,["user"]),o("p",kl,_(c.fullname),1),o("input",{type:"checkbox",value:c._id,hidden:""},null,8,vl)]))),128))])])])}var Cl=T(el,[["render",yl]]),wl="/assets/photos.2b952301.jpg",Tl="/assets/colors.05334064.jpg";const Il={props:{board:Object},data(){return{filterBy:"",handles:{isAbout:!1,isSearch:!1,isChangeBg:!1,isShowActivities:!1},bgOptions:{isChangClr:!1,isChangImg:!1},bgClr:"",bgImg:"",bgColors:[{id:"l101",color:"#61bd4f",isSelected:!1},{id:"l102",color:"#f2d600",isSelected:!1},{id:"l103",color:"#ff9f1a",isSelected:!1},{id:"l104",color:"#eb5a46",isSelected:!1},{id:"l105",color:"#c377e0",isSelected:!1},{id:"l106",color:"#0079bf",isSelected:!1},{id:"l107",color:"#00c2e0",isSelected:!1},{id:"l108",color:"#51e898",isSelected:!1},{id:"l109",color:"#ff78cb",isSelected:!1},{id:"l110",color:"#344563",isSelected:!1}],search:"",photos:[],isLoading:!1,attachments:[]}},methods:{searchPhoto(t){const e="Y2X6Y_wdMpqvaYX_4jgO-dOBqVAsQMQpihsIFNOAX5E";let i=20,d=t;d||(d=this.search),J.get(`https://api.unsplash.com/search/photos?page=1&per_page=${i}&query=${d}&client_id=${e}`).then(a=>{this.photos=a.data.results}).catch(a=>{console.log(a)})},waitSearch:he.debounce(function(){this.searchPhoto()},1e3),toggleMenu(t){if(this.bgOptions.isChangClr||this.bgOptions.isChangImg){this.toggleBgOption();return}for(let e in this.handles)this.handles[e]=!1;typeof t=="string"&&(this.handles[t]=!0)},toggleBgOption(t){for(const e in this.bgOptions)this.bgOptions[e]=!1;typeof t=="string"&&(this.bgOptions[t]=!0,t==="isChangImg"&&this.searchPhoto(this.board.title))},selectBg(t,e){this.$emit("editBoard",t,e)},selectPhoto(t){this.bgImg=t},async onAttachImg(t){this.isLoading=!0;const e=await this.$emit("attachImg",t);console.log(e),this.attachments.push(e),this.isLoading=!1}},computed:{activitiesToDisplay(){const t=this.board.activities.sort((e,i)=>e.createdAt>i.createdAt?-1:1);return this.handles.isShowActivities?t:t.slice(0,20)},cmpTitle(){return this.handles.isAbout?"About":this.handles.isSearch?"Search":this.bgOptions.isChangClr?"Colors":this.bgOptions.isChangImg?"Photos":this.handles.isChangeBg?"Change background":this.handles.isShowActivities?"Activity":"Menu"}},components:{activityPreview:fe,listSlot:P}},xl={class:"board-menu"},Al={class:"cmp-header"},Sl=o("span",null,null,-1),Dl=[Sl],Bl={class:"cmp-container-title"},Ul=o("span",null,null,-1),$l=[Ul],Ll=o("hr",{class:"thin-hr"},null,-1),Ol={class:"menu-content"},Fl={key:0,class:"menu-options flex"},Ml=o("span",{class:"trello-icon"},null,-1),jl=o("div",null,[o("p",{class:"menu-option-about"},"About this board"),o("p",{class:"menu-option-about-description"}," Add description to your board ")],-1),El=[Ml,jl],Nl=o("img",{class:"board-bg-preview",src:be},null,-1),Rl=o("p",{class:"menu-option-bgc"},"Change background",-1),Gl=[Nl,Rl],ql=o("hr",{class:"thin-hr"},null,-1),Pl={key:1,class:"menu-activities-container"},Jl={class:"activities-list"},Wl={key:2,class:"change-bg-container"},Zl={key:0,class:"change-bg-choose"},Yl={class:"photos-colors-options flex"},Vl=o("img",{class:"photos-option",src:wl},null,-1),Hl=o("p",{class:"photos-option-title"},"Photos",-1),Xl=[Vl,Hl],zl=o("img",{class:"colors-option",src:Tl},null,-1),Ql=o("p",{class:"color-option-title"},"Colors",-1),Kl=[zl,Ql],en=o("hr",{class:"thin-hr"},null,-1),tn=o("p",{class:"custom-option-title"},"Custom",-1),sn={class:"customs-container flex"},on={class:"custom-input-label"},an=o("div",{class:"custom-option"},[o("span")],-1),rn={class:"options-list"},ln=["onClick"],nn={key:1,class:"change-bg-img-screen"},dn=["src","onClick"];function cn(t,e,i,d,a,s){const u=m("activity-preview"),n=m("list-slot"),h=j("focus");return r(),l("section",xl,[o("div",Al,[a.handles.isAbout||a.handles.isChangeBg||a.handles.isShowActivities?(r(),l("a",{key:0,class:"back-to-cmp-btn",onClick:e[0]||(e[0]=(...c)=>s.toggleMenu&&s.toggleMenu(...c))},Dl)):g("",!0),o("p",Bl,_(s.cmpTitle),1),o("a",{class:"close-cmp-btn",onClick:e[1]||(e[1]=c=>t.$emit("closeCmp"))},$l)]),Ll,o("section",Ol,[!a.handles.isAbout&&!a.handles.isChangeBg&&!a.handles.isShowActivities?(r(),l("div",Fl,[o("div",{class:"menu-option",onClick:e[2]||(e[2]=c=>s.toggleMenu("isAbout"))},El),o("div",{class:"menu-option",onClick:e[3]||(e[3]=c=>s.toggleMenu("isChangeBg"))},Gl),ql])):g("",!0),!a.handles.isAbout&&!a.handles.isChangeBg?(r(),l("section",Pl,[a.handles.isShowActivities?g("",!0):(r(),l("p",{key:0,class:"activity-header",onClick:e[4]||(e[4]=c=>s.toggleMenu("isShowActivities"))}," Activity ")),o("div",Jl,[(r(!0),l(f,null,C(s.activitiesToDisplay,c=>(r(),y(u,{key:c.id,activity:c},null,8,["activity"]))),128))]),a.handles.isShowActivities?g("",!0):(r(),l("a",{key:1,class:"show-allActivities",onClick:e[5]||(e[5]=c=>s.toggleMenu("isShowActivities"))},"View all activity "))])):g("",!0),a.handles.isChangeBg?(r(),l("section",Wl,[!a.bgOptions.isChangClr&&!a.bgOptions.isChangImg?(r(),l("div",Zl,[o("div",Yl,[o("div",{class:"photos-option-container",onClick:e[6]||(e[6]=c=>s.toggleBgOption("isChangImg"))},Xl),o("div",{class:"colors-option-container",onClick:e[7]||(e[7]=c=>s.toggleBgOption("isChangClr"))},Kl)]),en,tn,o("div",sn,[o("label",on,[o("input",{type:"file",onChange:e[8]||(e[8]=(...c)=>s.onAttachImg&&s.onAttachImg(...c)),hidden:""},null,32),an])])])):g("",!0),o("div",rn,[a.bgOptions.isChangClr?(r(),y(n,{key:0},{list:w(()=>[(r(!0),l(f,null,C(a.bgColors,c=>(r(),l("div",{key:c.id,class:"colors-option",style:S({backgroundColor:c.color}),onClick:b=>s.selectBg("bgClr",c.color)},null,12,ln))),128))]),_:1})):g("",!0),a.bgOptions.isChangImg?(r(),l("div",nn,[A(o("input",{type:"text",placeholder:"Search Unsplash for photos",class:"unsplash-search","onUpdate:modelValue":e[9]||(e[9]=c=>a.search=c),onInput:e[10]||(e[10]=(...c)=>s.waitSearch&&s.waitSearch(...c))},null,544),[[h],[D,a.search]]),I(n,null,{list:w(()=>[(r(!0),l(f,null,C(a.photos,(c,b)=>(r(),l("img",{key:b,class:"photos-option",src:c.urls.thumb,alt:"img",onClick:U=>s.selectBg("bgImg",c.urls.full)},null,8,dn))),128))]),_:1})])):g("",!0)])])):g("",!0)])])}var un=T(Il,[["render",cn]]),V="/assets/full-star.b170b7f3.png",H="/assets/empty-star.b48fd479.png";const hn={name:"board-details",data(){return{board:null,dndInfo:{},isLabelTitle:!1,isOpenFilter:!1,isOpenMenu:!1}},components:{boardGroup:Kr,userAvatar:N,Container:ge,Draggable:pe,boardFilter:Cl,boardMenu:un},async created(){this.unsubscribe=Ws.on("show-msg",this.showMsg);const{boardId:t}=this.$route.params;this.topic=t,F.emit("board topic",this.topic),F.on("someone updated",this.boardUpdated),this.loadBoard(t)},unmounted(){F.off("someone updated",this.boardUpdated)},methods:{onDrop(t){const e=this.board.groups.splice(t.removedIndex,1)[0];this.board.groups.splice(t.addedIndex,0,e),this.saveBoard()},dropCard({ev:t,groupToId:e}){this.dndInfo.groupFromId=t.payload,t.payload!==e&&(this.dndInfo.groupToId=e),(t.removedIndex||typeof t.removedIndex=="number")&&(this.dndInfo.removedIndex=t.removedIndex),(t.addedIndex||typeof t.addedIndex=="number")&&(this.dndInfo.addedIndex=t.addedIndex),(this.dndInfo.addedIndex||typeof this.dndInfo.addedIndex=="number")&&(this.dndInfo.removedIndex||typeof this.dndInfo.removedIndex=="number")&&this.moveTask()},moveTask(){const t=this.board.groups.find(d=>d.id===this.dndInfo.groupFromId),e=this.dndInfo.groupToId?this.board.groups.find(d=>d.id===this.dndInfo.groupToId):t,i=t.tasks.splice(this.dndInfo.removedIndex,1)[0];e.tasks.splice(this.dndInfo.addedIndex,0,i),this.saveBoard(),this.dndInfo={}},async loadBoard(t){this.board=await this.$store.dispatch({type:"loadBoard",boardId:t})},async saveBoard(t){if(t){const e={id:$.makeId(),txt:t,createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser};this.board.activities.push(e)}this.board=await this.$store.dispatch({type:"saveBoard",board:JSON.parse(JSON.stringify(this.board))})},async editBoard(t,e){try{this.board=await this.$store.dispatch({type:"editBoard",boardId:this.board._id,changeType:t,val:e})}catch{}},async attachImg(t){const{url:e}=await this.$store.dispatch({type:"attachImg",ev:t});return await this.editBoard("bgImg",e),console.log(e),e},async addGroup(){const t=O.getEmptyGroup();this.board.groups.push(t),this.saveBoard("Added a new group")},async saveGroup({groupId:t,type:e,newValue:i}){const d=JSON.parse(JSON.stringify(this.board.groups.find(s=>s.id===t)));switch(e){case"save group title":d.title=i;break;case"add task":d.tasks.push(i);break}const a={id:$.makeId(),txt:e,createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser,group:{id:d.id,title:d.title}};this.board=await this.$store.dispatch({type:"saveGroup",boardId:this.board._id,group:d,activity:a})},async removeGroup(t){console.log("board",t);const e={id:$.makeId(),txt:"remove group",createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser,group:{id:t}};this.board=await this.$store.dispatch({type:"removeGroup",boardId:this.board._id,groupId:t,activity:e})},toggleLabelTitle(){this.isLabelTitle=!this.isLabelTitle},toggleFilter(){this.isOpenFilter=!this.isOpenFilter},setFilter(t){this.$store.commit({type:"setFilter",filterBy:t})},boardUpdated(){this.loadBoard(this.board._id)},toggleMenu(){this.isOpenMenu=!this.isOpenMenu},moveToDashboard(t){this.$router.push(`/${t}/dashboard`)}},computed:{isStarred(){return this.board.isFavorite?"filled":"stroke"},background(){var i,d;const t=((i=this.board.style)==null?void 0:i.bgImg)||"",e=((d=this.board.style)==null?void 0:d.bgClr)||"";return{backgroundImage:`url(${t})`,backgroundColor:e}},updatedBoardFromStore(){return this.$store.getters.boards}},watch:{"$route.params.boardId":{immediate:!0,handler(){const{boardId:t}=this.$route.params;!t||this.loadBoard(t)}}},unmounted(){this.unsubscribe()}},gn={class:"board-header flex"},pn={class:"board-title-container flex"},mn=o("button",{class:"btn-board-details btn-board"},"Board",-1),bn={key:0,class:"star",src:V,alt:""},_n={key:1,class:"star",src:H},fn={class:"members-nav-bar flex"},kn={class:"board-members-container flex"},vn=o("button",{class:"invite-btn btn-board btn"},"Invite",-1),yn={class:"board-header-nav flex"},Cn={class:"groups-layout"},wn={class:"groups-container flex"};function Tn(t,e,i,d,a,s){const u=m("router-view"),n=m("user-avatar"),h=m("board-filter"),c=m("board-menu"),b=m("board-group"),U=m("Draggable"),k=m("Container");return a.board?(r(),l("section",{key:0,class:"board-container",style:S(s.background)},[I(u,{onUpdateBoard:e[0]||(e[0]=x=>s.loadBoard(a.board._id))}),o("header",gn,[o("div",pn,[mn,o("div",{class:"board-title",contenteditable:"true",onBlur:e[1]||(e[1]=x=>s.editBoard("board title",x))},_(a.board.title),33),o("button",{class:"star-btn btn-board btn",onClick:e[2]||(e[2]=v(x=>s.editBoard("toggle favorite"),["stop"]))},[a.board.isFavorite?(r(),l("img",bn)):(r(),l("img",_n))])]),o("div",fn,[o("div",kn,[(r(!0),l(f,null,C(a.board.members,x=>(r(),y(n,{"v-if":a.board.members,key:x._id,user:x},null,8,["v-if","user"]))),128))]),vn]),o("nav",yn,[o("button",{class:"filter-btn btn-board btn",onClick:e[3]||(e[3]=(...x)=>s.toggleFilter&&s.toggleFilter(...x))}," Filter "),a.isOpenFilter?(r(),y(h,{key:0,board:a.board,onCloseCmp:s.toggleFilter,onSetFilter:s.setFilter},null,8,["board","onCloseCmp","onSetFilter"])):g("",!0),o("button",{class:"show-menu-btn btn-board btn",onClick:e[4]||(e[4]=(...x)=>s.toggleMenu&&s.toggleMenu(...x))}," Show menu "),a.isOpenMenu?(r(),y(c,{key:1,board:a.board,onCloseCmp:s.toggleMenu,onEditBoard:s.editBoard,onAttachImg:s.attachImg},null,8,["board","onCloseCmp","onEditBoard","onAttachImg"])):g("",!0)])]),o("div",Cn,[o("article",wn,[I(k,{onDrop:s.onDrop,orientation:"horizontal"},{default:w(()=>[(r(!0),l(f,null,C(a.board.groups,x=>(r(),y(U,{class:"draggable-container flex",key:x.id},{default:w(()=>[I(b,{group:x,isLabelTitle:a.isLabelTitle,onDropped:s.dropCard,onSaveGroup:s.saveGroup,onToggleLabelTitle:s.toggleLabelTitle,onRemoveGroup:s.removeGroup},null,8,["group","isLabelTitle","onDropped","onSaveGroup","onToggleLabelTitle","onRemoveGroup"])]),_:2},1024))),128))]),_:1},8,["onDrop"]),o("div",{class:"add-group",onClick:e[5]||(e[5]=(...x)=>s.addGroup&&s.addGroup(...x))},"+ Add another list")])])],4)):g("",!0)}var In=T(hn,[["render",Tn]]);const xn={name:"work-space",data(){return{isFavorite:!1,isCreateBoard:!1}},methods:{toBoardDetails(t){this.$router.push(`/board/${t}`)},async toggleFavorite(t){console.log(t),this.$store.dispatch({type:"editBoard",boardId:t,changeType:"toggle favorite"})},async removeBoard(t){this.$store.dispatch({type:"removeBoard",boardId:t})}},computed:{boards(){return this.$store.getters.boards},favoriteBoards(){return this.$store.getters.favoriteBoards},cardBackground(){var t;return this.board.style.bgImg?{backgroundImage:`url(${(t=board.style)==null?void 0:t.bgImg})`}:this.board.style.bgClr?{backgroundColor:`(${this.board.style.bgClr})`}:""}},components:{createBoard:_e}},An={class:"workspace-page-container"},Sn={class:"all-boards-container"},Dn=o("h1",null,"Favorite boards",-1),Bn={class:"favorite-boards flex"},Un=["onClick"],$n={class:"favorite-board-title"},Ln=["onClick"],On={key:0,class:"ws-full-star",src:V},Fn={key:1,class:"ws-empty-star",src:H},Mn=o("h3",{class:"all-boards-title"},"All boards",-1),jn={class:"saved-boards"},En=["onClick"],Nn={class:"title"},Rn=["onClick"],Gn={key:0,class:"ws-full-star",src:V},qn={key:1,class:"ws-empty-star",src:H};function Pn(t,e,i,d,a,s){const u=m("create-board");return r(),l("main",An,[o("section",Sn,[o("section",null,[Dn,o("ul",Bn,[(r(!0),l(f,null,C(s.favoriteBoards,n=>{var h,c;return r(),l("li",{key:n._id,onClick:b=>s.toBoardDetails(n._id),class:"board-preview img-pos style-font",style:S({backgroundImage:`url(${((h=n.style)==null?void 0:h.bgImg)||""})`,backgroundColor:((c=n.style)==null?void 0:c.bgClr)||""})},[o("h2",$n,_(n.title),1),o("a",{class:"star-container",onClick:v(b=>s.toggleFavorite(n._id),["stop"])},[n.isFavorite?(r(),l("img",On)):(r(),l("img",Fn))],8,Ln)],12,Un)}),128))])]),Mn,o("article",jn,[(r(!0),l(f,null,C(s.boards,n=>{var h,c;return r(),l("div",{key:n._id,onClick:b=>s.toBoardDetails(n._id),class:"board-preview img-pos style-font",style:S({backgroundImage:`url(${((h=n.style)==null?void 0:h.bgImg)||""})`,backgroundColor:((c=n.style)==null?void 0:c.bgClr)||""})},[o("h2",Nn,_(n.title),1),o("a",{class:"star-container",onClick:v(b=>s.toggleFavorite(n._id),["stop"])},[n.isFavorite?(r(),l("img",Gn)):(r(),l("img",qn))],8,Rn)],12,En)}),128)),o("button",{onClick:e[0]||(e[0]=n=>a.isCreateBoard=!0),class:"board-preview justify-center add-card"},"Create new board"),a.isCreateBoard?(r(),y(u,{key:0,onCloseCmp:e[1]||(e[1]=n=>a.isCreateBoard=!1)})):g("",!0)])])])}var Jn=T(xn,[["render",Pn]]);const Wn={name:"home",data(){return{loginCred:{username:"",password:""},signupCred:{fullname:"",username:"",password:""},isSignIn:!0,msg:""}},computed:{loggedinUser(){return this.$store.getters.loggedinUser},loginSignUpButton(){return this.isSignIn?"Or Sign Up":"Back To Login"}},created(){this.loadUsers()},methods:{async doLogin(){if(!this.loginCred.username){this.msg="Please enter username/password";return}try{await this.$store.dispatch({type:"login",userCred:this.loginCred}),this.$router.push("/board")}catch{this.msg="Failed to login"}},doLogout(){this.$store.dispatch({type:"logout"})},async doSignup(){if(!this.signupCred.fullname||!this.signupCred.password||!this.signupCred.username){this.msg="Please fill out all of the form details";return}try{await this.$store.dispatch({type:"signup",userCred:this.signupCred}),this.$router.push("/board")}catch{this.msg="Failed to sign up new user"}},toggleLoginSignUp(){this.isSignIn=!this.isSignIn},async removeUser(t){try{await this.$store.dispatch({type:"removeUser",userId:t}),this.msg="User removed"}catch{this.msg="Failed to remove user"}},async guestLogin(){try{await this.$store.dispatch({type:"login",userCred:{username:"Guest",password:"123"}}),this.$router.push("/board")}catch(t){console.log(t),this.msg="Failed to do guest login"}},loadUsers(){this.$store.dispatch({type:"loadUsers"})}}},Zn={class:"login-page-container"},Yn=o("h1",null,"Welcome, please log in or sign up!",-1),Vn=B("WorkSpace"),Hn=B("| "),Xn=B("About"),zn=o("br",null,null,-1),Qn=B("To WorkSpace"),Kn={key:2},ed=o("button",null,"Login",-1),td=o("br",null,null,-1),sd=o("button",null,"Login",-1),od=o("h3",null,"Guest Login:",-1);function ad(t,e,i,d,a,s){const u=m("router-link");return r(),l("section",Zn,[Yn,I(u,{to:"/board"},{default:w(()=>[Vn]),_:1}),Hn,I(u,{to:"/about"},{default:w(()=>[Xn]),_:1}),s.loggedinUser?(r(),l("button",{key:0,onClick:e[0]||(e[0]=(...n)=>s.doLogout&&s.doLogout(...n))},"Logout "+_(s.loggedinUser.username),1)):g("",!0),zn,s.loggedinUser?(r(),y(u,{key:1,to:"/board"},{default:w(()=>[Qn]),_:1})):(r(),l("section",Kn,[a.isSignIn?(r(),l("form",{key:0,onSubmit:e[3]||(e[3]=v((...n)=>s.doLogin&&s.doLogin(...n),["prevent"]))},[A(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=n=>a.loginCred.username=n),placeholder:"Enter username"},null,512),[[D,a.loginCred.username]]),A(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>a.loginCred.password=n),placeholder:"Enter password"},null,512),[[D,a.loginCred.password]]),ed],32)):g("",!0),o("button",{onClick:e[4]||(e[4]=(...n)=>s.toggleLoginSignUp&&s.toggleLoginSignUp(...n))},_(s.loginSignUpButton),1),td,a.isSignIn?g("",!0):(r(),l("form",{key:1,onSubmit:e[8]||(e[8]=v((...n)=>s.doSignup&&s.doSignup(...n),["prevent"]))},[A(o("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=n=>a.signupCred.fullname=n),placeholder:"Enter your full name"},null,512),[[D,a.signupCred.fullname]]),A(o("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=n=>a.signupCred.username=n),placeholder:"Enter username"},null,512),[[D,a.signupCred.username]]),A(o("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=n=>a.signupCred.password=n),placeholder:"Enter password"},null,512),[[D,a.signupCred.password]]),sd],32)),od,o("button",{onClick:e[9]||(e[9]=(...n)=>s.guestLogin&&s.guestLogin(...n))},"Login as Guest")]))])}var id=T(Wn,[["render",ad]]);const rd=De({history:Be("/"),routes:[{path:"/",name:"home",component:ys},{path:"/login",name:"login",component:id},{path:"/board",name:"work-space",component:Jn},{path:"/board/:boardId",name:"board-details",component:In,children:[{path:":groupId/:taskId",name:"task-details",component:ke}]},{path:"/about",name:"about",component:As}]});var ld={state:{boards:[],currBoard:null,filterBy:null},getters:{boards({boards:t}){return JSON.parse(JSON.stringify(t))},favoriteBoards({boards:t}){return t.filter(e=>e.isFavorite)},getCurrBoard({currBoard:t}){return JSON.parse(JSON.stringify(t))}},mutations:{setFilter(t,{filterBy:e}){t.filterBy=e},setBoards(t,{boards:e}){t.boards=e},addBoard(t,{board:e}){t.boards.push(e)},removeBoard(t,{boardId:e}){t.boards=t.boards.filter(i=>i._id!==e)},setCurrBoard(t,{board:e}){t.currBoard=JSON.parse(JSON.stringify(e))},setFavorite(t,{updatedBoard:e}){const i=t.boards.findIndex(d=>d._id===e._id);t.boards.splice(i,1,e),console.log(t.boards)},saveBoard(t,{savedBoard:e}){const i=t.boards.findIndex(d=>d._id===e._id);t.boards.splice(i,1,e)},saveGroup(t,{boardId:e,group:i}){const d=t.boards.find(s=>s._id===e),a=d.groups.findIndex(s=>s.id===i.id);if(a===-1)return d.groups.push(i);d.groups.splice(a,1,i),t.currBoard=d},saveTask(t,{boardId:e,groupId:i,task:d}){const a=t.boards.find(n=>n._id===e),s=a.groups.find(n=>n.id===i),u=s.tasks.findIndex(n=>n.id===d.id);if(u===-1)return s.tasks.push(d);s.tasks.splice(u,1,d),t.currBoard=a},removeTask(t,{board:e,group:i,taskIdx:d}){console.log("before",e),i.tasks.splice(d,1),console.log("after",e),t.currBoard=e},removeGroup(t,{board:e,groupIdx:i}){console.log(e,i),e.groups.splice(i,1),t.currBoard=e}},actions:{async loadBoards({commit:t}){try{const e=await O.query();t({type:"setBoards",boards:e})}catch(e){console.log("board module loadBoards cant load boards now",e)}},async loadBoard({commit:t},{boardId:e}){try{const i=await O.getById(e);return t({type:"setCurrBoard",board:i}),JSON.parse(JSON.stringify(i))}catch(i){console.log("board module loadBoard cant load board now",i)}},async addBoard({commit:t},{title:e,bgClr:i,bgImg:d}){try{const a=O.getEmptyBoard();a.title=e,a.style.bgClr=i,a.style.bgImg=d;const s=await O.save(a);return t({type:"addBoard",board:s}),s._id}catch(a){console.log("board module addBoard cant load boards now",a)}},async removeBoard({commit:t},{boardId:e}){try{await O.remove(e),t({type:"removeBoard",boardId:e})}catch(i){console.log("board module removeBoard cant load boards now",i)}},async removeTask({commit:t,state:e},{boardId:i,groupId:d,task:a,activity:s}){try{const u=e.boards.find(U=>U._id===i),n=u.groups.find(U=>U.id===d),h=n.tasks.findIndex(U=>U.id===a.id);await t({type:"removeTask",board:u,group:n,taskIdx:h});const c=JSON.parse(JSON.stringify(e.currBoard));c.activities.push(s);const b=await O.save(c);return t({type:"saveBoard",savedBoard:b}),JSON.parse(JSON.stringify(b))}catch(u){console.log("board module removeTask cant remove task now",u)}},async removeGroup({commit:t,state:e},{boardId:i,groupId:d,activity:a}){console.log(i,d,a);try{const s=e.boards.find(c=>c._id===i),u=s.groups.findIndex(c=>c.id===d);await t({type:"removeGroup",board:s,groupIdx:u});const n=JSON.parse(JSON.stringify(e.currBoard));n.activities.push(a);const h=await O.save(n);return t({type:"saveBoard",savedBoard:h}),JSON.parse(JSON.stringify(h))}catch(s){console.log("board module removeGroup cant remove group now",s)}},async editBoard({state:t,dispatch:e},{boardId:i,changeType:d,val:a}){try{const s=JSON.parse(JSON.stringify(t.boards.find(h=>h._id===i)));let u;switch(d){case"bgClr":s.style[d]=a,s.style.bgImg="",u="background";break;case"bgImg":s.style[d]=a,s.style.bgClr="",u="background";break;case"board title":s.title=a.currentTarget.textContent,u="title";break;case"toggle favorite":s.isFavorite=!s.isFavorite,u="toggle favorite";break;case"update labels":if(typeof a=="string"){const h=s.labels.findIndex(c=>c.id===a);s.labels.splice(h,1)}else{const h=s.labels.findIndex(c=>c.id===a.id);h===-1?s.labels.push(a):s.labels.splice(h,1,a)}u="labels";break}const n={id:$.makeId(),txt:`Change board ${u}`,createdAt:Date.now(),byMember:t.loggedinUser||t.guestUser};return s.activities.push(n),await e({type:"saveBoard",board:JSON.parse(JSON.stringify(s))})}catch(s){throw console.log("board module editBoard cant edit board now",s),s}},async saveBoard({commit:t},{board:e}){try{const i=await O.save(e);return t({type:"saveBoard",savedBoard:i}),F.emit("board updated"),JSON.parse(JSON.stringify(i))}catch(i){throw console.log("board module saveBoard cant save board now",i),i}},async attachImg({commit:t},{ev:e}){try{return await O.uploadImg(e)}catch(i){console.log("board module attachImg cant attach img now",i)}},async saveTask({commit:t,state:e},{boardId:i,groupId:d,task:a,activity:s}){try{await t({type:"saveTask",boardId:i,groupId:d,task:a});const u=JSON.parse(JSON.stringify(e.currBoard));u.activities.push(s);const n=await O.save(u);return t({type:"saveBoard",savedBoard:n}),JSON.parse(JSON.stringify(n))}catch(u){console.log("board module saveTask cant save task now",u)}},async saveGroup({commit:t,state:e},{boardId:i,group:d,activity:a}){console.log(d);try{await t({type:"saveGroup",boardId:i,group:d});const s=JSON.parse(JSON.stringify(e.currBoard));s.activities.push(a);const u=await O.save(s);return t({type:"saveBoard",savedBoard:u}),JSON.parse(JSON.stringify(u))}catch(s){console.log("board module saveGroup cant save group now",s)}}}},nd={state:{loggedinUser:L.getLoggedinUser(),users:[],watchedUser:null,guestUser:L.getGuestUser()},getters:{users({users:t}){return t},loggedinUser({loggedinUser:t}){return t},watchedUser({watchedUser:t}){return t},getGuestUser({guestUser:t}){return t}},mutations:{setLoggedinUser(t,{user:e}){t.loggedinUser=e?ne({},e):null,console.log("in mutation, ",t.loggedinUser)},setWatchedUser(t,{user:e}){t.watchedUser=e},setUsers(t,{users:e}){t.users=e},removeUser(t,{userId:e}){t.users=t.users.filter(i=>i._id!==e)},setGuestUser(t,{guestUser:e}){t.guestUser=e}},actions:{async login({commit:t},{userCred:e}){try{const i=await L.login(e);return t({type:"setLoggedinUser",user:i}),i}catch(i){throw console.log("userStore: Error in login",i),i}},async signup({commit:t},{userCred:e}){try{const i=await L.signup(e);return t({type:"setLoggedinUser",user:i}),i}catch(i){throw console.log("userStore: Error in signup",i),i}},async logout({commit:t}){try{await L.logout(),t({type:"setLoggedinUser",user:null})}catch(e){throw console.log("userStore: Error in logout",e),e}},async loadUsers({commit:t}){try{const e=await L.getUsers();t({type:"setUsers",users:e})}catch(e){throw console.log("userStore: Error in loadUsers",e),e}},async loadAndWatchUser({commit:t},{userId:e}){try{const i=await L.getById(e);t({type:"setWatchedUser",user:i}),F.off(ce),F.on(ce,d=>{t({type:"setWatchedUser",user:d})})}catch(i){throw console.log("userStore: Error in loadAndWatchUser",i),i}},async removeUser({commit:t},{userId:e}){try{await L.remove(e),t({type:"removeUser",userId:e})}catch(i){throw console.log("userStore: Error in removeUser",i),i}},async updateUser({commit:t},{user:e}){try{e=await L.update(e),t({type:"setUser",user:e})}catch(i){throw console.log("userStore: Error in updateUser",i),i}},loadGuestUser({commit:t}){const e=L.getGuestUser();t({type:"setGuestUser",guestUser:e})}}};const dd=Ue({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{boardStore:ld,userStore:nd}}),cd={mounted(t){t.focus()}};const R=$e(ds);R.directive("focus",cd);R.use(Le,{});R.use(Oe,{accessKey:"Y2X6Y_wdMpqvaYX_4jgO-dOBqVAsQMQpihsIFNOAX5E",secret:"W5FeRrlFbgAz3i3d54dHnDm9okVhUeUIXZ6TyvZC_H4"});R.use(Fe);R.use(rd);R.use(dd);R.mount("#app");
