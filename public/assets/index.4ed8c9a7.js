var we=Object.defineProperty;var oe=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var ae=(t,e,i)=>e in t?we(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ie=(t,e)=>{for(var i in e||(e={}))xe.call(e,i)&&ae(t,i,e[i]);if(oe)for(var i of oe(e))Te.call(e,i)&&ae(t,i,e[i]);return t};import{a as de,l as Ie,o as r,c as l,b as o,F as _,r as w,t as b,d as re,e as m,f as j,n as S,g as T,w as C,h as A,v as B,i as N,j as g,k as v,m as D,p as y,_ as Ae,q as De,C as ce,D as ue,s as Be,u as Se,x as Ue,y as Le,z as $e,A as Oe,U as Fe,B as Me}from"./vendor.ef50627a.js";const je=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(a){if(a.ep)return;a.ep=!0;const s=i(a);fetch(a.href,s)}};je();const Ne="/api/";var Ee=de.create({withCredentials:!0});const M={get(t,e){return q(t,"GET",e)},post(t,e){return q(t,"POST",e)},put(t,e){return q(t,"PUT",e)},delete(t,e){return q(t,"DELETE",e)}};async function q(t,e="GET",i=null){try{return(await Ee({url:`${Ne}${t}`,method:e,data:i,params:e==="GET"?i:null})).data}catch(d){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data:`,i),console.dir(d),d.response&&d.response.status,d}}const le="user-updated",Re="",F=Ge();F.setup();function Ge(){var t=null;return{async setup(){t=Ie(Re)},on(i,d){t.on(i,d)},off(i,d=null){!t||(d?t.off(i,d):t.removeAllListeners(i))},emit(i,d){t.emit(i,d)},terminate(){t=null}}}const W="loggedinUser",O={login:Ze,logout:Ye,signup:He,getLoggedinUser:he,getUsers:qe,getById:Pe,remove:We,update:Je,getGuestUser:Ve};function qe(){return M.get("user")}async function Pe(t){return await M.get(`user/${t}`)}function We(t){return M.delete(`user/${t}`)}async function Je(t){return t=await M.put(`user/${t._id}`,t),he()._id===t._id&&J(t),t}async function Ze(t){const e=await M.post("auth/login",t);if(F.emit("set-user-socket",e._id),e)return J(e)}async function He(t){const e=await M.post("auth/signup",t);return F.emit("set-user-socket",e._id),J(e)}async function Ye(){return sessionStorage.removeItem(W),F.emit("unset-user-socket"),await M.post("auth/logout")}function J(t){return sessionStorage.setItem(W,JSON.stringify(t)),t}function he(){return JSON.parse(sessionStorage.getItem(W)||"null")}function Ve(){return{_id:"624298a9e48762573484a9e5",username:"Guest",fullname:"Guest User",imgUrl:"../../src/assets/svgs/guest.svg"}}var ge="/assets/board.17ad90ee.jpg",x=(t,e)=>{const i=t.__vccOpts||t;for(const[d,a]of e)i[d]=a;return i};const Xe={methods:{goToBoard(t){this.$emit("closeCmp"),this.$router.push(`/board/${t}`)}},computed:{boards(){return this.$store.getters.boards}}},ze={class:"board-recent"},Qe={class:"cmp-header"},Ke=o("p",{class:"cmp-container-title"},"Recent",-1),et=o("span",null,null,-1),tt=[et],st=o("hr",{class:"thin-hr"},null,-1),ot={class:"recent-boards-list"},at=["onClick"],it=["src"],rt={key:1,class:"recent-board-preview-img",src:ge},lt={class:"recent-board-title"};function nt(t,e,i,d,a,s){return r(),l("section",ze,[o("div",Qe,[Ke,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=c=>t.$emit("closeCmp"))},tt)]),st,o("div",ot,[(r(!0),l(_,null,w(s.boards,c=>(r(),l("div",{class:"recent-board-preview flex",key:c._id,onClick:n=>s.goToBoard(c._id)},[c.style.bgImg?(r(),l("img",{key:0,class:"recent-board-preview-img",src:c.style.bgImg},null,8,it)):(r(),l("img",rt)),o("p",lt,b(c.title),1)],8,at))),128))])])}var dt=x(Xe,[["render",nt]]);const ct={},ut={class:"list-slot-container"},ht={class:"list-title"},gt={class:"slot-options-list"};function pt(t,e){return r(),l("article",ut,[o("div",ht,[re(t.$slots,"title")]),o("div",gt,[re(t.$slots,"list")])])}var P=x(ct,[["render",pt]]),mt="/assets/groups.80c5d532.svg";const bt={data(){return{title:"",bgClr:"",bgImg:"",photos:["https://images.unsplash.com/photo-1648138754706-4fccd621a5f9?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDR8MzE3MDk5fHx8fHwyfHwxNjQ4NjUyNTQ3&ixlib=rb-1.2.1&q=80&w=400","https://images.unsplash.com/photo-1648537949908-25fc530b5f7d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDF8MzE3MDk5fHx8fHwyfHwxNjQ4NjUyNTQ3&ixlib=rb-1.2.1&q=80&w=400","https://images.unsplash.com/photo-1647960666864-01fdaed3431f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDE0fDMxNzA5OXx8fHx8Mnx8MTY0ODY1MjU0Nw&ixlib=rb-1.2.1&q=80&w=400"],isRequired:!1,bgColors:[{id:"l101",color:"#61bd4f",isSelected:!1},{id:"l102",color:"#f2d600",isSelected:!1},{id:"l103",color:"#ff9f1a",isSelected:!1},{id:"l104",color:"#eb5a46",isSelected:!1},{id:"l105",color:"#c377e0",isSelected:!1},{id:"l106",color:"#0079bf",isSelected:!1},{id:"l107",color:"#00c2e0",isSelected:!1},{id:"l108",color:"#51e898",isSelected:!1},{id:"l109",color:"#ff78cb",isSelected:!1},{id:"l110",color:"#344563",isSelected:!1}]}},methods:{goToBoard(t){this.$emit("closeCmp"),this.$router.push(`/board/${t}`)},requiredTitle(){this.title||(this.isRequired=!0)},async addBoard(){const t=await this.$store.dispatch({type:"addBoard",title:this.title,bgClr:this.bgClr,bgImg:this.bgImg});this.$router.push(`/board/${t}`),this.$emit("closeCmp")},selectBgClr(t){this.bgClr=t},selectPhoto(t){this.bgImg=t}},computed:{required(){return{required:this.isRequired}}},components:{listSlot:P}},ft={class:"create-board"},kt={class:"cmp-header"},vt=o("p",{class:"cmp-container-title"},"Create board",-1),_t=o("span",null,null,-1),yt=[_t],Ct=o("hr",{class:"thin-hr"},null,-1),wt={class:"choose-bg-container"},xt=o("p",{class:"choose-bg-title"},"Background",-1),Tt=o("img",{class:"bg-preview-img",src:mt},null,-1),It=[Tt],At=["src","onClick"],Dt=["onClick"],Bt={class:"add-title-container"},St=o("p",{class:"add-title-title"},"Board title",-1),Ut={key:0,class:"add-title-required"},Lt=["disabled"];function $t(t,e,i,d,a,s){const c=m("list-slot"),n=j("focus");return r(),l("section",ft,[o("div",kt,[vt,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=h=>t.$emit("closeCmp"))},yt)]),Ct,o("div",wt,[xt,o("div",{class:"bg-preview",style:S({backgroundColor:a.bgClr,backgroundImage:"url("+a.bgImg+")"})},It,4),T(c,null,{list:C(()=>[(r(!0),l(_,null,w(a.photos,(h,u)=>(r(),l("img",{key:u,class:"unsplash-result-small",src:h,alt:"img",onClick:f=>s.selectPhoto(h)},null,8,At))),128))]),_:1}),T(c,null,{list:C(()=>[(r(!0),l(_,null,w(a.bgColors,h=>(r(),l("div",{key:h.id,class:"label-option flex pointer",style:S({backgroundColor:h.color}),onClick:u=>s.selectBgClr(h.color)},null,12,Dt))),128))]),_:1})]),o("div",Bt,[St,A(o("input",{class:N(["add-title-input",s.required]),type:"text","onUpdate:modelValue":e[1]||(e[1]=h=>a.title=h),placeholder:"Enter title..",onBlur:e[2]||(e[2]=(...h)=>s.requiredTitle&&s.requiredTitle(...h))},null,34),[[B,a.title],[n]]),a.isRequired?(r(),l("p",Ut," \u{1F44B} Board title is required ")):g("",!0)]),o("button",{class:"create-board-btn",onClick:e[3]||(e[3]=(...h)=>s.addBoard&&s.addBoard(...h)),disabled:!a.title}," Create ",8,Lt)])}var pe=x(bt,[["render",$t]]);const Ot={props:{user:Object},methods:{},computed:{imgAvatar(){if(this.user.imgUrl)return this.user.imgUrl},nameAvatar(){if(!this.user.imgUrl){const e=this.user.fullname.split(" ");var t="";return e.forEach(i=>{t+=i.charAt(0)}),t.toUpperCase()}}}},Ft={class:"user-avatar"},Mt=["src"],jt={key:1,class:"user-avatar-name flex"};function Nt(t,e,i,d,a,s){return r(),l("div",Ft,[i.user.imgUrl?(r(),l("img",{key:0,class:"user-avatar-img",src:s.imgAvatar},null,8,Mt)):(r(),l("span",jt,b(s.nameAvatar),1))])}var E=x(Ot,[["render",Nt]]),Et="/assets/trello.92b2080b.svg",Rt="/assets/bell.adefe4be.svg";const Gt={data(){return{handles:{isRecent:!1,isCreateBoard:!1},isBlue:!1,isLogin:!1,loggedinUser:this.$store.getters.loggedinUser}},created(){},methods:{openCmp(t){if(typeof t!="string"){for(let e in this.handles)this.handles[e]=!1;return}if(this.handles[t]===!0)this.handles[t]=!1;else{for(let e in this.handles)this.handles[e]=!1;this.handles[t]=!0}}},computed:{bgc(){return{blue:this.isBlue}}},watch:{"$route.path":{immediate:!0,handler(){const t=this.$route.path;t==="/board"||t==="/login"?this.isBlue=!0:this.isBlue=!1,t!=="/"&&t!=="/login"&&(console.log(this.$store.getters.getGuestUser),this.loggedinUser=this.$store.getters.getGuestUser)}}},components:{boardRecent:dt,createBoard:pe,userAvatar:E}},qt={class:"app-header-inner flex"},Pt=o("img",{class:"logo-img",src:Et,alt:""},null,-1),Wt=o("h3",{class:"logo"},"Mellow",-1),Jt={class:"app-header-nav flex"},Zt={class:"app-header-left-nav flex"},Ht=D(" Workspace "),Yt=o("span",{class:"header-arrow-icon"},null,-1),Vt=[Ht,Yt],Xt=D(" Recent "),zt=o("span",{class:"header-arrow-icon"},null,-1),Qt=[Xt,zt],Kt=D(" Create "),es={key:0,class:"header-arrow-icon"},ts={class:"app-header-right-nav flex"},ss=D("Log in"),os=D("Sign up"),as=o("div",{class:"header-bell pointer"},[o("img",{src:Rt})],-1);function is(t,e,i,d,a,s){const c=m("router-link"),n=m("board-recent"),h=m("create-board"),u=m("user-avatar");return r(),l("header",{class:N(["app-header-container",s.bgc])},[o("div",qt,[T(c,{class:"logo-link flex",to:"/"},{default:C(()=>[Pt,Wt]),_:1}),o("nav",Jt,[o("div",Zt,[o("button",{class:"btn-header flex",onClick:e[0]||(e[0]=f=>t.$router.push("/board"))},Vt),o("button",{class:"btn-header flex",onClick:e[1]||(e[1]=f=>s.openCmp("isRecent"))},Qt),a.handles.isRecent?(r(),v(n,{key:0,onCloseCmp:s.openCmp},null,8,["onCloseCmp"])):g("",!0),o("button",{class:"btn-header flex",onClick:e[2]||(e[2]=f=>s.openCmp("isCreateBoard"))},[Kt,a.handles.isCreateBoard?(r(),l("span",es)):g("",!0)]),a.handles.isCreateBoard?(r(),v(h,{key:1,onCloseCmp:s.openCmp},null,8,["onCloseCmp"])):g("",!0)]),o("div",ts,[a.loggedinUser?g("",!0):(r(),v(c,{key:0,class:"login-btn",onClick:e[3]||(e[3]=f=>a.isLogin=!0),to:"/login"},{default:C(()=>[ss]),_:1})),a.loggedinUser?g("",!0):(r(),v(c,{key:1,class:"signup-btn",onClick:e[4]||(e[4]=f=>a.isLogin=!0),to:"/login"},{default:C(()=>[os]),_:1})),as,a.loggedinUser?(r(),v(u,{key:2,class:"pointer",user:a.loggedinUser},null,8,["user"])):g("",!0)])])])],2)}var rs=x(Gt,[["render",is]]);const ls={components:{appHeader:rs},data(){return{}},created(){this.$store.dispatch({type:"loadBoards"}),this.$store.dispatch({type:"loadGuestUser"})},methods:{},computed:{},unmounted(){}};function ns(t,e,i,d,a,s){const c=m("app-header"),n=m("router-view");return r(),l(_,null,[T(c),T(n)],64)}var ds=x(ls,[["render",ns]]),cs="/assets/mellow-cover.354e12f4.png";const us={components:{},data(){return{}},created(){},methods:{},computed:{},unmounted(){}},hs={class:"home-page-container"},gs={class:"title-container flex"},ps={class:"title-text"},ms=o("h1",{class:"home-logo"},[D(" Mellow helps teams "),o("span",null,"move work forward")],-1),bs=o("h3",{class:"title"},"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your your team works is unique - accomplish it all with Mellow",-1),fs=o("span",{class:"guest-login-button"},"Start as guest",-1),ks=o("img",{class:"home-page-img",src:cs},null,-1);function vs(t,e,i,d,a,s){const c=m("router-link");return r(),l("section",hs,[o("div",gs,[o("div",ps,[ms,bs,T(c,{class:"home-link",to:"/board"},{default:C(()=>[fs]),_:1})]),ks])])}var _s=x(us,[["render",vs]]);const ys={},Cs={class:"about"},ws=o("h1",null,"This is an about page",-1),xs=[ws];function Ts(t,e){return r(),l("div",Cs,xs)}var Is=x(ys,[["render",Ts]]);const $={saveToStorage:As,loadFromStorage:Ds,makeId:Ss,getRandomIntInclusive:Us,delay:Bs,isDarkColor:Ls};function As(t,e){localStorage.setItem(t,JSON.stringify(e)||null)}function Ds(t){let e=localStorage.getItem(t);return e?JSON.parse(e):void 0}function Bs(t=1500){return new Promise(e=>{setTimeout(e,t)})}function Ss(t=8){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=0;d<t;d++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}function Us(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)}function Ls(t){if(!t)return;t=t.substring(1);const e=parseInt(t,16),i=e>>16&255,d=e>>8&255,a=e>>0&255;var s=.2126*i+.7152*d+.0722*a;return s<100}const ne="boards_db",G="board",L={query:$s,getById:Os,remove:Fs,save:Ms,getEmptyBoard:Rs,getEmptyGroup:Ns,getEmptyTask:Es,uploadImg:js};Gs();async function $s(t={}){return await M.get(G,t)}async function Os(t){return await M.get(`${G}/${t}`)}async function Fs(t){return await M.delete(`${G}/${t}`)}async function Ms(t){return t._id?await M.put(`${G}/${t._id}`,t):await M.post(G,t)}async function js(t){const e="cajan_22",d="https://api.cloudinary.com/v1_1/cajan22a/image/upload",a=new FormData;return a.append("file",t.target.files[0]),a.append("upload_preset",e),fetch(d,{method:"POST",body:a}).then(s=>s.json()).then(s=>s).catch(s=>console.error(s))}function Ns(){return{id:"g-"+$.makeId(),title:"Enter Group Name",tasks:[],style:{}}}function Es(){return{id:"t-"+$.makeId(),title:"",createdAt:Date.now(),style:{},attachments:[]}}function Rs(){return{title:"",isFavorite:!1,createdAt:Date.now(),archivedAt:null,createdBy:O.getLoggedinUser()||O.getGuestUser(),style:{bgClr:"",bgImg:""},labels:[],members:[O.getGuestUser()],groups:[],activities:[]}}function Gs(){let t=$.loadFromStorage(ne);return(!t||!t.length)&&(t=[{_id:"b101",title:"Frontend Build",isFavorite:!1,createdAt:1648368189547,createdBy:{_id:"u101",fullname:"Abi Abambi",imgUrl:""},style:{bgImg:"../assets/imgs/1.jpg"},labels:[{id:"l101",color:"#61bd4f",title:"Done"},{id:"l102",color:"#f2d600",title:"Urgent"},{id:"l103",color:"#ff9f1a",title:"Immediate"},{id:"l104",color:"#eb5a46",title:""},{id:"l105",color:"#c377e0",title:""},{id:"l106",color:"#0079bf",title:""}],members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u106",fullname:"Almog Ben-Binyamin",username:"Almog",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2021-12-10_at_16.38.26_sft38h.jpg",mentions:[]},{_id:"u107",fullname:"Zviki zaks",username:"Zviki",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.17.15_rq2ja9.jpg",mentions:[]}],groups:[{id:"g101",title:"Immediate Todos",tasks:[{id:"c101",title:"Replace logo",style:{bgClr:"",bgImg:"",isFullCover:!1}},{id:"t-nMLMX279",title:"Remove excess pixels between group-list and scroll bar",createdAt:1648369020184,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],labelIds:["l102","l103","l104"],dueDate:{dueDate:"2022-03-26T08:20:13.473Z",isCompleted:!1}},{id:"t-TI4ANfXQ",title:"Render the photos to task preview",createdAt:1648369100551,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:["http://res.cloudinary.com/cajan22a/image/upload/v1648373054/books-g629e7f9c8_640_ihanz0.jpg"],labelIds:["l101"]}],style:{}},{id:"g102",title:"Components to Build",tasks:[{id:"c103",title:"Archive instead of Delete",style:{bgClr:"",bgImg:"",isFullCover:!1}},{id:"c104",title:"Proper layout and full CRUD of images",checklists:[{id:"YEtgF",title:"Checklist",todos:[{id:"325jX",title:"To Do 1",isDone:!1}]}],style:{bgClr:"26de81",bgImg:"",isFullCover:!1},members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u107",fullname:"Zviki zaks",username:"Zviki",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.17.15_rq2ja9.jpg",mentions:[]}],labelIds:["l102","l103","l104"],description:"Toggle should change image on task preview"},{id:"t-PiYcSy3j",title:"Cover photo, make sure the first added is the default",createdAt:1648369148256,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],description:"...subsequent ones can be changed manually to be the cover photos. Trello has this as its default, looks really nice",dueDate:{dueDate:"2022-03-27T09:30:00.000Z",isCompleted:!1}},{id:"c105",title:"Render and add comments",status:"in-progress",description:"This will need a full update when the sockets are added but for now work on basic adding and rendering",comments:[{id:"ZdPnm",txt:"also @yaronb please CR this",createdAt:1590999817436,byMember:{_id:"u101",fullname:"Tal Tarablus",imgUrl:"http://res.cloudinary.com/shaishar9/image/upload/v1590850482/j1glw3c9jsoz2py0miol.jpg"}}],checklists:[{id:"YEhmFk111",title:"Checklist",todos:[{id:"212jX111",title:"To Do 1",isDone:!0}]},{id:"YEhmF222",title:"Checklist",todos:[{id:"212jX222",title:"To Do 2",isDone:!1},{id:"212jX333",title:"To Do 3 is done",isDone:!0}]}],members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u106",fullname:"Almog Ben-Binyamin",username:"Almog",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2021-12-10_at_16.38.26_sft38h.jpg",mentions:[]},{_id:"u107",fullname:"Zviki zaks",username:"Zviki",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.17.15_rq2ja9.jpg",mentions:[]}],labelIds:["l107","l108","l103"],createdAt:1590999730348,byMember:{_id:"u101",username:"Tal",fullname:"Tal Tarablus",imgUrl:"http://res.cloudinary.com/shaishar9/image/upload/v1590850482/j1glw3c9jsoz2py0miol.jpg"},style:{bgClr:"",bgImg:"",isFullCover:!1},dueDate:{dueDate:"2022-03-29T21:40:27.228Z",isCompleted:!1},attachments:["http://res.cloudinary.com/cajan22a/image/upload/v1648363384/Headshot_Yoni_2021_gkcpbo.jpg"]},{id:"t-KkqBkx4T",title:"Checklists, super important to be next on our list, it adds a lot of value",createdAt:1648369395722,members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u106",fullname:"Almog Ben-Binyamin",username:"Almog",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2021-12-10_at_16.38.26_sft38h.jpg",mentions:[]}],style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[]},{id:"t-QzjP3br7",title:"Full CRUD of name and cards, without exception",createdAt:1648371305685,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],labelIds:["l102"]},{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared",createdAt:1648369658477,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],labelIds:["l105"],dueDate:{dueDate:"2022-03-28T08:25:53.455Z",isCompleted:!1}}],style:{}},{id:"g-05mqUAOd",title:"Feedback from Avior",tasks:[{id:"t-J6zOG2sn",title:"Take a few pictures from the internet for demo data",createdAt:1648368936226,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],description:"",dueDate:{dueDate:"2022-03-30T15:25:00.000Z",isCompleted:!1}},{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job",createdAt:1648369464026,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:["http://res.cloudinary.com/cajan22a/image/upload/v1648373021/dog-gd9e48bc3a_640_xonhij.jpg"],members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u106",fullname:"Almog Ben-Binyamin",username:"Almog",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2021-12-10_at_16.38.26_sft38h.jpg",mentions:[]},{_id:"u107",fullname:"Zviki zaks",username:"Zviki",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.17.15_rq2ja9.jpg",mentions:[]}],labelIds:["l105","l106"],description:"The meeting will be short, give a quick run through of the flow, get good feedback",dueDate:{dueDate:"2022-03-27T09:30:00.000Z",isCompleted:!1}}],style:{}},{id:"g-Wen1SpyZ",title:"Done",tasks:[{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6",createdAt:1648369068557,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:["http://res.cloudinary.com/cajan22a/image/upload/v1648373005/code-g6edc9f26e_640_bznsbp.jpg"],labelIds:["l101"],dueDate:{dueDate:"2022-03-26T16:20:00.000Z",isCompleted:!0}},{id:"t-7JKrUUZr",title:"Clean up demo data",createdAt:1648369083537,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[]}],style:{}},{id:"g-va8kuIE2",title:"For later this week",tasks:[{id:"t-0HhNSPhU",title:"Look at Quello for extra add-on ideas",createdAt:1648369345282,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],labelIds:["l105"]},{id:"t-U5qT2Gud",title:"Full working filter",createdAt:1648373985129,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],dueDate:{dueDate:"2022-03-28T14:00:00.000Z",isCompleted:!1},labelIds:["l102"]}],style:{}},{id:"g-HIKOO3fg",title:"Plan for Backend",tasks:[{id:"t-UEohipxO",title:"Make list of all potential bugs",createdAt:1648373155582,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],dueDate:{dueDate:"2022-03-31T09:25:01.470Z",isCompleted:!1}}],style:{}}],activities:[{id:"a101",txt:"Changed Color",createdAt:154514,byMember:{_id:"u101",fullname:"Abi Abambi",imgUrl:""},task:{id:"c101",title:"Replace Logo"}},{id:"rgQTUE70",txt:"save group title",createdAt:1648368203097,group:{id:"g101",title:"Group 1"}},{id:"tl2mQu8G",txt:"save group title",createdAt:1648368204208,group:{id:"g101",title:"Group 1"}},{id:"NnJYheAO",txt:"save group title",createdAt:1648368238800,group:{id:"g101",title:"Immediate Todos"}},{id:"1eThwGFa",txt:"save group title",createdAt:1648368247802,group:{id:"g102",title:"Group 2"}},{id:"TwyX7WVn",txt:"save group title",createdAt:1648368257335,group:{id:"g102",title:"Group 2"}},{id:"P9N2ZAx5",txt:"save group title",createdAt:1648368266639,group:{id:"g102",title:"Components to Build"}},{id:"ZJfHOeCx",txt:"save group title",createdAt:1648368294433,group:{id:"g-05mqUAOd",title:"Backend"}},{id:"a5o3Iidt",txt:"save group title",createdAt:1648368301129,group:{id:"g-Wen1SpyZ",title:"Done"}},{id:"yTPbecRE",txt:"save group title",createdAt:1648368321763,group:{id:"g-05mqUAOd",title:"Backend"}},{id:"GZ8MoaPj",txt:"save group title",createdAt:1648368341989,group:{id:"g-05mqUAOd",title:""}},{id:"w4QDHcjt",txt:"save group title",createdAt:1648368362600,group:{id:"g-05mqUAOd",title:""}},{id:"uDaQqQy5",txt:"save group title",createdAt:1648368473189,group:{id:"g-05mqUAOd",title:""}},{id:"6YEYWYEX",txt:"save group title",createdAt:1648368484876,group:{id:"g-05mqUAOd",title:"Feedback from Avior"}},{id:"87inrkd0",txt:"save group title",createdAt:1648368866764,group:{id:"g101",title:"Immediate Todos"}},{id:"uEUUMiyC",txt:"add task",createdAt:1648368936226,group:{id:"g-05mqUAOd",title:"Feedback from Avior"}},{id:"5IHDG42X",txt:"save group title",createdAt:1648368936285,group:{id:"g-Wen1SpyZ",title:"Done"}},{id:"7vJxYdQt",txt:"add task",createdAt:1648369020184,group:{id:"g-05mqUAOd",title:"Feedback from Avior"}},{id:"3D5DAGK1",txt:"add task",createdAt:1648369068558,group:{id:"g-Wen1SpyZ",title:"Done"}},{id:"GdJKjLTI",txt:"add task",createdAt:1648369083538,group:{id:"g-Wen1SpyZ",title:"Done"}},{id:"AK6NkjMO",txt:"add task",createdAt:1648369100552,group:{id:"g101",title:"Immediate Todos"}},{id:"LvhBJbun",txt:"add task",createdAt:1648369148256,group:{id:"g102",title:"Components to Build"}},{id:"ApT83fwp",txt:"Updated Description",groupId:"g102",createdAt:1648369196991,task:{id:"t-PiYcSy3j",title:"Cover photo, make sure the first added is the default, subsequent ones can be changed manually to be the cover photos"}},{id:"8inzUrXY",txt:"Updated due date",groupId:"g102",createdAt:1648369215650,task:{id:"t-PiYcSy3j",title:"Cover photo, make sure the first added is the default, subsequent ones can be changed manually to be the cover photos"}},{id:"1j6i4sgw",txt:"Change Labels",groupId:"g-Wen1SpyZ",createdAt:1648369233890,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"XMAfpcgo",txt:"Updated due date",groupId:"g-Wen1SpyZ",createdAt:1648369247655,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"YoopJ1OF",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648369250689,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"UVjL7gYu",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369267807,task:{id:"t-nMLMX279",title:"Remove exess pixels between group-list and scroll bar"}},{id:"ezQ6TWn9",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369269161,task:{id:"t-nMLMX279",title:"Remove exess pixels between group-list and scroll bar"}},{id:"W0pkvrro",txt:"Updated due date",groupId:"g-05mqUAOd",createdAt:1648369278955,task:{id:"t-nMLMX279",title:"Remove exess pixels between group-list and scroll bar"}},{id:"b5U2QiON",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369290122,task:{id:"t-nMLMX279",title:"Remove exess pixels between group-list and scroll bar"}},{id:"7It3Jw4j",txt:"save group title",createdAt:1648369329171,group:{id:"g-va8kuIE2",title:"For later this week"}},{id:"3netnQsO",txt:"add task",createdAt:1648369345283,group:{id:"g-va8kuIE2",title:"For later this week"}},{id:"5ec3PT7P",txt:"Change Labels",groupId:"g-va8kuIE2",createdAt:1648369350698,task:{id:"t-0HhNSPhU",title:"Look at Quello for extra add-on ideas"}},{id:"Txn8Q0s6",txt:"add task",createdAt:1648369395723,group:{id:"g102",title:"Components to Build"}},{id:"jZj19qyo",txt:"add task",createdAt:1648369464026,group:{id:"g-05mqUAOd",title:"Feedback from Avior"}},{id:"CQttIpht",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369471149,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"wTFoRgEN",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369472114,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"YuMVHdES",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369474619,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"sCe6KWcd",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369477254,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"pa94Rc8n",txt:"Updated Description",groupId:"g-05mqUAOd",createdAt:1648369511025,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"fk7jMogv",txt:"Updated due date",groupId:"g-05mqUAOd",createdAt:1648369564076,task:{id:"t-J6zOG2sn",title:"Take a few pi"}},{id:"GkbtB5Wj",txt:"save group title",createdAt:1648369582777,group:{id:"g102",title:"Components to Build"}},{id:"mUJFLJqX",txt:"add task",createdAt:1648369658477,group:{id:"g102",title:"Components to Build"}},{id:"PcqvtoZs",txt:"Change Labels",groupId:"g102",createdAt:1648369663901,task:{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared"}},{id:"2jM4ahQR",txt:"Change Labels",groupId:"g102",createdAt:1648369665708,task:{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared"}},{id:"j6q98tUs",txt:"Change Labels",groupId:"g102",createdAt:1648369667429,task:{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared"}},{id:"ISNmFvAR",txt:"Updated due date",groupId:"g102",createdAt:1648369677032,task:{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared"}},{id:"a60GcWLC",txt:"save group title",createdAt:1648369801257,group:{id:"g102",title:"Components to Build"}},{id:"aeWY4nye",txt:"Change Labels",groupId:"g102",createdAt:1648369821021,task:{id:"c104",title:"Do that"}},{id:"pbYblrs5",txt:"Updated Description",groupId:"g102",createdAt:1648369839129,task:{id:"c104",title:"Do that"}},{id:"r5smZnq2",txt:"add task",createdAt:1648371305686,group:{id:"g102",title:"Components to Build"}},{id:"xbx7PIlZ",txt:"Change Labels",groupId:"g102",createdAt:1648371313288,task:{id:"t-QzjP3br7",title:"Full CRUD of name and cards, without exception"}},{id:"n2Hh1vdy",txt:"updated due date status",groupId:"g102",createdAt:1648372421123,task:{id:"c105",title:"Render and add comments"}},{id:"nZsE6loT",txt:"updated due date status",groupId:"g102",createdAt:1648372423456,task:{id:"c105",title:"Render and add comments"}},{id:"wdOYGCff",txt:"Updated due date",groupId:"g-05mqUAOd",createdAt:1648372610248,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"Hd2beyNT",txt:"added image",groupId:"g-Wen1SpyZ",createdAt:1648373006079,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"sFpDOclC",txt:"added image",groupId:"g-05mqUAOd",createdAt:1648373021964,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"dX3EetsR",txt:"added image",groupId:"g101",createdAt:1648373055028,task:{id:"t-TI4ANfXQ",title:"Render the photos to task preview"}},{id:"hM8PG5Pw",txt:"save group title",createdAt:1648373139535,group:{id:"g-HIKOO3fg",title:"Plan for Backend"}},{id:"t8LDFpAF",txt:"add task",createdAt:1648373155582,group:{id:"g-HIKOO3fg",title:"Plan for Backend"}},{id:"LUSVaFui",txt:"Updated due date",groupId:"g-HIKOO3fg",createdAt:1648373163955,task:{id:"t-UEohipxO",title:"Make list of all potential bugs"}},{id:"YB2j4QxX",txt:"Change Labels",groupId:"g102",createdAt:1648373182175,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"avUgqMSz",txt:"Change Labels",groupId:"g102",createdAt:1648373185066,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"1oxnrHrf",txt:"Change Labels",groupId:"g102",createdAt:1648373185950,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"I8AfnCeK",txt:"Change Labels",groupId:"g102",createdAt:1648373186906,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"ZTDq4Kag",txt:"Change Labels",groupId:"g-Wen1SpyZ",createdAt:1648373683999,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"5UCdn61P",txt:"Change Labels",groupId:"g-Wen1SpyZ",createdAt:1648373687858,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"DLtWg9TA",txt:"Change Labels",groupId:"g101",createdAt:1648373886086,task:{id:"t-TI4ANfXQ",title:"Render the photos to task preview"}},{id:"hgAfsbaq",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648373919422,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"Zgxes34w",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648373921247,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"cpklmrLH",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648373941156,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"2HzfmzeT",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648373950964,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"PFGtTe2z",txt:"add task",createdAt:1648373985130,group:{id:"g-va8kuIE2",title:"For later this week"}},{id:"GvqmcnAR",txt:"Updated due date",groupId:"g-va8kuIE2",createdAt:1648374000642,task:{id:"t-U5qT2Gud",title:"Full working filter"}},{id:"EEOxWqqY",txt:"Change Labels",groupId:"g-va8kuIE2",createdAt:1648374006294,task:{id:"t-U5qT2Gud",title:"Full working filter"}},{id:"hEqZEU2e",txt:"Change Labels",groupId:"g102",createdAt:1648375093084,task:{id:"c105",title:"Render and add comments"}},{id:"ptnvPaty",txt:"Change Labels",groupId:"g102",createdAt:1648375269313,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"pSWmQ9Gt",txt:"Change Labels",groupId:"g102",createdAt:1648375269877,task:{id:"c104",title:"Proper layout and full CRUD of images"}}]}],$.saveToStorage(ne,t)),t}function qs(t,e){const i=({detail:d})=>{e(d)};return window.addEventListener(t,i),()=>{window.removeEventListener(t,i)}}function Ps(t,e){window.dispatchEvent(new CustomEvent(t,{detail:e}))}const Ws={on:qs,emit:Ps},Js={props:{imgUrls:Array},components:{},data(){return{isLoading:!1,input:null}},created(){},methods:{onAttachImg(t){this.isLoading=!0,this.$emit("attachImg",t),this.isLoading=!1},showLink(){console.log(this.input),console.log("not working till we fix img upload on second time")},closeCmp(){this.$emit("closeCmp")}},computed:{},unmounted(){}},Zs={class:"attachment-preview"},Hs=o("p",{class:"attach-from"},"Attach from...",-1),Ys=o("hr",{class:"thin-hr"},null,-1),Vs=o("div",{class:"pointer"},"Computer",-1),Xs=o("hr",{class:"seperate-line thin-hr"},null,-1),zs=o("div",{class:"attach-link-title"},"Attach a link",-1),Qs=o("div",{class:"attach-preview"},null,-1);function Ks(t,e,i,d,a,s){const c=j("focus");return r(),l("section",Zs,[o("button",{class:"add-task-close-cmp-btn",onClick:e[0]||(e[0]=(...n)=>s.closeCmp&&s.closeCmp(...n))},"X"),o("label",null,[o("input",{type:"file",onChange:e[1]||(e[1]=(...n)=>s.onAttachImg&&s.onAttachImg(...n)),hidden:""},null,32),Hs,Ys,Vs]),Xs,zs,A(o("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>a.input=n),class:"attach-input",type:"text",placeholder:"Paste any link here..."},null,512),[[c],[B,a.input]]),o("button",{class:"attach-link-btn",onClick:e[3]||(e[3]=(...n)=>s.showLink&&s.showLink(...n))},"Attach"),Qs])}var eo=x(Js,[["render",Ks]]);const to={name:"date-preview",props:{dueDate:Number},created(){this.date.dueDate=this.dueDate},data(){return{date:{dueDate:null,isCompleted:!1}}},methods:{saveDate(){console.log(this.date,"this is the date from the library"),this.$emit("saveDate",this.date)},closeCmp(){this.date.dueDate=this.dueDate,this.$emit("closeCmp")}}},so={class:"date-preview pointer"},oo={class:"date-header"},ao=o("h3",{class:"date-title"},"Dates",-1);function io(t,e,i,d,a,s){const c=m("v-date-picker");return r(),l("section",so,[o("div",oo,[ao,o("button",{class:"add-task-close-cmp-btn",onClick:e[0]||(e[0]=(...n)=>s.closeCmp&&s.closeCmp(...n))})]),T(c,{modelValue:a.date.dueDate,"onUpdate:modelValue":e[1]||(e[1]=n=>a.date.dueDate=n),mode:"dateTime","minute-increment":5},null,8,["modelValue"]),o("button",{class:"save-btn date-btn",onClick:e[2]||(e[2]=(...n)=>s.saveDate&&s.saveDate(...n))},"Save"),o("button",{class:"remove-date-btn date-btn",onClick:e[3]||(e[3]=(...n)=>s.closeCmp&&s.closeCmp(...n))},"Remove")])}var ro=x(to,[["render",io]]);const lo={props:{type:String},components:{},data(){return{}},created(){},methods:{closeCmp(){this.$emit("closeCmp")},remove(){this.$emit("remove")}},computed:{},unmounted(){}},no={class:"delete-preview"},co={class:"delete-header flex"},uo={class:"cmp-header-title"},ho=o("hr",{class:"thin-hr"},null,-1),go={class:"delete-content-container"},po={key:0},mo={key:1};function bo(t,e,i,d,a,s){return r(),l("section",no,[o("div",co,[o("span",uo,"Delete "+b(i.type)+"?",1),o("a",{onClick:e[0]||(e[0]=(...c)=>s.closeCmp&&s.closeCmp(...c)),class:"close-delete pointer"})]),ho,o("div",go,[i.type==="task"||i.type==="list"?(r(),l("p",po," All actions will be removed from the activity feed and you won\u2019t be able to re-open the card. There is no undo. ")):i.type==="label"?(r(),l("p",mo," There is no undo. This will remove this label from all cards and destroy its history. ")):g("",!0),o("a",{onClick:e[1]||(e[1]=(...c)=>s.remove&&s.remove(...c)),class:"confirm-delete"},"Delete")])])}var Z=x(lo,[["render",bo]]);const fo={props:{boardLabels:Array,taskLabelIds:Array},emits:["addLabelToTask","addLabelToBoard","updateBoardLabels"],components:{listSlot:P,deleteCmp:Z},data(){return{labels:[],filterTxt:"",defaultLabels:[{id:"l101",color:"#61bd4f",title:"",isSelected:!1},{id:"l102",color:"#f2d600",title:"",isSelected:!1},{id:"l103",color:"#ff9f1a",title:"",isSelected:!1},{id:"l104",color:"#eb5a46",title:"",isSelected:!1},{id:"l105",color:"#c377e0",title:"",isSelected:!1},{id:"l106",color:"#0079bf",title:"",isSelected:!1},{id:"l107",color:"#00c2e0",title:"",isSelected:!1},{id:"l108",color:"#51e898",title:"",isSelected:!1},{id:"l109",color:"#ff78cb",title:"",isSelected:!1},{id:"l110",color:"#344563",title:"",isSelected:!1}],isCreate:!1,isChange:!1,isRemove:!1,selectedLabel:null,labelToChange:{color:null,title:""}}},created(){this.aggregateLabels()},methods:{toggleLabel(t){this.$emit("addLabelToTask",t)},closeCmp(){this.$emit("closeCmp")},aggregateLabels(){this.labels=[],this.labels=this.boardLabels.map(t=>{var e;return t=JSON.parse(JSON.stringify(t)),(e=this.taskLabelIds)!=null&&e.includes(t.id)&&(t.inTask=!0),t})},openCreate(t){if(typeof t=="string"){this.labelToChange=JSON.parse(JSON.stringify(this.boardLabels.find(i=>i.id===t)));const e=this.defaultLabels.find(i=>i.color===this.labelToChange.color);this.selectLabel(e.id),this.isChange=!0;return}this.isCreate=!0},selectLabel(t){this.defaultLabels.forEach(i=>{i.isSelected=i.id===t});const e=this.defaultLabels.find(i=>i.id===t);this.labelToChange.color=e.color},async changeBoardLabels(){const t=JSON.parse(JSON.stringify(this.labelToChange));this.isCreate&&(t.id="l"+$.makeId(),console.log(t)),await this.$emit("updateBoardLabels",t),this.aggregateLabels(),this.isCreate=!1,this.isChange=!1},async removeLabelFromBoard(){const t=this.labelToChange.id;await this.$emit("removeLabelFromBoard",t),this.aggregateLabels(),this.isCreate=!1,this.isChange=!1,this.isRemove=!1}},computed:{getLabels(){const t=new RegExp(this.filterTxt,"i");return this.labels.filter(e=>t.test(e.title))},cmpTitle(){return this.isChange?"Change label":this.isCreate?"Create label":"Labels"},createBtn(){if(this.isCreate)return"Create";if(this.isChange)return"Save"}},watch:{taskLabelIds(){this.aggregateLabels()}},unmounted(){}},ko={key:0,class:"cmp-preview"},vo={class:"cmp-header"},_o=o("span",null,null,-1),yo=[_o],Co={class:"cmp-container-title"},wo=o("span",null,null,-1),xo=[wo],To=o("hr",{class:"thin-hr"},null,-1),Io={key:0,class:"select-label-container"},Ao={class:"choose-labels-container"},Do=o("p",{class:"labels-title"},"Labels",-1),Bo={class:"labels-list flex clean-list"},So=["onClick"],Uo={class:"label-title"},Lo={key:0,class:"v-icon"},$o=["onClick"],Oo=o("a",null,null,-1),Fo=[Oo],Mo={key:1,class:"create-label-container"},jo=o("p",{class:"labels-title"},"Name",-1),No=D("Select a color"),Eo=["onClick"],Ro={key:0,class:"v-icon"},Go={class:"create-label-buttons-container flex"};function qo(t,e,i,d,a,s){const c=m("list-slot"),n=m("delete-cmp"),h=j("focus");return r(),l(_,null,[a.isRemove?g("",!0):(r(),l("section",ko,[o("div",vo,[a.isCreate||a.isChange||a.isRemove?(r(),l("a",{key:0,class:"back-to-cmp-btn",onClick:e[0]||(e[0]=u=>(a.isCreate=!1,a.isChange=!1))},yo)):g("",!0),o("p",Co,b(s.cmpTitle),1),o("a",{class:"close-cmp-btn",onClick:e[1]||(e[1]=(...u)=>s.closeCmp&&s.closeCmp(...u))},xo)]),To,!a.isCreate&&!a.isChange&&!a.isRemove?(r(),l("section",Io,[A(o("input",{class:"label-input",type:"text","onUpdate:modelValue":e[2]||(e[2]=u=>a.filterTxt=u),placeholder:"Search labels.."},null,512),[[B,a.filterTxt],[h]]),o("div",Ao,[Do,o("ul",Bo,[(r(!0),l(_,null,w(s.getLabels,u=>(r(),l("li",{class:"label-option-container flex",key:u.id},[o("div",{class:"label-option flex pointer",style:S({backgroundColor:u.color}),onClick:f=>s.toggleLabel(u.id)},[o("span",Uo,b(u.title),1),u.inTask?(r(),l("span",Lo)):g("",!0)],12,So),o("span",{class:"change-label-btn",onClick:f=>s.openCreate(u.id)},Fo,8,$o)]))),128))])]),o("button",{class:"open-create-label-btn",onClick:e[3]||(e[3]=(...u)=>s.openCreate&&s.openCreate(...u))}," Create a new label ")])):(r(),l("section",Mo,[o("label",null,[jo,A(o("input",{type:"text",class:"label-input","onUpdate:modelValue":e[4]||(e[4]=u=>a.labelToChange.title=u)},null,512),[[B,a.labelToChange.title],[h]])]),T(c,null,{title:C(()=>[No]),list:C(()=>[(r(!0),l(_,null,w(a.defaultLabels,u=>(r(),l("div",{key:u.id,class:"label-option flex pointer",style:S({backgroundColor:u.color}),onClick:f=>s.selectLabel(u.id)},[u.isSelected?(r(),l("span",Ro)):g("",!0)],12,Eo))),128))]),_:1}),o("div",Go,[o("button",{class:"create-label-btn",onClick:e[5]||(e[5]=y((...u)=>s.changeBoardLabels&&s.changeBoardLabels(...u),["stop"]))},b(s.createBtn),1),a.isChange?(r(),l("button",{key:0,class:"delete-label-btn",onClick:e[6]||(e[6]=y(u=>a.isRemove=!0,["stop"]))}," Delete ")):g("",!0)])]))])),a.isRemove?(r(),v(n,{key:1,type:"label",onRemove:s.removeLabelFromBoard,onCloseCmp:s.closeCmp},null,8,["onRemove","onCloseCmp"])):g("",!0)],64)}var Po=x(fo,[["render",qo]]);const Wo={props:{boardMembers:Object,task:Object},components:{userAvatar:E},data(){return{members:[],filterTxt:""}},created(){this.aggregateMembers()},methods:{closeCmp(){this.$emit("closeCmp"),console.log("closing cmp")},toggleMemberInTask(t){console.log(),this.$emit("toggleMemberInTask",t)},aggregateMembers(){var e;this.members=[];let t=(e=this.task.members)==null?void 0:e.map(i=>i._id);this.boardMembers.forEach(i=>{t!=null&&t.includes(i._id)&&(i.isCheck=!0),this.members.push(JSON.parse(JSON.stringify(i)))})}},computed:{getMembers(){const t=new RegExp(this.filterTxt,"i");return this.members.filter(e=>t.test(e.fullname))}},watch:{task:{handler(){this.aggregateMembers()},deep:!0}},unmounted(){}},Jo={class:"members-preview"},Zo={class:"members-preview-header flex"},Ho=o("span",{class:"cmp-header-title"},"Members",-1),Yo=o("hr",null,null,-1),Vo={class:"members-container"},Xo={class:"input-container"},zo=o("h4",{class:"members-preview-title"},"Board members",-1),Qo={class:"board-members-container"},Ko=["onClick"],ea={class:"member-fullname"},ta={key:0,class:"member-check"},sa=o("div",null,null,-1);function oa(t,e,i,d,a,s){const c=m("user-avatar"),n=j("focus");return r(),l("section",Jo,[o("div",Zo,[Ho,o("a",{onClick:e[0]||(e[0]=(...h)=>s.closeCmp&&s.closeCmp(...h)),class:"close-members-preview pointer"},"X")]),Yo,o("div",Vo,[o("div",Xo,[A(o("input",{"onUpdate:modelValue":e[1]||(e[1]=h=>a.filterTxt=h),class:"members-filter",type:"text",placeholder:"Search Members"},null,512),[[n],[B,a.filterTxt]])]),zo,o("ul",Qo,[(r(!0),l(_,null,w(s.getMembers,(h,u)=>(r(),l("li",{class:"board-member pointer",key:u,onClick:f=>s.toggleMemberInTask(h)},[T(c,{user:h},null,8,["user"]),o("div",ea,b(h.fullname)+b(`(${h.username})`),1),h.isCheck?(r(),l("div",ta)):g("",!0)],8,Ko))),128)),sa])])])}var aa=x(Wo,[["render",oa]]);const ia={name:"cover-unsplash",components:{listSlot:P},props:{style:Object,title:String,attachments:Array},data(){return{currStyle:{bgClr:"",bgImg:"",isFullCover:!1,uploadedImg:""},photos:[],currTitle:"",searchingUnsplash:!1,searchResults:!1,search:"",photo_url:null,download_url:null,searchTerms:["Productivity","Perspective","Organization","Colorful","Nature","Business","Minimal","Space","Animals"],bgColors:[{id:"l101",color:"#61bd4f",isSelected:!1},{id:"l102",color:"#f2d600",isSelected:!1},{id:"l103",color:"#ff9f1a",isSelected:!1},{id:"l104",color:"#eb5a46",isSelected:!1},{id:"l105",color:"#c377e0",isSelected:!1},{id:"l106",color:"#0079bf",isSelected:!1},{id:"l107",color:"#00c2e0",isSelected:!1},{id:"l108",color:"#51e898",isSelected:!1},{id:"l109",color:"#ff78cb",isSelected:!1},{id:"l110",color:"#344563",isSelected:!1}]}},created(){this.currStyle=JSON.parse(JSON.stringify(this.style)),this.currTitle=this.title,this.searchPhoto(this.title)},methods:{searchPhoto(t){const e="Y2X6Y_wdMpqvaYX_4jgO-dOBqVAsQMQpihsIFNOAX5E";let i=20,d=t;d||(d=(this==null?void 0:this.search)||"business"),de.get(`https://api.unsplash.com/search/photos?page=1&per_page=${i}&query=${d}&client_id=${e}`).then(a=>{this.photos=a.data.results}).catch(a=>{console.log(a)})},searchPhotoWithButton(t){this.searchResults=!0,this.searchPhoto(t)},applyPhoto(t){var e;this.currStyle.uploadedImg=((e=t==null?void 0:t.urls)==null?void 0:e.regular)||t,this.currStyle.bgClr="",this.currStyle.bgImg="",this.searchResults=!1,this.searchingUnsplash=!1,this.search="",this.$emit("addStyle",this.currStyle)},waitSearch:Ae.debounce(function(){this.searchPhoto(),this.searchResults=!0,this.search=""},1e3),selectBgClr(t){this.currStyle.bgClr=t,this.currStyle.bgImg="",this.currStyle.uploadedImg="",this.$emit("addStyle",this.currStyle)},removeCover(){this.currStyle.bgClr="",this.currStyle.bgImg="",this.currStyle.uploadedImg="",this.$emit("addStyle",this.currStyle)},closeCmp(){this.$emit("closeCmp")},setFullCover(t){this.currStyle.isFullCover=t,this.$emit("addStyle",this.currStyle)},async onAttachImg(t){const e=await this.$store.dispatch({type:"attachImg",ev:t});this.currStyle.uploadedImg=e.url,this.currStyle.bgClr="",this.currStyle.bgImg="",this.$emit("addStyle",this.currStyle)}},computed:{pageTitle(){return this.searchingUnsplash?"Photo search":"Cover"},currCoverImg(){var t,e;return((t=this.style)==null?void 0:t.bgImg)||((e=this.style)==null?void 0:e.uploadedImg)||""},currCoverBg(){var e;return{"background-color":((e=this.style)==null?void 0:e.bgClr)||"#5E6C84"}},deletable(){if(this.style.bgImg||this.style.uploadedImg||this.style.bgClr)return!0}}},ra={class:"cmp-preview cover-unsplash-preview"},la={class:"cmp-header"},na=o("span",null,null,-1),da=[na],ca={class:"cmp-container-title"},ua=o("span",null,null,-1),ha=[ua],ga=o("hr",null,null,-1),pa={key:0,class:"main-cover-screen"},ma=o("p",{class:"labels-title"},"Size",-1),ba={class:"cover-size-select"},fa=["src"],ka=o("div",{class:"over-full-cover-select"},null,-1),va=o("div",{class:"dummy title"},null,-1),_a=o("div",{class:"dummy text"},null,-1),ya=["src"],Ca=o("div",{class:"over-full-cover-select"},null,-1),wa=o("div",{class:"dummy title"},null,-1),xa=o("div",{class:"dummy text"},null,-1),Ta=D("Color"),Ia=["onClick"],Aa=D("Attachments"),Da=["src","onClick"],Ba=o("div",{class:"unsplash-btn full-width-btn pointer"},"Upload a cover image",-1),Sa=D("Photos from Unsplash"),Ua=["src","onClick"],La={key:1,class:"search-unsplash-screen"},$a=D("Suggested searches"),Oa=["onClick"],Fa=D("Top photos"),Ma=["src","onClick"],ja={key:2,class:"unsplash-results-screen"},Na=["src","onClick"];function Ea(t,e,i,d,a,s){const c=m("list-slot");return r(),l("section",ra,[o("div",la,[a.searchingUnsplash?(r(),l("a",{key:0,class:"back-to-cmp-btn",onClick:e[0]||(e[0]=n=>(a.searchingUnsplash=!1,a.searchResults=!1))},da)):g("",!0),o("p",ca,b(s.pageTitle),1),o("a",{class:"close-cmp-btn",onClick:e[1]||(e[1]=(...n)=>s.closeCmp&&s.closeCmp(...n))},ha)]),ga,a.searchingUnsplash?g("",!0):(r(),l("section",pa,[ma,o("div",ba,[o("button",{class:"coverSelect pointer",onClick:e[2]||(e[2]=n=>s.setFullCover(!0))},[s.currCoverImg?(r(),l("img",{key:0,class:"coverSelectImg",src:s.currCoverImg,alt:""},null,8,fa)):g("",!0),s.currCoverBg?(r(),l("div",{key:1,class:"coverSelectImg",style:S(s.currCoverBg)},null,4)):g("",!0),ka,va,_a]),o("button",{class:"coverSelect pointer",onClick:e[3]||(e[3]=n=>s.setFullCover(!1))},[s.currCoverImg?(r(),l("img",{key:0,class:"coverSelectImg top",src:s.currCoverImg,alt:""},null,8,ya)):g("",!0),s.currCoverBg?(r(),l("div",{key:1,class:"coverSelectImg top",style:S(s.currCoverBg)},null,4)):g("",!0),Ca,wa,xa])]),s.deletable?(r(),l("div",{key:0,onClick:e[4]||(e[4]=(...n)=>s.removeCover&&s.removeCover(...n)),class:"unsplash-btn full-width-btn remove-cover pointer"},"Remove cover")):g("",!0),T(c,null,{title:C(()=>[Ta]),list:C(()=>[(r(!0),l(_,null,w(a.bgColors,n=>(r(),l("div",{key:n.id,class:"label-option flex pointer",style:S({backgroundColor:n.color}),onClick:h=>s.selectBgClr(n.color)},null,12,Ia))),128))]),_:1}),o("section",null,[T(c,null,{title:C(()=>[Aa]),list:C(()=>{var n;return[(r(!0),l(_,null,w((n=i.attachments)==null?void 0:n.slice(0,6),(h,u)=>(r(),l("img",{key:u,class:"unsplash-result-small pointer",src:h,alt:"img",onClick:f=>s.applyPhoto(h)},null,8,Da))),128))]}),_:1}),o("label",null,[o("input",{type:"file",onChange:e[5]||(e[5]=(...n)=>s.onAttachImg&&s.onAttachImg(...n)),hidden:""},null,32),Ba])]),T(c,null,{title:C(()=>[Sa]),list:C(()=>[(r(!0),l(_,null,w(a.photos.slice(0,6),n=>(r(),l("img",{key:n.id,class:"unsplash-result-small pointer",src:n.urls.thumb,alt:"img",onClick:h=>s.applyPhoto(n)},null,8,Ua))),128))]),_:1}),o("button",{class:"unsplash-btn full-width-btn pointer",onClick:e[6]||(e[6]=n=>a.searchingUnsplash=!0)}," Search for photos ")])),a.searchingUnsplash&&!a.searchResults?(r(),l("section",La,[A(o("input",{type:"text",placeholder:"Search Unsplash for photos",class:"unsplash-search","onUpdate:modelValue":e[7]||(e[7]=n=>a.search=n),onInput:e[8]||(e[8]=(...n)=>s.waitSearch&&s.waitSearch(...n))},null,544),[[B,a.search]]),T(c,null,{title:C(()=>[$a]),list:C(()=>[(r(!0),l(_,null,w(a.searchTerms,(n,h)=>(r(),l("button",{class:"unsplash-btn pointer",key:h,onClick:u=>s.searchPhotoWithButton(n)},b(n),9,Oa))),128))]),_:1}),T(c,null,{title:C(()=>[Fa]),list:C(()=>[(r(!0),l(_,null,w(a.photos.slice(0,12),n=>(r(),l("img",{key:n.id,class:"unsplash-result-small pointer",src:n.urls.thumb,alt:"img",onClick:h=>s.applyPhoto(n)},null,8,Ma))),128))]),_:1})])):g("",!0),a.searchResults?(r(),l("section",ja,[T(c,null,{list:C(()=>[(r(!0),l(_,null,w(a.photos,n=>(r(),l("img",{key:n.id,class:"unsplash-result-large pointer",src:n.urls.thumb,alt:"img",onClick:h=>s.applyPhoto(n)},null,8,Na))),128))]),_:1})])):g("",!0)])}var Ra=x(ia,[["render",Ea]]);const Ga={components:{},data(){return{title:"Checklist"}},created(){},methods:{closeCmp(){this.$emit("closeCmp")},addChecklist(){this.$emit("createChecklist",this.title)}},computed:{},unmounted(){}},qa={class:"create-checklist-container"},Pa={class:"checklist-header flex"},Wa=o("span",{class:"cmp-header-title"},"Add checklist",-1),Ja=o("hr",{class:"thin-hr"},null,-1),Za={class:"create-checklist-form"},Ha=o("label",{class:"form-title",for:"txt"},"Title",-1),Ya=o("button",{class:"create-form-done pointer"},"Add",-1);function Va(t,e,i,d,a,s){const c=j("focus");return r(),l("section",qa,[o("div",Pa,[Wa,o("a",{onClick:e[0]||(e[0]=(...n)=>s.closeCmp&&s.closeCmp(...n)),class:"close-checklist pointer"})]),Ja,o("div",Za,[o("div",null,[Ha,o("form",{onSubmit:e[2]||(e[2]=y(n=>s.addChecklist(a.title),["prevent"]))},[A(o("input",{class:"checklist-form","onUpdate:modelValue":e[1]||(e[1]=n=>a.title=n),type:"text",name:"txt",id:"txt"},null,512),[[B,a.title],[c]]),Ya],32)])])])}var Xa=x(Ga,[["render",Va]]);const za={props:{task:Object},components:{},data(){return{isCreateTodo:!1,newTodo:[],isCheckbox:[],isUpdateTodo:!1,editingTodoId:"",addNewTodo:""}},created(){},mounted(){},methods:{createTodo(t){this.addNewTodo=t,console.log("checkListId",t),console.log("this.addNewTodo",this.addNewTodo)},addTodo(t){console.log(this.newTodo),!(!this.newTodo||!this.newTodo.length)&&(this.$emit("addTodo",this.newTodo,t),this.newTodo="")},removeChecklist(t){this.$emit("removeChecklist",t)},updateTodo(t,e,i){i.stopPropagation(),console.log("updating!!!!"),console.log(e);const d=i.currentTarget.textContent;if(!d||!d.length){this.editingTodoId="",this.addNewTodo="";return}console.log("updating with good value !!!!"),this.$emit("updateTodo",t,e,d),this.editingTodoId="",this.addNewTodo=""},removeTodo(t,e){this.$emit("removeTodo",t,e)},openUpdateBar(t){console.log("open"),this.editingTodoId=t,this.addNewTodo=""},closeCreateTodo(){console.log("closing"),this.editingTodoId="",this.addNewTodo=""},checkboxValue(t,e,i){console.log("checklistId",t);const d=i.target.checked;console.log(i.target.checked),this.$emit("updateTodoDone",t,e,d)},stam(t){console.log(t)}},computed:{getTodos(){return this.task.checklists.filter(t=>{})},progressBar(){console.log(this.$refs.checkbox)}},unmounted(){}},Qa={key:0,class:"td-checklist-preview"},Ka={class:"checklist-title-container"},ei={class:"checklist-title"},ti=["onClick"],si={class:"checklist-todo-title"},oi=o("label",{class:"todo-content-edit pointer",for:"todo.id"},null,-1),ai=["onClick","checked"],ii=["onClick","onBlur","onUpdate:modelValue"],ri={key:0,class:"update-todo-btn-container"},li={class:"update-todo-btn flex"},ni=o("a",{class:"update-todo-text btn"},"Save",-1),di={class:"remove-todo-btn-wrapper"},ci=["onMousedown"],ui={key:0,class:"add-todo-container"},hi=["onClick"],gi={class:"todo-btn-container"},pi=["onClick"],mi={class:"close-btn-wrapper"};function bi(t,e,i,d,a,s){const c=j("focus");return i.task?(r(),l("section",Qa,[(r(!0),l(_,null,w(i.task.checklists,(n,h)=>(r(),l("div",{key:h},[o("div",Ka,[o("h3",ei,b(n.title),1),o("a",{class:"delete-checklist btn",onClick:y(u=>s.removeChecklist(n.id),["stop"])},"Delete",8,ti)]),(r(!0),l(_,null,w(n.todos,u=>(r(),l("div",{key:u.id},[o("div",si,[oi,o("input",{onClick:y(f=>s.checkboxValue(n.id,u.id,f),["stop"]),class:"checkbox-input pointer",type:"checkbox",name:"todo.isDone",id:"todo.id",value:"todo.isDone",checked:u.isDone},null,8,ai),A(o("textarea",{onClick:y(f=>s.openUpdateBar(u.id),["stop"]),class:"todo-clickable-area",onBlur:f=>s.updateTodo(n.id,u.id,f),spellcheck:"false",cols:"100",rows:"20","onUpdate:modelValue":f=>u.title=f,ref_for:!0,ref:"textarea"},b(u.title),41,ii),[[B,u.title]]),a.editingTodoId===u.id?(r(),l("div",ri,[o("div",li,[ni,o("span",{onClick:e[0]||(e[0]=(...f)=>s.closeCreateTodo&&s.closeCreateTodo(...f)),class:"close-update pointer"})]),o("div",di,[o("span",{onMousedown:f=>s.removeTodo(n.id,u.id),class:"remove-todo-btn pointer"},null,40,ci)])])):g("",!0)])]))),128)),a.addNewTodo?g("",!0):(r(),l("div",ui,[o("button",{class:"add-an-item btn",onClick:y(u=>s.createTodo(n.id),["stop"])},"Add an item",8,hi)])),a.addNewTodo===n.id?(r(),l("div",{key:1,class:"add-item-container",onBlur:e[3]||(e[3]=(...u)=>s.createTodo&&s.createTodo(...u))},[o("div",null,[A(o("textarea",{class:"add-item-input",placeholder:"Add an item",type:"text","onUpdate:modelValue":e[1]||(e[1]=u=>a.newTodo=u),cols:"30",rows:"10"},null,512),[[c],[B,a.newTodo]]),o("div",gi,[o("button",{class:"add-todo btn",onClick:y(u=>s.addTodo(n.id),["stop"])},"Add",8,pi),o("div",mi,[o("a",{onClick:e[2]||(e[2]=y((...u)=>s.closeCreateTodo&&s.closeCreateTodo(...u),["stop"])),class:"close-add-todo-btn pointer"})])])])],32)):g("",!0)]))),128))])):g("",!0)}var fi=x(za,[["render",bi]]);const ki={props:{activity:Object},data(){return{guestUser:O.getGuestUser()}},created(){},computed:{activityTime(){return De(new Date(this.activity.createdAt),new Date(Date.now()),{includeSeconds:!0,addSuffix:!0})}},components:{userAvatar:E}},vi={class:"activity-preview flex"},_i={class:"activity-details flex"},yi={class:"activity-username-txt-container flex"},Ci={class:"activity-username"},wi={class:"activity-txt"},xi={class:"activity-time"};function Ti(t,e,i,d,a,s){var n;const c=m("user-avatar");return r(),l("section",vi,[T(c,{user:i.activity.createdBy||a.guestUser},null,8,["user"]),o("div",_i,[o("div",yi,[o("h3",Ci,b(((n=i.activity.createdBy)==null?void 0:n.fullname)||a.guestUser.fullname),1),o("p",wi,b(i.activity.txt),1)]),o("p",xi,b(s.activityTime),1)])])}var me=x(ki,[["render",Ti]]);const Ii={name:"attached-img-preview",props:{attachment:String,idx:Number},methods:{deleteAttachment(){this.$emit("deleteAttachment",this.idx)},makeCover(){this.$emit("makeCover",this.attachment)}}},Ai={class:"attached-img-preview"},Di=["src"],Bi={class:"attachment-options-container flex"},Si=o("div",{class:"make-cover-icon"},null,-1);function Ui(t,e,i,d,a,s){return r(),l("section",Ai,[o("img",{src:i.attachment,alt:""},null,8,Di),o("div",Bi,[Si,o("p",{class:"make-cover pointer",onClick:e[0]||(e[0]=(...c)=>s.makeCover&&s.makeCover(...c))},"Make Cover"),o("p",{class:"pointer",onClick:e[1]||(e[1]=(...c)=>s.deleteAttachment&&s.deleteAttachment(...c))},"Delete")])])}var Li=x(Ii,[["render",Ui]]),$i="/assets/arrow-down.9f6ee7c2.svg";const Oi={name:"task-details",emits:["updateBoard","addLabelToBoard","updateBoardLabels"],data(){return{task:null,imgUrls:[],currBoard:null,currGroup:null,addingDescription:!1,newDescription:"",detailsShown:!1,checklistTitle:"",handles:{isLabel:!1,isAttachOn:!1,isDatesOn:!1,isMembers:!1,isCover:!1,isDelete:!1,isChecklist:!1}}},async created(){await this.loadTask(),F.on("someone updated",this.boardUpdated)},unmounted(){F.off("someone updated",this.boardUpdated)},methods:{async loadTask(){const{boardId:t,groupId:e,taskId:i}=this.$route.params;this.currBoard=await this.$store.dispatch({type:"loadBoard",boardId:t}),this.currGroup=this.currBoard.groups.find(a=>a.id===e);const d=this.currGroup.tasks.find(a=>a.id===i);this.task=JSON.parse(JSON.stringify(d)),this.newDescription=this.task.description,this.imgUrls=this.task.attachments},boardUpdated(){this.loadTask()},moveToBoard(){const t=this.$store.getters.getCurrBoard;this.$router.push(`/board/${t._id}`)},async addStyle(t){this.task.style=t,await this.saveTask("Updated style"),this.loadTask()},openCmp(t){for(let e in this.handles)this.handles[e]=!1;this.handles[t]=!0},closeCmp(){for(let t in this.handles)this.handles[t]=!1},async saveTaskTitle(t){const e=t.currentTarget.textContent;this.task.title=e,await this.saveTask("Change task title"),this.loadTask()},async saveDate(t){this.task.dueDate=t,await this.saveTask("Updated due date"),this.closeCmp(),this.loadTask()},async saveTask(t){const e={id:$.makeId(),txt:t,groupId:this.currGroup.id,createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser,task:{id:this.task.id,title:this.task.title}},i=await this.$store.dispatch({type:"saveTask",boardId:this.currBoard._id,groupId:this.currGroup.id,task:this.task,activity:e});this.$emit("updateBoard",i)},addDescription(){this.task.description="",this.addingDescription=!0},clearForm(){this.addingDescription=!1,this.newDescription=""},async saveDescription(){this.task.description=this.newDescription,await this.saveTask("Updated Description"),this.loadTask()},async addLabelToTask(t){this.task.labelIds||(this.task.labelIds=[]),this.task.labelIds.includes(t)?this.task.labelIds=this.task.labelIds.filter(e=>e!==t):this.task.labelIds.push(t),await this.saveTask("Change Labels"),this.loadTask()},async removeLabelFromBoard(t){console.log("task",t);const e=this.currBoard.labels.findIndex(i=>i.id===t);console.log("task",e),this.currBoard.labels.splice(e,1),await this.saveBoard("Remove label")},async updateBoardLabels(t){const e=this.currBoard.labels.findIndex(i=>i.id===t.id);e===-1?this.currBoard.labels.push(t):this.currBoard.labels.splice(e,1,t),await this.saveBoard("Change labels")},async saveBoard(t){const e={id:$.makeId(),txt:t,createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser};this.currBoard.activities.push(e);const i=await this.$store.dispatch({type:"saveBoard",board:JSON.parse(JSON.stringify(this.currBoard))});await this.$emit("updateBoard",i)},async toggleMemberInTask(t){this.task.members||(this.task.members=[]);const e=this.task.members.findIndex(i=>i._id===t._id);e===-1?(this.task.members.push(t),this.task.members.isCheck=!0):(this.task.members.splice(e,1),this.task.members.isCheck=!1),await this.saveTask("Added member"),this.loadTask()},async toggleDueDateDone(){this.task.dueDate.isCompleted=!this.task.dueDate.isCompleted,await this.saveTask("updated due date status"),this.loadTask()},async attachImg(t){const e=await this.$store.dispatch({type:"attachImg",ev:t});this.task.attachments||(this.task.attachments=[]),this.task.attachments.push(e.url),this.task.style.uploadedImg="",this.task.style.bgClr="",this.task.style.bgImg=e.url,await this.saveTask("Added image"),this.loadTask()},async deleteAttachment(t){this.task.attachments.splice(t,1),await this.saveTask("Deleted attachment"),this.loadTask()},async makeCover(t){this.task.style.bgImg=t,this.task.style.bgClr="",this.task.style.uploadedImg="",await this.saveTask("Updated cover photo"),this.loadTask()},async removeTask(t){const e={id:$.makeId(),txt:t,groupId:this.currGroup.id,createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser,task:{id:this.task.id,title:this.task.title}},i=await this.$store.dispatch({type:"removeTask",boardId:this.currBoard._id,groupId:this.currGroup.id,task:this.task,activity:e});this.$emit("updateBoard",i),this.moveToBoard()},setActivities(){this.taskActivities=this.currBoard.activities.filter(t=>{var e;return((e=t.task)==null?void 0:e.id)===this.task.id})},async createChecklist(t){this.task.checklists||(this.task.checklists=[]);const e={id:$.makeId(),title:t,todos:[]};this.task.checklists.push(e),await this.saveTask("Added checklist"),this.loadTask(),this.closeCmp()},async addTodo(t,e){if(!t)return;this.task.checklists.find(d=>d.id===e).todos.push({id:$.makeId(),title:t,isDone:!1}),await this.saveTask("Added todo"),console.log("task",this.task),this.loadTask()},async removeChecklist(t){const e=this.task.checklists.findIndex(i=>i.id===t);this.task.checklists.splice(e,1),await this.saveTask("Removed checklist"),this.loadTask()},async updateTodo(t,e,i){const d=this.task.checklists.find(c=>c.id===t),a=d.todos.find(c=>c.id===e);if(!a)return;a.title=i;const s=d.todos.findIndex(c=>c.id===e);d.todos.splice(s,1,a),await this.saveTask("Updated todo"),this.loadTask()},async updateTodoDone(t,e,i){const d=this.task.checklists.find(c=>c.id===t),a=d.todos.find(c=>c.id===e);a.isDone=i;const s=d.todos.findIndex(c=>c.id===e);d.todos.splice(s,1,a),await this.saveTask("Updated todo"),this.loadTask()},async removeTodo(t,e){const i=this.task.checklists.find(a=>a.id===t),d=i.todos.findIndex(a=>a.id===e);console.log(d),i.todos.splice(d,1),await this.saveTask("removeTodo"),this.loadTask()}},computed:{areDetailsShown(){return this.detailsShown?"Hide Details":"Show Details"},labelsToDisplay(){return this.currBoard.labels.filter(e=>{if(this.task.labelIds.includes(e.id))return e})},formattedDate(){var t=new Date(this.task.dueDate.dueDate);return t.toString().slice(4,21)},dueDateCheckBox(){return this.task.dueDate.isCompleted?"../../src/assets/svgs/full-checkbox.svg":"../../src/assets/svgs/empty-checkbox.svg"},overdue(){if(new Date(this.task.dueDate.dueDate).getTime()<Date.now())return!0},coverStyle(){return this.task.style.uploadedImg?{"background-image":`url(${this.task.style.uploadedImg})`,height:"160px","background-color":"#ccd6e0","border-radius":"3px 3px 0 0"}:this.task.style.bgImg?{"background-image":`url(${this.task.style.bgImg})`,height:"160px","background-color":"#ccd6e0","border-radius":"3px 3px 0 0"}:this.task.style.bgClr?{"background-color":this.task.style.bgClr,height:"100px","border-radius":"3px 3px 0 0"}:{display:"none"}},taskActivities(){return this.currBoard.activities.filter(t=>{var e;return((e=t.task)==null?void 0:e.id)===this.task.id})}},components:{userAvatar:E,attachmentPreview:eo,datePreview:ro,labelPreview:Po,membersPreview:aa,coverUnsplash:Ra,deleteCmp:Z,createChecklist:Xa,checklistActive:fi,activityPreview:me,attachedImgPreview:Li}},Fi={class:"task-details-main-content"},Mi={key:0,class:"task-details-container"},ji={class:"task-title-container"},Ni={class:"task-group-title"},Ei={class:"show-member-label flex"},Ri={key:0,class:"edit-members-container"},Gi=o("p",{class:"members-header"},"Members",-1),qi={class:"members-container flex"},Pi={key:1,class:"edit-labels-container"},Wi=o("p",{class:"labels-header"},"Labels",-1),Ji={class:"labels-container flex"},Zi={key:2,class:"due-date-container"},Hi=o("p",{class:"due-date-title"},"Due date",-1),Yi={class:"displayed-date-checkbox"},Vi=["src"],Xi={key:0,class:"completed-overdue-label l101-label"},zi={key:1,class:"completed-overdue-label l104-label"},Qi={class:"edit-description-container"},Ki={key:0,class:"description-container"},er={class:"description-header-container flex"},tr=o("p",{class:"description-header"},"Description",-1),sr={class:"task-description"},or={key:1,class:"add-edit-description-container"},ar=o("p",{class:"description-header"},"Description",-1),ir={key:1,class:"add-description-container"},rr={class:"add-description-buttons-container flex"},lr={key:0,class:"img-container"},nr=o("p",{class:"img-container-header"},"Attachments",-1),dr={class:"activities"},cr={class:"activity-details-header"},ur=o("p",{class:"activity-header"},"Activity",-1),hr={key:0,class:"activities-list"},gr={key:1},pr=o("p",{class:"add-task-buttons-title"},"Add to card",-1),mr={class:"just-buttons-container"},br=o("h3",{class:"td-actions"},"Actions",-1),fr=o("span",{class:"td-delete-icon"},null,-1),kr=o("span",null,"Delete",-1),vr=[fr,kr];function _r(t,e,i,d,a,s){var H,Y,V,X,z,Q,K,ee,te;const c=m("user-avatar"),n=m("attached-img-preview"),h=m("checklist-active"),u=m("activity-preview"),f=m("members-preview"),U=m("label-preview"),k=m("create-checklist"),I=m("date-preview"),ve=m("attachment-preview"),_e=m("cover-unsplash"),ye=m("delete-cmp"),Ce=j("focus");return r(),l("div",{class:"task-details-dark",onClick:e[23]||(e[23]=(...p)=>s.moveToBoard&&s.moveToBoard(...p))},[o("section",{onClick:e[22]||(e[22]=y(()=>{},["stop"])),class:"task-details-page"},[o("button",{class:"go-back-btn",onClick:e[0]||(e[0]=(...p)=>s.moveToBoard&&s.moveToBoard(...p))}),a.task?(r(),l("div",{key:0,style:S(s.coverStyle),class:"task-cover-img"},null,4)):g("",!0),o("div",Fi,[a.task?(r(),l("div",Mi,[o("h3",ji,[o("p",{class:"task-title",contenteditable:"true",onBlur:e[1]||(e[1]=(...p)=>s.saveTaskTitle&&s.saveTaskTitle(...p))},b(a.task.title),33)]),o("p",Ni,"in list "+b(a.currGroup.title),1),o("section",Ei,[(H=a.task.members)!=null&&H.length?(r(),l("div",Ri,[Gi,o("div",qi,[(r(!0),l(_,null,w(a.task.members,p=>(r(),v(c,{"v-if":a.task.members,key:p._id,user:p},null,8,["v-if","user"]))),128)),o("button",{class:"avatar-btn flex",onClick:e[2]||(e[2]=y(p=>s.openCmp("isMembers"),["stop"]))},"+")])])):g("",!0),(Y=a.task.labelIds)!=null&&Y.length?(r(),l("div",Pi,[Wi,o("div",Ji,[(r(!0),l(_,null,w(s.labelsToDisplay,p=>(r(),l("div",{key:p.id,class:"label-show flex",onClick:e[3]||(e[3]=y(se=>s.openCmp("isLabel"),["stop"])),style:S({backgroundColor:p.color})},b(p.title),5))),128)),o("button",{class:"label-show-btn flex",onClick:e[4]||(e[4]=y(p=>s.openCmp("isLabel"),["stop"]))},"+")])])):g("",!0),a.task.dueDate?(r(),l("div",Zi,[Hi,o("div",Yi,[o("img",{onClick:e[5]||(e[5]=(...p)=>s.toggleDueDateDone&&s.toggleDueDateDone(...p)),class:"due-date-checkbox",src:s.dueDateCheckBox,alt:""},null,8,Vi),o("span",null,b(s.formattedDate),1),a.task.dueDate.isCompleted?(r(),l("span",Xi,"Completed")):g("",!0),s.overdue&&!a.task.dueDate.isCompleted?(r(),l("span",zi,"Overdue")):g("",!0),o("img",{onClick:e[6]||(e[6]=(...p)=>t.toggleDates&&t.toggleDates(...p)),src:$i,alt:""})])])):g("",!0)]),o("section",Qi,[a.task.description?(r(),l("div",Ki,[o("div",er,[tr,o("button",{onClick:e[7]||(e[7]=(...p)=>s.addDescription&&s.addDescription(...p)),class:"edit-description-btn btn"},"Edit")]),o("p",sr,b(a.task.description),1)])):(r(),l("div",or,[ar,a.addingDescription?(r(),l("div",ir,[A(o("textarea",{"onUpdate:modelValue":e[9]||(e[9]=p=>a.newDescription=p),class:"description-text-area",placeholder:"Add a more detailed description..."},null,512),[[Ce],[B,a.newDescription]]),o("div",rr,[o("button",{class:"save-description-btn btn",onClick:e[10]||(e[10]=(...p)=>s.saveDescription&&s.saveDescription(...p))},"Save"),o("button",{class:"delete-description-btn",onClick:e[11]||(e[11]=(...p)=>s.clearForm&&s.clearForm(...p))})])])):(r(),l("div",{key:0,class:"fake-text-area",onClick:e[8]||(e[8]=(...p)=>s.addDescription&&s.addDescription(...p))},"Add a more detailed description..."))]))]),((X=(V=a.task)==null?void 0:V.attachments)==null?void 0:X.length)&&((Q=(z=a.task)==null?void 0:z.attachments)==null?void 0:Q.length)>0?(r(),l("section",lr,[nr,(r(!0),l(_,null,w(a.task.attachments,(p,se)=>(r(),v(n,{key:se,attachment:p,onMakeCover:s.makeCover,onDeleteAttachment:s.deleteAttachment},null,8,["attachment","onMakeCover","onDeleteAttachment"]))),128))])):g("",!0),(K=a.task.checklists)!=null&&K.length?(r(),v(h,{key:1,task:a.task,onAddTodo:s.addTodo,onRemoveChecklist:s.removeChecklist,onUpdateTodo:s.updateTodo,onUpdateTodoDone:s.updateTodoDone,onRemoveTodo:s.removeTodo},null,8,["task","onAddTodo","onRemoveChecklist","onUpdateTodo","onUpdateTodoDone","onRemoveTodo"])):g("",!0),o("section",dr,[o("div",cr,[ur,(ee=a.currBoard.activities)!=null&&ee.length?(r(),l("button",{key:0,class:"details-shown-btn btn",onClick:e[12]||(e[12]=p=>a.detailsShown=!a.detailsShown)},b(s.areDetailsShown),1)):g("",!0)]),a.detailsShown?(r(),l("div",hr,[(r(!0),l(_,null,w(s.taskActivities,p=>(r(),v(u,{key:p.id,activity:p},null,8,["activity"]))),128))])):g("",!0)])])):(r(),l("div",gr,"Loading...")),o("nav",{onClick:e[21]||(e[21]=y(()=>{},["stop"])),class:"add-task-buttons-container"},[pr,o("div",mr,[o("button",{onClick:e[13]||(e[13]=y(p=>s.openCmp("isMembers"),["stop"])),class:"members-btn btn",title:"Members"},"Members"),a.handles.isMembers?(r(),v(f,{key:0,boardMembers:a.currBoard.members,task:a.task,onCloseCmp:s.closeCmp,onToggleMemberInTask:s.toggleMemberInTask},null,8,["boardMembers","task","onCloseCmp","onToggleMemberInTask"])):g("",!0),o("button",{onClick:e[14]||(e[14]=y(p=>s.openCmp("isLabel"),["stop"])),class:"labels-btn btn",title:"Labels"},"Labels"),a.handles.isLabel?(r(),v(U,{key:1,boardLabels:a.currBoard.labels,taskLabelIds:a.task.labelIds,onCloseCmp:s.closeCmp,onAddLabelToTask:s.addLabelToTask,onRemoveLabelFromBoard:s.removeLabelFromBoard,onUpdateBoardLabels:s.updateBoardLabels},null,8,["boardLabels","taskLabelIds","onCloseCmp","onAddLabelToTask","onRemoveLabelFromBoard","onUpdateBoardLabels"])):g("",!0),o("button",{class:"checklist-btn btn",title:"Checklist",onClick:e[15]||(e[15]=y(p=>s.openCmp("isChecklist"),["stop"]))},"Checklist"),a.handles.isChecklist?(r(),v(k,{key:2,onCloseCmp:s.closeCmp,onCreateChecklist:s.createChecklist},null,8,["onCloseCmp","onCreateChecklist"])):g("",!0),o("button",{onClick:e[16]||(e[16]=y(p=>s.openCmp("isDatesOn"),["stop"])),class:"dates-btn btn",title:"Dates"},"Dates"),a.handles.isDatesOn?(r(),v(I,{key:3,dueDate:((te=a.task.dueDate)==null?void 0:te.dueDate)||Date.now(),onSaveDate:s.saveDate,onCloseCmp:s.closeCmp},null,8,["dueDate","onSaveDate","onCloseCmp"])):g("",!0),o("button",{onClick:e[17]||(e[17]=y(p=>s.openCmp("isAttachOn"),["stop"])),class:"attachment-img btn",title:"Attachment"},"Attachment"),a.handles.isAttachOn?(r(),v(ve,{key:4,imgUrls:a.imgUrls,onAttachImg:s.attachImg,onCloseCmp:s.closeCmp},null,8,["imgUrls","onAttachImg","onCloseCmp"])):g("",!0),o("button",{onClick:e[18]||(e[18]=y(p=>s.openCmp("isCover"),["stop"])),class:"cover-btn btn font-cmp-btn",title:"Cover"},"Cover"),a.handles.isCover?(r(),v(_e,{key:5,style:S(a.task.style),title:a.task.title,attachments:a.task.attachments,onCloseCmp:s.closeCmp,onAddStyle:s.addStyle},null,8,["style","title","attachments","onCloseCmp","onAddStyle"])):g("",!0)]),br,o("a",{onClick:e[19]||(e[19]=y(p=>s.openCmp("isDelete"),["stop"])),class:"td-delete-btn btn pointer"},vr),a.handles.isDelete?(r(),v(ye,{key:0,type:"task",onRemove:e[20]||(e[20]=p=>s.removeTask("removed task")),onCloseCmp:s.closeCmp},null,8,["onCloseCmp"])):g("",!0)])])])])}var be=x(Oi,[["render",_r]]);const yr={props:{task:Object,groupId:String,isLabelTitle:Boolean},data(){return{boardId:null}},components:{userAvatar:E,taskDetails:be},methods:{toTaskDetails(t,e,i){console.log(i),this.$router.push(`/board/${t}/${e}/${i}`)},toggleLabelTitle(){this.$emit("toggleLabelTitle")}},created(){const{boardId:t}=this.$route.params;this.boardId=t},computed:{formattedDate(){var t=new Date(this.task.dueDate.dueDate);return t.toString().slice(4,10)},isTaskOverdue(){if(new Date(this.task.dueDate.dueDate).getTime()<Date.now())return this.task.dueDate.isCompleted?"l101-label":"l104-label"},isChecklistDone(){var i;let t=0,e=0;return(i=this.task.checklists)==null||i.forEach(d=>{t+=d.todos.length,d.todos.filter(a=>{a.isDone&&e++})}),t===e},labelsToDisplay(){return this.$store.getters.getCurrBoard.labels.filter(e=>{if(this.task.labelIds.includes(e.id))return e})},attachmentCount(){var t;return(t=this.task.attachments)==null?void 0:t.length},checkListsCount(){var i,d;var t=0;(i=this.task.checklists)==null||i.forEach(a=>t+=a.todos.length);var e=0;return(d=this.task.checklists)==null||d.forEach(a=>{e+=a.todos.filter(c=>c.isDone).length}),`${e}/${t}`},openLabel(){return{open:this.isLabelTitle}},taskImgUrl(){return this.task.style.uploadedImg?this.task.style.uploadedImg:this.task.style.bgImg?this.task.style.bgImg:void 0},fullCoverStyle(){var t;return this.task.style.uploadedImg?{backgroundImage:`url(${this.task.style.uploadedImg})`,height:"220px",backgroundColor:"#ccd6e0"}:this.task.style.bgImg?{backgroundImage:`url(${this.task.style.bgImg})`,height:"220px",backgroundColor:"#ccd6e0"}:{"background-color":((t=this.task.style)==null?void 0:t.bgClr)||"#FFFFFF",height:"54px"}},fullCoverTxt(){return this.task.style.uploadedImg||this.task.style.bgImg?"is-img":$.isDarkColor(this.task.style.bgClr)?"is-dark-bg":"is-light-bg"},coverStyle(){return this.task.style.bgClr?{"background-color":this.task.style.bgClr,height:"32px"}:{display:"none"}}}},Cr={key:1,class:"top-cover-selected"},wr=["src"],xr={class:"task-preview-icons"},Tr={class:"task-content"},Ir={class:"task-snapshot flex"},Ar={key:0,class:"description-img-preview",title:"Card description"},Dr=o("span",{class:""},null,-1),Br={key:2,class:"attachment-img-preview",title:"Attachment"},Sr={class:"user-avatar-pos flex"};function Ur(t,e,i,d,a,s){var n,h,u,f,U;const c=m("user-avatar");return r(),l("div",{onClick:e[2]||(e[2]=k=>s.toTaskDetails(this.boardId,this.groupId,this.task.id)),class:"task-preview-container"},[this.task.style.isFullCover?(r(),l("div",{key:0,style:S(s.fullCoverStyle),class:"full-cover-selected"},[o("p",{class:N([s.fullCoverTxt,"full-cover-title"])},b(i.task.title),3)],4)):(r(),l("div",Cr,[o("div",{style:S(s.coverStyle),class:"task-preview-cover"},null,4),s.taskImgUrl&&!i.task.style.bgClr?(r(),l("img",{key:0,class:"top-cover-img",src:s.taskImgUrl,alt:"",draggable:"false"},null,8,wr)):g("",!0),o("div",xr,[(n=i.task.labelIds)!=null&&n.length?(r(),l("div",{key:0,class:"labels-container",onClick:e[1]||(e[1]=y((...k)=>t.showLabelTitle&&t.showLabelTitle(...k),["stop"]))},[(r(!0),l(_,null,w(s.labelsToDisplay,k=>(r(),l("div",{key:k.id,class:N(["task-preview-label",s.openLabel]),style:S({backgroundColor:k.color}),onClick:e[0]||(e[0]=y((...I)=>s.toggleLabelTitle&&s.toggleLabelTitle(...I),["stop"]))},[i.isLabelTitle?(r(),l("span",{key:0,class:N(s.openLabel)},b(k.title),3)):g("",!0)],6))),128))])):g("",!0),o("div",Tr,b(i.task.title),1),o("div",Ir,[(h=i.task.description)!=null&&h.length?(r(),l("div",Ar)):g("",!0),(u=i.task.checklists)!=null&&u.length?(r(),l("div",{key:1,class:N(["checklists-img-preview",{"todo-done":s.isChecklistDone}]),title:"Checklist items"},[o("span",{class:N(["checklist-img-font flex",{white:s.isChecklistDone}])},null,2),Dr,D(b(s.checkListsCount),1)],2)):g("",!0),(f=i.task.attachments)!=null&&f.length?(r(),l("div",Br,b(s.attachmentCount),1)):g("",!0),(U=i.task.dueDate)!=null&&U.dueDate?(r(),l("div",{key:3,class:N(["date-img-preview",s.isTaskOverdue])},b(s.formattedDate),3)):g("",!0),o("div",Sr,[(r(!0),l(_,null,w(i.task.members,k=>{var I;return r(),v(c,{class:"user-avatar","v-if":(I=i.task.members)==null?void 0:I.length,key:k._id,user:k},null,8,["v-if","user"])}),128))])])])]))])}var Lr=x(yr,[["render",Ur]]);const $r={props:{group:Object,isLabelTitle:Boolean},components:{taskPreview:Lr,deleteCmp:Z,Container:ce,Draggable:ue},data(){return{isAdding:!1,newTaskTitle:"",isRemove:!1}},methods:{getPayload(t){return()=>t},onDrop(t){typeof t.removedIndex!="number"&&typeof t.addedIndex!="number"||this.$emit("dropped",{ev:t,groupToId:this.group.id})},async saveIfTxt(){await $.delay(100),this.newTaskTitle?this.addTask():this.clearForm()},clearForm(){this.isAdding=!1,this.newTaskTitle=""},async openAddTask(){this.isAdding=!0,await $.delay(50)},addTask(){if(this.newTaskTitle){const t=L.getEmptyTask();t.title=this.newTaskTitle,this.$emit("saveGroup",{groupId:this.group.id,type:"add task",newValue:t}),this.clearForm()}else{this.isAdding=!1;return}},saveTitle(t){const e=t.currentTarget.textContent;this.$emit("saveGroup",{groupId:this.group.id,type:"save group title",newValue:e})},toggleLabelTitle(){this.$emit("toggleLabelTitle")},toggleRemove(){this.isRemove=!this.isRemove,console.log(this.isRemove)},removeGroup(){this.$emit("removeGroup",this.group.id),console.log("group",this.group.id)}},computed:{calcHeight(){return{add:this.isAdding}}}},Or={class:"groups-border"},Fr={class:"outside-group flex"},Mr={class:"bottom-outside-group"},jr={key:1,class:"add-task-container"},Nr={class:"add-task-buttons-container flex"};function Er(t,e,i,d,a,s){var U;const c=m("delete-cmp"),n=m("task-preview"),h=m("Draggable"),u=m("Container"),f=j("focus");return r(),l("section",Or,[o("div",Fr,[o("p",{class:"group-title",contenteditable:"true",onBlur:e[0]||(e[0]=(...k)=>s.saveTitle&&s.saveTitle(...k))},b(i.group.title),33),o("span",{class:"remove-group-btn",onClick:e[1]||(e[1]=(...k)=>s.toggleRemove&&s.toggleRemove(...k))})]),a.isRemove?(r(),v(c,{key:0,type:"list",onRemove:s.removeGroup,onCloseCmp:s.toggleRemove},null,8,["onRemove","onCloseCmp"])):g("",!0),o("div",{class:N(["group-container",s.calcHeight])},[(U=i.group.tasks)!=null&&U.length?(r(),v(u,{key:0,class:"tasks-container","group-name":"group",orientation:"vertical","get-child-payload":s.getPayload(i.group.id),onDrop:s.onDrop},{default:C(()=>[(r(!0),l(_,null,w(i.group.tasks,k=>(r(),v(h,{class:"draggable-container middle-group-list",key:k.id},{default:C(()=>[T(n,{task:k,groupId:i.group.id,isLabelTitle:i.isLabelTitle,onToggleLabelTitle:s.toggleLabelTitle},null,8,["task","groupId","isLabelTitle","onToggleLabelTitle"])]),_:2},1024))),128))]),_:1},8,["get-child-payload","onDrop"])):g("",!0)],2),o("div",Mr,[a.isAdding?(r(),l("div",jr,[A(o("textarea",{onBlur:e[3]||(e[3]=y((...k)=>s.saveIfTxt&&s.saveIfTxt(...k),["stop"])),"onUpdate:modelValue":e[4]||(e[4]=k=>a.newTaskTitle=k),placeholder:"Enter a title for this card..."},null,544),[[f],[B,a.newTaskTitle]]),o("div",Nr,[o("button",{class:"adding-task-btn btn",onClick:e[5]||(e[5]=(...k)=>s.addTask&&s.addTask(...k))},"Add card"),o("button",{class:"delete-task-btn",onClick:e[6]||(e[6]=(...k)=>s.clearForm&&s.clearForm(...k))})])])):(r(),l("div",{key:0,class:"add-task-btn",onClick:e[2]||(e[2]=(...k)=>s.openAddTask&&s.openAddTask(...k))}," Add a card "))])])}var Rr=x($r,[["render",Er]]);const Gr={props:{board:Object},data(){return{filterBy:{txt:""}}},methods:{setFilter(){this.$emit("setFilter",this.filterBy)}},computed:{checkBox(){return"../../src/assets/svgs/empty-checkbox.svg"}},components:{userAvatar:E}},qr={class:"board-filter"},Pr={class:"cmp-header"},Wr=o("p",{class:"cmp-container-title"},"Filter",-1),Jr=o("span",null,null,-1),Zr=[Jr],Hr=o("hr",{class:"thin-hr"},null,-1),Yr={class:"filter-search-container"},Vr=o("p",{class:"filter-section-title"},"Keyword",-1),Xr=o("p",{class:"search-description"},"Search cards, members, labels, and more.",-1),zr={class:"filter-member-container"},Qr=o("p",{class:"filter-section-title"},"members",-1),Kr={class:"filter-no-member flex"},el=["src"],tl=o("div",{class:"filter-no-user-avatar flex"},null,-1),sl=o("p",{class:"filter-user-name"},"No members",-1),ol=o("input",{type:"checkbox",value:"no",hidden:""},null,-1),al={class:"filter-members-list"},il=["src"],rl={class:"filter-user-name"},ll=["value"];function nl(t,e,i,d,a,s){const c=m("user-avatar"),n=j("focus"),h=j("modal");return r(),l("section",qr,[o("div",Pr,[Wr,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=u=>t.$emit("closeCmp"))},Zr)]),Hr,o("label",Yr,[Vr,A(o("input",{type:"text",class:"search-input",placeholder:"Enter a keyword...",onInput:e[1]||(e[1]=(...u)=>s.setFilter&&s.setFilter(...u))},null,544),[[n],[h,a.filterBy.txt]]),Xr]),o("div",zr,[Qr,o("label",Kr,[o("img",{class:"checkbox-icon",src:s.checkBox},null,8,el),tl,sl,ol]),o("div",al,[(r(!0),l(_,null,w(i.board.members,u=>(r(),l("label",{key:u._id,class:"filter-member flex"},[o("img",{class:"checkbox-icon",src:s.checkBox},null,8,il),T(c,{user:u},null,8,["user"]),o("p",rl,b(u.fullname),1),o("input",{type:"checkbox",value:u._id,hidden:""},null,8,ll)]))),128))])])])}var dl=x(Gr,[["render",nl]]),cl="/assets/photos.2b952301.jpg",ul="/assets/colors.05334064.jpg";const hl={props:{board:Object},data(){return{filterBy:"",handles:{isAbout:!1,isSearch:!1,isChangeBg:!1,isShowActivities:!1},isChangClr:!1,isChangImg:!1,bgClr:"",bgImg:"",bgColors:[{id:"l101",color:"#61bd4f",isSelected:!1},{id:"l102",color:"#f2d600",isSelected:!1},{id:"l103",color:"#ff9f1a",isSelected:!1},{id:"l104",color:"#eb5a46",isSelected:!1},{id:"l105",color:"#c377e0",isSelected:!1},{id:"l106",color:"#0079bf",isSelected:!1},{id:"l107",color:"#00c2e0",isSelected:!1},{id:"l108",color:"#51e898",isSelected:!1},{id:"l109",color:"#ff78cb",isSelected:!1},{id:"l110",color:"#344563",isSelected:!1}],photos:["https://images.unsplash.com/photo-1648138754706-4fccd621a5f9?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDR8MzE3MDk5fHx8fHwyfHwxNjQ4NjUyNTQ3&ixlib=rb-1.2.1&q=80&w=400","https://images.unsplash.com/photo-1648537949908-25fc530b5f7d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDF8MzE3MDk5fHx8fHwyfHwxNjQ4NjUyNTQ3&ixlib=rb-1.2.1&q=80&w=400","https://images.unsplash.com/photo-1647960666864-01fdaed3431f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDE0fDMxNzA5OXx8fHx8Mnx8MTY0ODY1MjU0Nw&ixlib=rb-1.2.1&q=80&w=400"]}},methods:{toggleMenu(t){for(let e in this.handles)this.handles[e]=!1;typeof t=="string"&&(this.handles[t]=!0)},selectBgClr(t){this.bgClr=t},selectPhoto(t){this.bgImg=t}},computed:{activitiesToDisplay(){const t=this.board.activities.sort((e,i)=>e.createdAt>i.createdAt?-1:1);return this.handles.isShowActivities?t:t.slice(0,20)},cmpTitle(){return this.handles.isAbout?"About":this.handles.isSearch?"Search":this.handles.isChangeBg?"Change background":this.handles.isShowActivities?"Activitiy":"Menu"}},components:{activityPreview:me,listSlot:P}},gl={class:"board-menu"},pl={class:"cmp-header"},ml=o("span",null,null,-1),bl=[ml],fl={class:"cmp-container-title"},kl=o("span",null,null,-1),vl=[kl],_l=o("hr",{class:"thin-hr"},null,-1),yl={class:"menu-content"},Cl={key:0,class:"menu-options flex"},wl=o("span",{class:"trello-icon"},null,-1),xl=o("div",null,[o("p",{class:"menu-option-about"},"About this board"),o("p",{class:"menu-option-about-description"}," Add description to your board ")],-1),Tl=[wl,xl],Il=o("img",{class:"board-bg-preview",src:ge},null,-1),Al=o("p",{class:"menu-option-bgc"},"Change background",-1),Dl=[Il,Al],Bl=o("hr",{class:"thin-hr"},null,-1),Sl={key:1,class:"menu-activities-container"},Ul={class:"activities-list"},Ll={key:2,class:"change-bg-container"},$l={key:0,class:"change-bg-choose"},Ol=Be('<div class="photos-colors-options flex"><div class="photos-option-container"><img class="photos-option" src="'+cl+'"><p class="photos-option-title">Photos</p></div><div class="colors-option-container"><img class="colors-option" src="'+ul+'"><p class="color-option-title">Colors</p></div></div><hr class="thin-hr"><p class="custom-option-title">Custom</p><div class="custom-option"></div>',4),Fl=[Ol],Ml=["onClick"],jl=["src","onClick"];function Nl(t,e,i,d,a,s){const c=m("activity-preview"),n=m("list-slot");return r(),l("section",gl,[o("div",pl,[a.handles.isAbout||a.handles.isChangeBg||a.handles.isShowActivities?(r(),l("a",{key:0,class:"back-to-cmp-btn",onClick:e[0]||(e[0]=(...h)=>s.toggleMenu&&s.toggleMenu(...h))},bl)):g("",!0),o("p",fl,b(s.cmpTitle),1),o("a",{class:"close-cmp-btn",onClick:e[1]||(e[1]=h=>t.$emit("closeCmp"))},vl)]),_l,o("section",yl,[!a.handles.isAbout&&!a.handles.isChangeBg&&!a.handles.isShowActivities?(r(),l("div",Cl,[o("div",{class:"menu-option",onClick:e[2]||(e[2]=h=>s.toggleMenu("isAbout"))},Tl),o("div",{class:"menu-option",onClick:e[3]||(e[3]=h=>s.toggleMenu("isChangeBg"))},Dl),Bl])):g("",!0),!a.handles.isAbout&&!a.handles.isChangeBg?(r(),l("section",Sl,[a.handles.isShowActivities?g("",!0):(r(),l("p",{key:0,class:"activity-header",onClick:e[4]||(e[4]=h=>s.toggleMenu("isShowActivities"))}," Activity ")),o("div",Ul,[(r(!0),l(_,null,w(s.activitiesToDisplay,h=>(r(),v(c,{key:h.id,activity:h},null,8,["activity"]))),128))]),a.handles.isShowActivities?g("",!0):(r(),l("a",{key:1,class:"show-allActivities",onClick:e[5]||(e[5]=h=>s.toggleMenu("isShowActivities"))},"View all activity "))])):g("",!0),a.handles.isChangeBg?(r(),l("section",Ll,[!a.isChangClr&&!a.isChangImg?(r(),l("div",$l,Fl)):g("",!0),a.isChangClr?(r(),v(n,{key:1},{list:C(()=>[(r(!0),l(_,null,w(a.bgColors,h=>(r(),l("div",{key:h.id,class:"option-large pointer",style:S({backgroundColor:h.color}),onClick:u=>s.selectBgClr(h.color)},null,12,Ml))),128))]),_:1})):g("",!0),a.isChangImg?(r(),v(n,{key:2},{list:C(()=>[(r(!0),l(_,null,w(a.photos,(h,u)=>(r(),l("img",{key:u,class:"option-large pointer",src:h,alt:"img",onClick:f=>s.selectPhoto(h)},null,8,jl))),128))]),_:1})):g("",!0)])):g("",!0)])])}var El=x(hl,[["render",Nl]]),fe="/assets/full-star.b170b7f3.png",ke="/assets/empty-star.b48fd479.png";const Rl={name:"board-details",data(){return{board:null,dndInfo:{},isLabelTitle:!1,isOpenFilter:!1,isOpenMenu:!1}},components:{boardGroup:Rr,userAvatar:E,Container:ce,Draggable:ue,boardFilter:dl,boardMenu:El},async created(){this.unsubscribe=Ws.on("show-msg",this.showMsg);const{boardId:t}=this.$route.params;this.topic=t,F.emit("board topic",this.topic),F.on("someone updated",this.boardUpdated),this.loadBoard(t)},unmounted(){F.off("someone updated",this.boardUpdated)},methods:{async updateBoard(t){const e=await this.$store.dispatch({type:"saveBoard",board:t});this.board=e},onDrop(t){const e=this.board.groups.splice(t.removedIndex,1)[0];this.board.groups.splice(t.addedIndex,0,e),this.saveBoard()},dropCard({ev:t,groupToId:e}){this.dndInfo.groupFromId=t.payload,t.payload!==e&&(this.dndInfo.groupToId=e),(t.removedIndex||typeof t.removedIndex=="number")&&(this.dndInfo.removedIndex=t.removedIndex),(t.addedIndex||typeof t.addedIndex=="number")&&(this.dndInfo.addedIndex=t.addedIndex),(this.dndInfo.addedIndex||typeof this.dndInfo.addedIndex=="number")&&(this.dndInfo.removedIndex||typeof this.dndInfo.removedIndex=="number")&&this.moveTask()},moveTask(){const t=this.board.groups.find(d=>d.id===this.dndInfo.groupFromId),e=this.dndInfo.groupToId?this.board.groups.find(d=>d.id===this.dndInfo.groupToId):t,i=t.tasks.splice(this.dndInfo.removedIndex,1)[0];e.tasks.splice(this.dndInfo.addedIndex,0,i),this.saveBoard(),this.dndInfo={}},async loadBoard(t){this.board=await this.$store.dispatch({type:"loadBoard",boardId:t})},async saveBoard(t){const e={id:$.makeId(),txt:t,createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser};this.board.activities.push(e),this.board=await this.$store.dispatch({type:"saveBoard",board:JSON.parse(JSON.stringify(this.board))})},async saveBoardTitle(t){const e=t.currentTarget.textContent;this.board.title=e,this.saveBoard("Change board title")},async toggleFavorite(){this.board.isFavorite=!this.board.isFavorite,this.saveBoard("Toggle favorite")},async addGroup(){const t=L.getEmptyGroup();this.board.groups.push(t),this.saveBoard("Added a new group")},async saveGroup({groupId:t,type:e,newValue:i}){const d=JSON.parse(JSON.stringify(this.board.groups.find(s=>s.id===t)));switch(e){case"save group title":d.title=i;break;case"add task":d.tasks.push(i);break}const a={id:$.makeId(),txt:e,createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser,group:{id:d.id,title:d.title}};this.board=await this.$store.dispatch({type:"saveGroup",boardId:this.board._id,group:d,activity:a})},toggleLabelTitle(){this.isLabelTitle=!this.isLabelTitle},async addLabelToBoard(t){this.board.labels.push(t),await this.saveBoard("Added a new label")},async updateBoardLabels(t){const e=this.board.labels.findIndex(i=>i.id===t.id);this.board.labels.splice(e,1,t),await this.saveBoard("Added a new label")},toggleFilter(){this.isOpenFilter=!this.isOpenFilter},setFilter(t){this.$store.commit({type:"setFilter",filterBy:t})},boardUpdated(){this.loadBoard(this.board._id)},toggleMenu(){this.isOpenMenu=!this.isOpenMenu}},computed:{isStarred(){return this.board.isFavorite?"filled":"stroke"},background(){var i,d;const t=((i=this.board.style)==null?void 0:i.bgImg)||"",e=((d=this.board.style)==null?void 0:d.bgClr)||"";return{backgroundImage:`url(${t})`,backgroundColor:e}},updatedBoardFromStore(){return this.$store.getters.boards}},watch:{"$route.params.boardId":{immediate:!0,handler(){const{boardId:t}=this.$route.params;!t||this.loadBoard(t)}}},unmounted(){this.unsubscribe()}},Gl={class:"board-header flex"},ql={class:"board-title-container flex"},Pl=o("button",{class:"btn-board-details btn-board"},"Board",-1),Wl={key:0,class:"star",src:fe,alt:""},Jl={key:1,class:"star",src:ke},Zl={class:"members-nav-bar flex"},Hl={class:"board-members-container flex"},Yl=o("button",{class:"invite-btn btn-board btn"},"Invite",-1),Vl={class:"board-header-nav flex"},Xl={class:"groups-layout"},zl={class:"groups-container flex"};function Ql(t,e,i,d,a,s){const c=m("router-view"),n=m("user-avatar"),h=m("board-filter"),u=m("board-menu"),f=m("board-group"),U=m("Draggable"),k=m("Container");return a.board?(r(),l("section",{key:0,class:"board-container",style:S(s.background)},[T(c,{onUpdateBoard:s.updateBoard,onAddLabelToBoard:s.addLabelToBoard,onUpdateBoardLabels:s.updateBoardLabels},null,8,["onUpdateBoard","onAddLabelToBoard","onUpdateBoardLabels"]),o("header",Gl,[o("div",ql,[Pl,o("div",{class:"board-title",contenteditable:"true",onBlur:e[0]||(e[0]=(...I)=>s.saveBoardTitle&&s.saveBoardTitle(...I))},b(a.board.title),33),o("button",{class:"star-btn btn-board btn",onClick:e[1]||(e[1]=y(I=>s.toggleFavorite(a.board._id),["stop"]))},[a.board.isFavorite?(r(),l("img",Wl)):(r(),l("img",Jl))])]),o("div",Zl,[o("div",Hl,[(r(!0),l(_,null,w(a.board.members,I=>(r(),v(n,{"v-if":a.board.members,key:I._id,user:I},null,8,["v-if","user"]))),128))]),Yl]),o("nav",Vl,[o("button",{class:"filter-btn btn-board btn",onClick:e[2]||(e[2]=(...I)=>s.toggleFilter&&s.toggleFilter(...I))}," Filter "),a.isOpenFilter?(r(),v(h,{key:0,board:a.board,onCloseCmp:s.toggleFilter,onSetFilter:s.setFilter},null,8,["board","onCloseCmp","onSetFilter"])):g("",!0),o("button",{class:"show-menu-btn btn-board btn",onClick:e[3]||(e[3]=(...I)=>s.toggleMenu&&s.toggleMenu(...I))}," Show menu "),a.isOpenMenu?(r(),v(u,{key:1,board:a.board,onCloseCmp:s.toggleMenu},null,8,["board","onCloseCmp"])):g("",!0)])]),o("div",Xl,[o("article",zl,[T(k,{onDrop:s.onDrop,orientation:"horizontal"},{default:C(()=>[(r(!0),l(_,null,w(a.board.groups,I=>(r(),v(U,{class:"draggable-container flex",key:I.id},{default:C(()=>[T(f,{group:I,isLabelTitle:a.isLabelTitle,onDropped:s.dropCard,onSaveGroup:s.saveGroup,onToggleLabelTitle:s.toggleLabelTitle},null,8,["group","isLabelTitle","onDropped","onSaveGroup","onToggleLabelTitle"])]),_:2},1024))),128))]),_:1},8,["onDrop"]),o("div",{class:"add-group",onClick:e[4]||(e[4]=(...I)=>s.addGroup&&s.addGroup(...I))},"+ Add another list")])])],4)):g("",!0)}var Kl=x(Rl,[["render",Ql]]);const en={name:"work-space",data(){return{isFavorite:!1,isCreateBoard:!1}},methods:{toBoardDetails(t){this.$router.push(`/board/${t}`)},async toggleFavorite(t){console.log(t),this.$store.dispatch({type:"toggleFavorite",board:{boardId:t,status:this.isFavorite}})},async removeBoard(t){this.$store.dispatch({type:"removeBoard",boardId:t})}},computed:{boards(){return this.$store.getters.boards},favoriteBoards(){return this.$store.getters.favoriteBoards}},components:{createBoard:pe}},tn={class:"main-layout"},sn={class:"all-boards-container"},on={class:"saved-boards"},an=["onClick"],rn={class:"title"},ln=["onClick"],nn={key:0,class:"ws-full-star",src:fe},dn={key:1,class:"ws-empty-star",src:ke};function cn(t,e,i,d,a,s){const c=m("create-board");return r(),l("main",tn,[o("section",sn,[o("article",on,[(r(!0),l(_,null,w(s.boards,n=>{var h;return r(),l("div",{key:n._id,onClick:u=>s.toBoardDetails(n._id),class:"board-preview img-pos style-font",style:S({backgroundImage:`url(${((h=n.style)==null?void 0:h.bgImg)||""})`})},[o("h2",rn,b(n.title),1),o("a",{class:"star-container",onClick:y(u=>s.toggleFavorite(n._id),["stop"])},[n.isFavorite?(r(),l("img",nn)):(r(),l("img",dn))],8,ln)],12,an)}),128)),o("button",{onClick:e[0]||(e[0]=n=>a.isCreateBoard=!0),class:"board-preview justify-center add-card"},"Create new board"),a.isCreateBoard?(r(),v(c,{key:0,onCloseCmp:e[1]||(e[1]=n=>a.isCreateBoard=!1)})):g("",!0)])])])}var un=x(en,[["render",cn]]);const hn={name:"home",data(){return{loginCred:{username:"",password:""},signupCred:{fullname:"",username:"",password:""},isSignIn:!0,msg:""}},computed:{loggedinUser(){return this.$store.getters.loggedinUser},loginSignUpButton(){return this.isSignIn?"Or Sign Up":"Back To Login"}},created(){this.loadUsers()},methods:{async doLogin(){if(!this.loginCred.username){this.msg="Please enter username/password";return}try{await this.$store.dispatch({type:"login",userCred:this.loginCred}),this.$router.push("/board")}catch{this.msg="Failed to login"}},doLogout(){this.$store.dispatch({type:"logout"})},async doSignup(){if(!this.signupCred.fullname||!this.signupCred.password||!this.signupCred.username){this.msg="Please fill out all of the form details";return}try{await this.$store.dispatch({type:"signup",userCred:this.signupCred}),this.$router.push("/board")}catch{this.msg="Failed to sign up new user"}},toggleLoginSignUp(){this.isSignIn=!this.isSignIn},async removeUser(t){try{await this.$store.dispatch({type:"removeUser",userId:t}),this.msg="User removed"}catch{this.msg="Failed to remove user"}},async guestLogin(){try{await this.$store.dispatch({type:"login",userCred:{username:"Guest",password:"123"}}),this.$router.push("/board")}catch(t){console.log(t),this.msg="Failed to do guest login"}},loadUsers(){this.$store.dispatch({type:"loadUsers"})}}},gn={class:"login-page-container"},pn=o("h1",null,"Welcome, please log in or sign up!",-1),mn=D("WorkSpace"),bn=D("| "),fn=D("About"),kn=o("br",null,null,-1),vn=D("To WorkSpace"),_n={key:2},yn=o("button",null,"Login",-1),Cn=o("br",null,null,-1),wn=o("button",null,"Login",-1),xn=o("h3",null,"Guest Login:",-1);function Tn(t,e,i,d,a,s){const c=m("router-link");return r(),l("section",gn,[pn,T(c,{to:"/board"},{default:C(()=>[mn]),_:1}),bn,T(c,{to:"/about"},{default:C(()=>[fn]),_:1}),s.loggedinUser?(r(),l("button",{key:0,onClick:e[0]||(e[0]=(...n)=>s.doLogout&&s.doLogout(...n))},"Logout "+b(s.loggedinUser.username),1)):g("",!0),kn,s.loggedinUser?(r(),v(c,{key:1,to:"/board"},{default:C(()=>[vn]),_:1})):(r(),l("section",_n,[a.isSignIn?(r(),l("form",{key:0,onSubmit:e[3]||(e[3]=y((...n)=>s.doLogin&&s.doLogin(...n),["prevent"]))},[A(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=n=>a.loginCred.username=n),placeholder:"Enter username"},null,512),[[B,a.loginCred.username]]),A(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=n=>a.loginCred.password=n),placeholder:"Enter password"},null,512),[[B,a.loginCred.password]]),yn],32)):g("",!0),o("button",{onClick:e[4]||(e[4]=(...n)=>s.toggleLoginSignUp&&s.toggleLoginSignUp(...n))},b(s.loginSignUpButton),1),Cn,a.isSignIn?g("",!0):(r(),l("form",{key:1,onSubmit:e[8]||(e[8]=y((...n)=>s.doSignup&&s.doSignup(...n),["prevent"]))},[A(o("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=n=>a.signupCred.fullname=n),placeholder:"Enter your full name"},null,512),[[B,a.signupCred.fullname]]),A(o("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=n=>a.signupCred.username=n),placeholder:"Enter username"},null,512),[[B,a.signupCred.username]]),A(o("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=n=>a.signupCred.password=n),placeholder:"Enter password"},null,512),[[B,a.signupCred.password]]),wn],32)),xn,o("button",{onClick:e[9]||(e[9]=(...n)=>s.guestLogin&&s.guestLogin(...n))},"Login as Guest")]))])}var In=x(hn,[["render",Tn]]);const An=Se({history:Ue("/"),routes:[{path:"/",name:"home",component:_s},{path:"/login",name:"login",component:In},{path:"/board",name:"work-space",component:un},{path:"/board/:boardId",name:"board-details",component:Kl,children:[{path:":groupId/:taskId",name:"task-details",component:be}]},{path:"/about",name:"about",component:Is}]});var Dn={state:{boards:[],currBoard:null,filterBy:null},getters:{boards({boards:t}){return JSON.parse(JSON.stringify(t))},favoriteBoards({boards:t}){return t.filter(e=>e.isFavorite)},getCurrBoard({currBoard:t}){return JSON.parse(JSON.stringify(t))}},mutations:{setFilter(t,{filterBy:e}){t.filterBy=e},setBoards(t,{boards:e}){t.boards=e},addBoard(t,{board:e}){t.boards.push(e)},removeBoard(t,{boardId:e}){t.boards=t.boards.filter(i=>i._id!==e)},setCurrBoard(t,{board:e}){t.currBoard=JSON.parse(JSON.stringify(e))},setFavorite(t,{updatedBoard:e}){const i=t.boards.findIndex(d=>d._id===e._id);t.boards.splice(i,1,e),console.log(t.boards)},saveBoard(t,{savedBoard:e}){const i=t.boards.findIndex(d=>d._id===e._id);t.boards.splice(i,1,e)},saveGroup(t,{boardId:e,group:i}){const d=t.boards.find(s=>s._id===e),a=d.groups.findIndex(s=>s.id===i.id);if(a===-1)return d.groups.push(i);d.groups.splice(a,1,i),t.currBoard=d},saveTask(t,{boardId:e,groupId:i,task:d}){const a=t.boards.find(n=>n._id===e),s=a.groups.find(n=>n.id===i),c=s.tasks.findIndex(n=>n.id===d.id);if(c===-1)return s.tasks.push(d);s.tasks.splice(c,1,d),t.currBoard=a},removeTask(t,{board:e,group:i,taskIdx:d}){console.log("before",e),i.tasks.splice(d,1),console.log("after",e),t.currBoard=e},removeGroup(t,{board:e,groupIdx:i}){console.log(e,i),e.groups.splice(i,1),t.currBoard=e}},actions:{async loadBoards({commit:t}){try{const e=await L.query();t({type:"setBoards",boards:e})}catch(e){console.log("board module loadBoards cant load boards now",e)}},async loadBoard({commit:t},{boardId:e}){try{const i=await L.getById(e);return t({type:"setCurrBoard",board:i}),JSON.parse(JSON.stringify(i))}catch(i){console.log("board module loadBoard cant load board now",i)}},async addBoard({commit:t},{title:e,bgClr:i,bgImg:d}){try{const a=L.getEmptyBoard();a.title=e,a.style.bgClr=i,a.style.bgImg=d;const s=await L.save(a);return t({type:"addBoard",board:s}),s._id}catch(a){console.log("board module addBoard cant load boards now",a)}},async removeBoard({commit:t},{boardId:e}){try{await L.remove(e),t({type:"removeBoard",boardId:e})}catch(i){console.log("board module removeBoard cant load boards now",i)}},async removeTask({commit:t,state:e},{boardId:i,groupId:d,task:a,activity:s}){try{const c=e.boards.find(U=>U._id===i),n=c.groups.find(U=>U.id===d),h=n.tasks.findIndex(U=>U.id===a.id);await t({type:"removeTask",board:c,group:n,taskIdx:h});const u=JSON.parse(JSON.stringify(e.currBoard));u.activities.push(s);const f=await L.save(u);return t({type:"saveBoard",savedBoard:f}),JSON.parse(JSON.stringify(f))}catch(c){console.log("board module removeTask cant remove task now",c)}},async removeGroup({commit:t,state:e},{boardId:i,groupId:d,activity:a}){console.log(i,d,a);try{const s=e.boards.find(u=>u._id===i),c=s.groups.findIndex(u=>u.id===d);await t({type:"removeGroup",board:s,groupIdx:c});const n=JSON.parse(JSON.stringify(e.currBoard));n.activities.push(a);const h=await L.save(n);return t({type:"saveBoard",savedBoard:h}),JSON.parse(JSON.stringify(h))}catch(s){console.log("board module removeGroup cant remove group now",s)}},async toggleFavorite({commit:t},{board:e}){try{const i=await L.getById(e.boardId);i.isFavorite=!i.isFavorite;const d=await L.save(i);t({type:"setFavorite",updatedBoard:d})}catch(i){console.log("board module toggleFavorite cant load boards now",i)}},async saveBoard({commit:t},{board:e}){try{const i=await L.save(e);return t({type:"saveBoard",savedBoard:i}),F.emit("board updated"),JSON.parse(JSON.stringify(i))}catch(i){console.log("board module saveBoard cant save board now",i)}},async attachImg({commit:t},{ev:e}){try{return await L.uploadImg(e)}catch(i){console.log("board module attachImg cant attach img now",i)}},async saveTask({commit:t,state:e},{boardId:i,groupId:d,task:a,activity:s}){try{await t({type:"saveTask",boardId:i,groupId:d,task:a});const c=JSON.parse(JSON.stringify(e.currBoard));c.activities.push(s);const n=await L.save(c);return t({type:"saveBoard",savedBoard:n}),JSON.parse(JSON.stringify(n))}catch(c){console.log("board module saveTask cant save task now",c)}},async saveGroup({commit:t,state:e},{boardId:i,group:d,activity:a}){console.log(d);try{await t({type:"saveGroup",boardId:i,group:d});const s=JSON.parse(JSON.stringify(e.currBoard));s.activities.push(a);const c=await L.save(s);return t({type:"saveBoard",savedBoard:c}),JSON.parse(JSON.stringify(c))}catch(s){console.log("board module saveGroup cant save group now",s)}}}},Bn={state:{loggedinUser:O.getLoggedinUser(),users:[],watchedUser:null,guestUser:null},getters:{users({users:t}){return t},loggedinUser({loggedinUser:t}){return t},watchedUser({watchedUser:t}){return t},getGuestUser({guestUser:t}){return t}},mutations:{setLoggedinUser(t,{user:e}){t.loggedinUser=e?ie({},e):null},setWatchedUser(t,{user:e}){t.watchedUser=e},setUsers(t,{users:e}){t.users=e},removeUser(t,{userId:e}){t.users=t.users.filter(i=>i._id!==e)},setGuestUser(t,{guestUser:e}){t.guestUser=e}},actions:{async login({commit:t},{userCred:e}){try{const i=await O.login(e);return t({type:"setLoggedinUser",user:i}),i}catch(i){throw console.log("userStore: Error in login",i),i}},async signup({commit:t},{userCred:e}){try{const i=await O.signup(e);return t({type:"setLoggedinUser",user:i}),i}catch(i){throw console.log("userStore: Error in signup",i),i}},async logout({commit:t}){try{await O.logout(),t({type:"setLoggedinUser",user:null})}catch(e){throw console.log("userStore: Error in logout",e),e}},async loadUsers({commit:t}){try{const e=await O.getUsers();t({type:"setUsers",users:e})}catch(e){throw console.log("userStore: Error in loadUsers",e),e}},async loadAndWatchUser({commit:t},{userId:e}){try{const i=await O.getById(e);t({type:"setWatchedUser",user:i}),F.off(le),F.on(le,d=>{t({type:"setWatchedUser",user:d})})}catch(i){throw console.log("userStore: Error in loadAndWatchUser",i),i}},async removeUser({commit:t},{userId:e}){try{await O.remove(e),t({type:"removeUser",userId:e})}catch(i){throw console.log("userStore: Error in removeUser",i),i}},async updateUser({commit:t},{user:e}){try{e=await O.update(e),t({type:"setUser",user:e})}catch(i){throw console.log("userStore: Error in updateUser",i),i}},loadGuestUser({commit:t}){const e=O.getGuestUser();t({type:"setGuestUser",guestUser:e})}}};const Sn=Le({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{boardStore:Dn,userStore:Bn}}),Un={mounted(t){t.focus()}};const R=$e(ds);R.directive("focus",Un);R.use(Oe,{});R.use(Fe,{accessKey:"Y2X6Y_wdMpqvaYX_4jgO-dOBqVAsQMQpihsIFNOAX5E",secret:"W5FeRrlFbgAz3i3d54dHnDm9okVhUeUIXZ6TyvZC_H4"});R.use(Me);R.use(An);R.use(Sn);R.mount("#app");
