var we=Object.defineProperty;var se=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var oe=(t,e,i)=>e in t?we(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,ae=(t,e)=>{for(var i in e||(e={}))Te.call(e,i)&&oe(t,i,e[i]);if(se)for(var i of se(e))xe.call(e,i)&&oe(t,i,e[i]);return t};import{a as ne,l as Ie,o as r,c as n,b as o,F as v,r as w,t as b,d as ie,e as p,f as j,n as S,g as x,w as C,h as A,v as B,i as E,j as h,k as y,m as D,p as _,_ as Ae,q as Be,C as de,D as ce,s as De,u as Ue,x as Se,y as $e,z as Le,U as Fe,A as Oe}from"./vendor.b75cec86.js";const Me=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(a){if(a.ep)return;a.ep=!0;const s=i(a);fetch(a.href,s)}};Me();const je="/api/";var Ee=ne.create({withCredentials:!0});const M={get(t,e){return q(t,"GET",e)},post(t,e){return q(t,"POST",e)},put(t,e){return q(t,"PUT",e)},delete(t,e){return q(t,"DELETE",e)}};async function q(t,e="GET",i=null){try{return(await Ee({url:`${je}${t}`,method:e,data:i,params:e==="GET"?i:null})).data}catch(d){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data:`,i),console.dir(d),d.response&&d.response.status,d}}const re="user-updated",Ne="",O=Re();O.setup();function Re(){var t=null;return{async setup(){t=Ie(Ne)},on(i,d){t.on(i,d)},off(i,d=null){!t||(d?t.off(i,d):t.removeAllListeners(i))},emit(i,d){t.emit(i,d)},terminate(){t=null}}}const P="loggedinUser",F={login:Je,logout:Ye,signup:Ze,getLoggedinUser:ue,getUsers:Ge,getById:qe,remove:Pe,update:We,getGuestUser:He};function Ge(){return M.get("user")}async function qe(t){return await M.get(`user/${t}`)}function Pe(t){return M.delete(`user/${t}`)}async function We(t){return t=await M.put(`user/${t._id}`,t),ue()._id===t._id&&W(t),t}async function Je(t){const e=await M.post("auth/login",t);if(O.emit("set-user-socket",e._id),e)return W(e)}async function Ze(t){const e=await M.post("auth/signup",t);return O.emit("set-user-socket",e._id),W(e)}async function Ye(){return sessionStorage.removeItem(P),O.emit("unset-user-socket"),await M.post("auth/logout")}function W(t){return sessionStorage.setItem(P,JSON.stringify(t)),t}function ue(){return JSON.parse(sessionStorage.getItem(P)||"null")}function He(){return{_id:"624298a9e48762573484a9e5",username:"Guest",fullname:"Guest User",imgUrl:"../assets/svgs/guest.svg"}}var he="/assets/board.17ad90ee.jpg",T=(t,e)=>{const i=t.__vccOpts||t;for(const[d,a]of e)i[d]=a;return i};const Ve={methods:{goToBoard(t){this.$emit("closeCmp"),this.$router.push(`/board/${t}`)}},computed:{boards(){return this.$store.getters.boards}}},Xe={class:"board-recent"},ze={class:"cmp-header"},Qe=o("p",{class:"cmp-container-title"},"Recent",-1),Ke=o("span",null,null,-1),et=[Ke],tt=o("hr",{class:"thin-hr"},null,-1),st={class:"recent-boards-list"},ot=["onClick"],at=["src"],it={key:1,class:"recent-board-preview-img",src:he},rt={class:"recent-board-title"};function lt(t,e,i,d,a,s){return r(),n("section",Xe,[o("div",ze,[Qe,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=c=>t.$emit("closeCmp"))},et)]),tt,o("div",st,[(r(!0),n(v,null,w(s.boards,c=>(r(),n("div",{class:"recent-board-preview flex",key:c._id,onClick:l=>s.goToBoard(c._id)},[c.style.bgImg?(r(),n("img",{key:0,class:"recent-board-preview-img",src:c.style.bgImg},null,8,at)):(r(),n("img",it)),o("p",rt,b(c.title),1)],8,ot))),128))])])}var nt=T(Ve,[["render",lt]]);const dt={},ct={class:"list-slot-container"},ut={class:"list-title"},ht={class:"slot-options-list"};function gt(t,e){return r(),n("article",ct,[o("div",ut,[ie(t.$slots,"title")]),o("div",ht,[ie(t.$slots,"list")])])}var J=T(dt,[["render",gt]]),mt="/assets/groups.80c5d532.svg";const pt={data(){return{title:"",bgClr:"",bgImg:"",photos:["https://images.unsplash.com/photo-1648138754706-4fccd621a5f9?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDR8MzE3MDk5fHx8fHwyfHwxNjQ4NjUyNTQ3&ixlib=rb-1.2.1&q=80&w=400","https://images.unsplash.com/photo-1648537949908-25fc530b5f7d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDF8MzE3MDk5fHx8fHwyfHwxNjQ4NjUyNTQ3&ixlib=rb-1.2.1&q=80&w=400","https://images.unsplash.com/photo-1647960666864-01fdaed3431f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=Mnw3MDY2fDB8MXxjb2xsZWN0aW9ufDE0fDMxNzA5OXx8fHx8Mnx8MTY0ODY1MjU0Nw&ixlib=rb-1.2.1&q=80&w=400"],isRequired:!1,bgColors:[{id:"l101",color:"#61bd4f",isSelected:!1},{id:"l102",color:"#f2d600",isSelected:!1},{id:"l103",color:"#ff9f1a",isSelected:!1},{id:"l104",color:"#eb5a46",isSelected:!1},{id:"l105",color:"#c377e0",isSelected:!1},{id:"l106",color:"#0079bf",isSelected:!1},{id:"l107",color:"#00c2e0",isSelected:!1},{id:"l108",color:"#51e898",isSelected:!1},{id:"l109",color:"#ff78cb",isSelected:!1},{id:"l110",color:"#344563",isSelected:!1}]}},methods:{goToBoard(t){this.$emit("closeCmp"),this.$router.push(`/board/${t}`)},requiredTitle(){this.title||(this.isRequired=!0)},async addBoard(){const t=await this.$store.dispatch({type:"addBoard",title:this.title,bgClr:this.bgClr,bgImg:this.bgImg});this.$router.push(`/board/${t}`),this.$emit("closeCmp")},selectBgClr(t){this.bgClr=t},selectPhoto(t){this.bgImg=t}},computed:{required(){return{required:this.isRequired}}},components:{listSlot:J}},bt={class:"create-board"},kt={class:"cmp-header"},_t=o("p",{class:"cmp-container-title"},"Create board",-1),vt=o("span",null,null,-1),ft=[vt],yt=o("hr",{class:"thin-hr"},null,-1),Ct={class:"choose-bg-container"},wt=o("p",{class:"choose-bg-title"},"Background",-1),Tt=o("img",{class:"bg-preview-img",src:mt},null,-1),xt=[Tt],It=["src","onClick"],At=["onClick"],Bt={class:"add-title-container"},Dt=o("p",{class:"add-title-title"},"Board title",-1),Ut={key:0,class:"add-title-required"},St=["disabled"];function $t(t,e,i,d,a,s){const c=p("list-slot"),l=j("focus");return r(),n("section",bt,[o("div",kt,[_t,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=g=>t.$emit("closeCmp"))},ft)]),yt,o("div",Ct,[wt,o("div",{class:"bg-preview",style:S({backgroundColor:a.bgClr,backgroundImage:"url("+a.bgImg+")"})},xt,4),x(c,null,{list:C(()=>[(r(!0),n(v,null,w(a.photos,(g,u)=>(r(),n("img",{key:u,class:"unsplash-result-small",src:g,alt:"img",onClick:k=>s.selectPhoto(g)},null,8,It))),128))]),_:1}),x(c,null,{list:C(()=>[(r(!0),n(v,null,w(a.bgColors,g=>(r(),n("div",{key:g.id,class:"label-option flex pointer",style:S({backgroundColor:g.color}),onClick:u=>s.selectBgClr(g.color)},null,12,At))),128))]),_:1})]),o("div",Bt,[Dt,A(o("input",{class:E(["add-title-input",s.required]),type:"text","onUpdate:modelValue":e[1]||(e[1]=g=>a.title=g),placeholder:"Enter title..",onBlur:e[2]||(e[2]=(...g)=>s.requiredTitle&&s.requiredTitle(...g))},null,34),[[B,a.title],[l]]),a.isRequired?(r(),n("p",Ut," \u{1F44B} Board title is required ")):h("",!0)]),o("button",{class:"create-board-btn",onClick:e[3]||(e[3]=(...g)=>s.addBoard&&s.addBoard(...g)),disabled:!a.title}," Create ",8,St)])}var ge=T(pt,[["render",$t]]);const Lt={props:{user:Object},methods:{},computed:{imgAvatar(){if(this.user.imgUrl)return this.user.imgUrl},nameAvatar(){if(!this.user.imgUrl){const e=this.user.fullname.split(" ");var t="";return e.forEach(i=>{t+=i.charAt(0)}),t.toUpperCase()}}}},Ft={class:"user-avatar"},Ot=["src"],Mt={key:1,class:"user-avatar-name flex"};function jt(t,e,i,d,a,s){return r(),n("div",Ft,[i.user.imgUrl?(r(),n("img",{key:0,class:"user-avatar-img",src:s.imgAvatar},null,8,Ot)):(r(),n("span",Mt,b(s.nameAvatar),1))])}var N=T(Lt,[["render",jt]]),Et="/assets/trello.92b2080b.svg",Nt="/assets/bell.adefe4be.svg";const Rt={data(){return{handles:{isRecent:!1,isCreateBoard:!1},isBlue:!1,isLogin:!1,loggedinUser:this.$store.getters.loggedinUser}},created(){},methods:{openCmp(t){if(typeof t!="string"){for(let e in this.handles)this.handles[e]=!1;return}if(this.handles[t]===!0)this.handles[t]=!1;else{for(let e in this.handles)this.handles[e]=!1;this.handles[t]=!0}}},computed:{bgc(){return{blue:this.isBlue}}},watch:{"$route.path":{immediate:!0,handler(){const t=this.$route.path;t==="/board"||t==="/login"?this.isBlue=!0:this.isBlue=!1,t!=="/"&&t!=="/login"&&(console.log(this.$store.getters.getGuestUser),this.loggedinUser=this.$store.getters.getGuestUser)}}},components:{boardRecent:nt,createBoard:ge,userAvatar:N}},Gt={class:"app-header-inner flex"},qt=o("img",{class:"logo-img",src:Et,alt:""},null,-1),Pt=o("h3",{class:"logo"},"Mellow",-1),Wt={class:"app-header-nav flex"},Jt={class:"app-header-left-nav flex"},Zt=D(" Workspace "),Yt=o("span",{class:"header-arrow-icon"},null,-1),Ht=[Zt,Yt],Vt=D(" Recent "),Xt=o("span",{class:"header-arrow-icon"},null,-1),zt=[Vt,Xt],Qt=D(" Create "),Kt={key:0,class:"header-arrow-icon"},es={class:"app-header-right-nav flex"},ts=D("Log in"),ss=D("Sign up"),os=o("div",{class:"header-bell pointer"},[o("img",{src:Nt})],-1);function as(t,e,i,d,a,s){const c=p("router-link"),l=p("board-recent"),g=p("create-board"),u=p("user-avatar");return r(),n("header",{class:E(["app-header-container",s.bgc])},[o("div",Gt,[x(c,{class:"logo-link flex",to:"/"},{default:C(()=>[qt,Pt]),_:1}),o("nav",Wt,[o("div",Jt,[o("button",{class:"btn-header flex",onClick:e[0]||(e[0]=k=>t.$router.push("/board"))},Ht),o("button",{class:"btn-header flex",onClick:e[1]||(e[1]=k=>s.openCmp("isRecent"))},zt),a.handles.isRecent?(r(),y(l,{key:0,onCloseCmp:s.openCmp},null,8,["onCloseCmp"])):h("",!0),o("button",{class:"btn-header flex",onClick:e[2]||(e[2]=k=>s.openCmp("isCreateBoard"))},[Qt,a.handles.isCreateBoard?(r(),n("span",Kt)):h("",!0)]),a.handles.isCreateBoard?(r(),y(g,{key:1,onCloseCmp:s.openCmp},null,8,["onCloseCmp"])):h("",!0)]),o("div",es,[a.loggedinUser?h("",!0):(r(),y(c,{key:0,class:"login-btn",onClick:e[3]||(e[3]=k=>a.isLogin=!0),to:"/login"},{default:C(()=>[ts]),_:1})),a.loggedinUser?h("",!0):(r(),y(c,{key:1,class:"signup-btn",onClick:e[4]||(e[4]=k=>a.isLogin=!0),to:"/login"},{default:C(()=>[ss]),_:1})),os,a.loggedinUser?(r(),y(u,{key:2,class:"pointer",user:a.loggedinUser},null,8,["user"])):h("",!0)])])])],2)}var is=T(Rt,[["render",as]]);const rs={components:{appHeader:is},data(){return{}},created(){this.$store.dispatch({type:"loadBoards"}),this.$store.dispatch({type:"loadGuestUser"})},methods:{},computed:{},unmounted(){}};function ls(t,e,i,d,a,s){const c=p("app-header"),l=p("router-view");return r(),n(v,null,[x(c),x(l)],64)}var ns=T(rs,[["render",ls]]),ds="/assets/mellow-cover.354e12f4.png";const cs={components:{},data(){return{}},created(){},methods:{},computed:{},unmounted(){}},us={class:"home-page-container"},hs={class:"title-container flex"},gs={class:"title-text"},ms=o("h1",{class:"home-logo"},[D("Mellow helps teams "),o("span",null,"move work forward")],-1),ps=o("h3",{class:"title"},"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your your team works is unique - accomplish it all with Mellow",-1),bs=o("span",{class:"guest-login-button"}," Start as guest",-1),ks=o("img",{class:"home-page-img",src:ds},null,-1);function _s(t,e,i,d,a,s){const c=p("router-link");return r(),n("section",us,[o("div",hs,[o("div",gs,[ms,ps,x(c,{class:"home-link",to:"/board"},{default:C(()=>[bs]),_:1})]),ks])])}var vs=T(cs,[["render",_s]]);const fs={},ys={class:"about"},Cs=o("h1",null,"This is an about page",-1),ws=[Cs];function Ts(t,e){return r(),n("div",ys,ws)}var xs=T(fs,[["render",Ts]]);const U={saveToStorage:Is,loadFromStorage:As,makeId:Ds,getRandomIntInclusive:Us,delay:Bs,isDarkColor:Ss};function Is(t,e){localStorage.setItem(t,JSON.stringify(e)||null)}function As(t){let e=localStorage.getItem(t);return e?JSON.parse(e):void 0}function Bs(t=1500){return new Promise(e=>{setTimeout(e,t)})}function Ds(t=8){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=0;d<t;d++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}function Us(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)}function Ss(t){if(!t)return;t=t.substring(1);const e=parseInt(t,16),i=e>>16&255,d=e>>8&255,a=e>>0&255;var s=.2126*i+.7152*d+.0722*a;return s<100}const le="boards_db",G="board",$={query:$s,getById:Ls,remove:Fs,save:Os,getEmptyBoard:Ns,getEmptyGroup:js,getEmptyTask:Es,uploadImg:Ms};Rs();async function $s(t={}){return await M.get(G,t)}async function Ls(t){return await M.get(`${G}/${t}`)}async function Fs(t){return await M.delete(`${G}/${t}`)}async function Os(t){return t._id?await M.put(`${G}/${t._id}`,t):await M.post(G,t)}async function Ms(t){const e="cajan_22",d="https://api.cloudinary.com/v1_1/cajan22a/image/upload",a=new FormData;return a.append("file",t.target.files[0]),a.append("upload_preset",e),fetch(d,{method:"POST",body:a}).then(s=>s.json()).then(s=>s).catch(s=>console.error(s))}function js(){return{id:"g-"+U.makeId(),title:"Enter Group Name",tasks:[],style:{}}}function Es(){return{id:"t-"+U.makeId(),title:"",createdAt:Date.now(),style:{},attachments:[]}}function Ns(){return{title:"",isFavorite:!1,createdAt:Date.now(),archivedAt:null,createdBy:F.getLoggedinUser()||F.getGuestUser(),style:{bgClr:"",bgImg:""},labels:[],members:[F.getGuestUser()],groups:[],activities:[]}}function Rs(){let t=U.loadFromStorage(le);return(!t||!t.length)&&(t=[{_id:"b101",title:"Frontend Build",isFavorite:!1,createdAt:1648368189547,createdBy:{_id:"u101",fullname:"Abi Abambi",imgUrl:""},style:{bgImg:"../assets/imgs/1.jpg"},labels:[{id:"l101",color:"#61bd4f",title:"Done"},{id:"l102",color:"#f2d600",title:"Urgent"},{id:"l103",color:"#ff9f1a",title:"Immediate"},{id:"l104",color:"#eb5a46",title:""},{id:"l105",color:"#c377e0",title:""},{id:"l106",color:"#0079bf",title:""}],members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u106",fullname:"Almog Ben-Binyamin",username:"Almog",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2021-12-10_at_16.38.26_sft38h.jpg",mentions:[]},{_id:"u107",fullname:"Zviki zaks",username:"Zviki",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.17.15_rq2ja9.jpg",mentions:[]}],groups:[{id:"g101",title:"Immediate Todos",tasks:[{id:"c101",title:"Replace logo",style:{bgClr:"",bgImg:"",isFullCover:!1}},{id:"t-nMLMX279",title:"Remove excess pixels between group-list and scroll bar",createdAt:1648369020184,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],labelIds:["l102","l103","l104"],dueDate:{dueDate:"2022-03-26T08:20:13.473Z",isCompleted:!1}},{id:"t-TI4ANfXQ",title:"Render the photos to task preview",createdAt:1648369100551,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:["http://res.cloudinary.com/cajan22a/image/upload/v1648373054/books-g629e7f9c8_640_ihanz0.jpg"],labelIds:["l101"]}],style:{}},{id:"g102",title:"Components to Build",tasks:[{id:"c103",title:"Archive instead of Delete",style:{bgClr:"",bgImg:"",isFullCover:!1}},{id:"c104",title:"Proper layout and full CRUD of images",checklists:[{id:"YEtgF",title:"Checklist",todos:[{id:"325jX",title:"To Do 1",isDone:!1}]}],style:{bgClr:"26de81",bgImg:"",isFullCover:!1},members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u107",fullname:"Zviki zaks",username:"Zviki",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.17.15_rq2ja9.jpg",mentions:[]}],labelIds:["l102","l103","l104"],description:"Toggle should change image on task preview"},{id:"t-PiYcSy3j",title:"Cover photo, make sure the first added is the default",createdAt:1648369148256,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],description:"...subsequent ones can be changed manually to be the cover photos. Trello has this as its default, looks really nice",dueDate:{dueDate:"2022-03-27T09:30:00.000Z",isCompleted:!1}},{id:"c105",title:"Render and add comments",status:"in-progress",description:"This will need a full update when the sockets are added but for now work on basic adding and rendering",comments:[{id:"ZdPnm",txt:"also @yaronb please CR this",createdAt:1590999817436,byMember:{_id:"u101",fullname:"Tal Tarablus",imgUrl:"http://res.cloudinary.com/shaishar9/image/upload/v1590850482/j1glw3c9jsoz2py0miol.jpg"}}],checklists:[{id:"YEhmFk111",title:"Checklist",todos:[{id:"212jX111",title:"To Do 1",isDone:!0}]},{id:"YEhmF222",title:"Checklist",todos:[{id:"212jX222",title:"To Do 2",isDone:!1},{id:"212jX333",title:"To Do 3 is done",isDone:!0}]}],members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u106",fullname:"Almog Ben-Binyamin",username:"Almog",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2021-12-10_at_16.38.26_sft38h.jpg",mentions:[]},{_id:"u107",fullname:"Zviki zaks",username:"Zviki",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.17.15_rq2ja9.jpg",mentions:[]}],labelIds:["l107","l108","l103"],createdAt:1590999730348,byMember:{_id:"u101",username:"Tal",fullname:"Tal Tarablus",imgUrl:"http://res.cloudinary.com/shaishar9/image/upload/v1590850482/j1glw3c9jsoz2py0miol.jpg"},style:{bgClr:"",bgImg:"",isFullCover:!1},dueDate:{dueDate:"2022-03-29T21:40:27.228Z",isCompleted:!1},attachments:["http://res.cloudinary.com/cajan22a/image/upload/v1648363384/Headshot_Yoni_2021_gkcpbo.jpg"]},{id:"t-KkqBkx4T",title:"Checklists, super important to be next on our list, it adds a lot of value",createdAt:1648369395722,members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u106",fullname:"Almog Ben-Binyamin",username:"Almog",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2021-12-10_at_16.38.26_sft38h.jpg",mentions:[]}],style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[]},{id:"t-QzjP3br7",title:"Full CRUD of name and cards, without exception",createdAt:1648371305685,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],labelIds:["l102"]},{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared",createdAt:1648369658477,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],labelIds:["l105"],dueDate:{dueDate:"2022-03-28T08:25:53.455Z",isCompleted:!1}}],style:{}},{id:"g-05mqUAOd",title:"Feedback from Avior",tasks:[{id:"t-J6zOG2sn",title:"Take a few pictures from the internet for demo data",createdAt:1648368936226,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],description:"",dueDate:{dueDate:"2022-03-30T15:25:00.000Z",isCompleted:!1}},{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job",createdAt:1648369464026,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:["http://res.cloudinary.com/cajan22a/image/upload/v1648373021/dog-gd9e48bc3a_640_xonhij.jpg"],members:[{_id:"u105",fullname:"Yoni Lazarus",username:"Yoni",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.02.12_gmtcrl.jpg",mentions:[]},{_id:"u106",fullname:"Almog Ben-Binyamin",username:"Almog",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2021-12-10_at_16.38.26_sft38h.jpg",mentions:[]},{_id:"u107",fullname:"Zviki zaks",username:"Zviki",password:"123",imgUrl:"https://res.cloudinary.com/cajan22a/image/upload/v1648369158/WhatsApp_Image_2022-03-27_at_11.17.15_rq2ja9.jpg",mentions:[]}],labelIds:["l105","l106"],description:"The meeting will be short, give a quick run through of the flow, get good feedback",dueDate:{dueDate:"2022-03-27T09:30:00.000Z",isCompleted:!1}}],style:{}},{id:"g-Wen1SpyZ",title:"Done",tasks:[{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6",createdAt:1648369068557,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:["http://res.cloudinary.com/cajan22a/image/upload/v1648373005/code-g6edc9f26e_640_bznsbp.jpg"],labelIds:["l101"],dueDate:{dueDate:"2022-03-26T16:20:00.000Z",isCompleted:!0}},{id:"t-7JKrUUZr",title:"Clean up demo data",createdAt:1648369083537,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[]}],style:{}},{id:"g-va8kuIE2",title:"For later this week",tasks:[{id:"t-0HhNSPhU",title:"Look at Quello for extra add-on ideas",createdAt:1648369345282,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],labelIds:["l105"]},{id:"t-U5qT2Gud",title:"Full working filter",createdAt:1648373985129,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],dueDate:{dueDate:"2022-03-28T14:00:00.000Z",isCompleted:!1},labelIds:["l102"]}],style:{}},{id:"g-HIKOO3fg",title:"Plan for Backend",tasks:[{id:"t-UEohipxO",title:"Make list of all potential bugs",createdAt:1648373155582,style:{bgClr:"",bgImg:"",isFullCover:!1},attachments:[],dueDate:{dueDate:"2022-03-31T09:25:01.470Z",isCompleted:!1}}],style:{}}],activities:[{id:"a101",txt:"Changed Color",createdAt:154514,byMember:{_id:"u101",fullname:"Abi Abambi",imgUrl:""},task:{id:"c101",title:"Replace Logo"}},{id:"rgQTUE70",txt:"save group title",createdAt:1648368203097,group:{id:"g101",title:"Group 1"}},{id:"tl2mQu8G",txt:"save group title",createdAt:1648368204208,group:{id:"g101",title:"Group 1"}},{id:"NnJYheAO",txt:"save group title",createdAt:1648368238800,group:{id:"g101",title:"Immediate Todos"}},{id:"1eThwGFa",txt:"save group title",createdAt:1648368247802,group:{id:"g102",title:"Group 2"}},{id:"TwyX7WVn",txt:"save group title",createdAt:1648368257335,group:{id:"g102",title:"Group 2"}},{id:"P9N2ZAx5",txt:"save group title",createdAt:1648368266639,group:{id:"g102",title:"Components to Build"}},{id:"ZJfHOeCx",txt:"save group title",createdAt:1648368294433,group:{id:"g-05mqUAOd",title:"Backend"}},{id:"a5o3Iidt",txt:"save group title",createdAt:1648368301129,group:{id:"g-Wen1SpyZ",title:"Done"}},{id:"yTPbecRE",txt:"save group title",createdAt:1648368321763,group:{id:"g-05mqUAOd",title:"Backend"}},{id:"GZ8MoaPj",txt:"save group title",createdAt:1648368341989,group:{id:"g-05mqUAOd",title:""}},{id:"w4QDHcjt",txt:"save group title",createdAt:1648368362600,group:{id:"g-05mqUAOd",title:""}},{id:"uDaQqQy5",txt:"save group title",createdAt:1648368473189,group:{id:"g-05mqUAOd",title:""}},{id:"6YEYWYEX",txt:"save group title",createdAt:1648368484876,group:{id:"g-05mqUAOd",title:"Feedback from Avior"}},{id:"87inrkd0",txt:"save group title",createdAt:1648368866764,group:{id:"g101",title:"Immediate Todos"}},{id:"uEUUMiyC",txt:"add task",createdAt:1648368936226,group:{id:"g-05mqUAOd",title:"Feedback from Avior"}},{id:"5IHDG42X",txt:"save group title",createdAt:1648368936285,group:{id:"g-Wen1SpyZ",title:"Done"}},{id:"7vJxYdQt",txt:"add task",createdAt:1648369020184,group:{id:"g-05mqUAOd",title:"Feedback from Avior"}},{id:"3D5DAGK1",txt:"add task",createdAt:1648369068558,group:{id:"g-Wen1SpyZ",title:"Done"}},{id:"GdJKjLTI",txt:"add task",createdAt:1648369083538,group:{id:"g-Wen1SpyZ",title:"Done"}},{id:"AK6NkjMO",txt:"add task",createdAt:1648369100552,group:{id:"g101",title:"Immediate Todos"}},{id:"LvhBJbun",txt:"add task",createdAt:1648369148256,group:{id:"g102",title:"Components to Build"}},{id:"ApT83fwp",txt:"Updated Description",groupId:"g102",createdAt:1648369196991,task:{id:"t-PiYcSy3j",title:"Cover photo, make sure the first added is the default, subsequent ones can be changed manually to be the cover photos"}},{id:"8inzUrXY",txt:"Updated due date",groupId:"g102",createdAt:1648369215650,task:{id:"t-PiYcSy3j",title:"Cover photo, make sure the first added is the default, subsequent ones can be changed manually to be the cover photos"}},{id:"1j6i4sgw",txt:"Change Labels",groupId:"g-Wen1SpyZ",createdAt:1648369233890,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"XMAfpcgo",txt:"Updated due date",groupId:"g-Wen1SpyZ",createdAt:1648369247655,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"YoopJ1OF",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648369250689,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"UVjL7gYu",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369267807,task:{id:"t-nMLMX279",title:"Remove exess pixels between group-list and scroll bar"}},{id:"ezQ6TWn9",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369269161,task:{id:"t-nMLMX279",title:"Remove exess pixels between group-list and scroll bar"}},{id:"W0pkvrro",txt:"Updated due date",groupId:"g-05mqUAOd",createdAt:1648369278955,task:{id:"t-nMLMX279",title:"Remove exess pixels between group-list and scroll bar"}},{id:"b5U2QiON",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369290122,task:{id:"t-nMLMX279",title:"Remove exess pixels between group-list and scroll bar"}},{id:"7It3Jw4j",txt:"save group title",createdAt:1648369329171,group:{id:"g-va8kuIE2",title:"For later this week"}},{id:"3netnQsO",txt:"add task",createdAt:1648369345283,group:{id:"g-va8kuIE2",title:"For later this week"}},{id:"5ec3PT7P",txt:"Change Labels",groupId:"g-va8kuIE2",createdAt:1648369350698,task:{id:"t-0HhNSPhU",title:"Look at Quello for extra add-on ideas"}},{id:"Txn8Q0s6",txt:"add task",createdAt:1648369395723,group:{id:"g102",title:"Components to Build"}},{id:"jZj19qyo",txt:"add task",createdAt:1648369464026,group:{id:"g-05mqUAOd",title:"Feedback from Avior"}},{id:"CQttIpht",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369471149,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"wTFoRgEN",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369472114,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"YuMVHdES",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369474619,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"sCe6KWcd",txt:"Change Labels",groupId:"g-05mqUAOd",createdAt:1648369477254,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"pa94Rc8n",txt:"Updated Description",groupId:"g-05mqUAOd",createdAt:1648369511025,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"fk7jMogv",txt:"Updated due date",groupId:"g-05mqUAOd",createdAt:1648369564076,task:{id:"t-J6zOG2sn",title:"Take a few pi"}},{id:"GkbtB5Wj",txt:"save group title",createdAt:1648369582777,group:{id:"g102",title:"Components to Build"}},{id:"mUJFLJqX",txt:"add task",createdAt:1648369658477,group:{id:"g102",title:"Components to Build"}},{id:"PcqvtoZs",txt:"Change Labels",groupId:"g102",createdAt:1648369663901,task:{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared"}},{id:"2jM4ahQR",txt:"Change Labels",groupId:"g102",createdAt:1648369665708,task:{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared"}},{id:"j6q98tUs",txt:"Change Labels",groupId:"g102",createdAt:1648369667429,task:{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared"}},{id:"ISNmFvAR",txt:"Updated due date",groupId:"g102",createdAt:1648369677032,task:{id:"t-VCawXr0K",title:"Render the data we have been collecting from the activities, the button to show and hide has been prepared"}},{id:"a60GcWLC",txt:"save group title",createdAt:1648369801257,group:{id:"g102",title:"Components to Build"}},{id:"aeWY4nye",txt:"Change Labels",groupId:"g102",createdAt:1648369821021,task:{id:"c104",title:"Do that"}},{id:"pbYblrs5",txt:"Updated Description",groupId:"g102",createdAt:1648369839129,task:{id:"c104",title:"Do that"}},{id:"r5smZnq2",txt:"add task",createdAt:1648371305686,group:{id:"g102",title:"Components to Build"}},{id:"xbx7PIlZ",txt:"Change Labels",groupId:"g102",createdAt:1648371313288,task:{id:"t-QzjP3br7",title:"Full CRUD of name and cards, without exception"}},{id:"n2Hh1vdy",txt:"updated due date status",groupId:"g102",createdAt:1648372421123,task:{id:"c105",title:"Render and add comments"}},{id:"nZsE6loT",txt:"updated due date status",groupId:"g102",createdAt:1648372423456,task:{id:"c105",title:"Render and add comments"}},{id:"wdOYGCff",txt:"Updated due date",groupId:"g-05mqUAOd",createdAt:1648372610248,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"Hd2beyNT",txt:"added image",groupId:"g-Wen1SpyZ",createdAt:1648373006079,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"sFpDOclC",txt:"added image",groupId:"g-05mqUAOd",createdAt:1648373021964,task:{id:"t-FlDqD6BG",title:"Make sure to relax before the meeting with Asaf, and do a good job"}},{id:"dX3EetsR",txt:"added image",groupId:"g101",createdAt:1648373055028,task:{id:"t-TI4ANfXQ",title:"Render the photos to task preview"}},{id:"hM8PG5Pw",txt:"save group title",createdAt:1648373139535,group:{id:"g-HIKOO3fg",title:"Plan for Backend"}},{id:"t8LDFpAF",txt:"add task",createdAt:1648373155582,group:{id:"g-HIKOO3fg",title:"Plan for Backend"}},{id:"LUSVaFui",txt:"Updated due date",groupId:"g-HIKOO3fg",createdAt:1648373163955,task:{id:"t-UEohipxO",title:"Make list of all potential bugs"}},{id:"YB2j4QxX",txt:"Change Labels",groupId:"g102",createdAt:1648373182175,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"avUgqMSz",txt:"Change Labels",groupId:"g102",createdAt:1648373185066,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"1oxnrHrf",txt:"Change Labels",groupId:"g102",createdAt:1648373185950,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"I8AfnCeK",txt:"Change Labels",groupId:"g102",createdAt:1648373186906,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"ZTDq4Kag",txt:"Change Labels",groupId:"g-Wen1SpyZ",createdAt:1648373683999,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"5UCdn61P",txt:"Change Labels",groupId:"g-Wen1SpyZ",createdAt:1648373687858,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"DLtWg9TA",txt:"Change Labels",groupId:"g101",createdAt:1648373886086,task:{id:"t-TI4ANfXQ",title:"Render the photos to task preview"}},{id:"hgAfsbaq",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648373919422,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"Zgxes34w",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648373921247,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"cpklmrLH",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648373941156,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"2HzfmzeT",txt:"updated due date status",groupId:"g-Wen1SpyZ",createdAt:1648373950964,task:{id:"t-yNkTEECH",title:"Reduce number of default labels on the boards to maximim of 6"}},{id:"PFGtTe2z",txt:"add task",createdAt:1648373985130,group:{id:"g-va8kuIE2",title:"For later this week"}},{id:"GvqmcnAR",txt:"Updated due date",groupId:"g-va8kuIE2",createdAt:1648374000642,task:{id:"t-U5qT2Gud",title:"Full working filter"}},{id:"EEOxWqqY",txt:"Change Labels",groupId:"g-va8kuIE2",createdAt:1648374006294,task:{id:"t-U5qT2Gud",title:"Full working filter"}},{id:"hEqZEU2e",txt:"Change Labels",groupId:"g102",createdAt:1648375093084,task:{id:"c105",title:"Render and add comments"}},{id:"ptnvPaty",txt:"Change Labels",groupId:"g102",createdAt:1648375269313,task:{id:"c104",title:"Proper layout and full CRUD of images"}},{id:"pSWmQ9Gt",txt:"Change Labels",groupId:"g102",createdAt:1648375269877,task:{id:"c104",title:"Proper layout and full CRUD of images"}}]}],U.saveToStorage(le,t)),t}function Gs(t,e){const i=({detail:d})=>{e(d)};return window.addEventListener(t,i),()=>{window.removeEventListener(t,i)}}function qs(t,e){window.dispatchEvent(new CustomEvent(t,{detail:e}))}const Ps={on:Gs,emit:qs},Ws={props:{imgUrls:Array},components:{},data(){return{isLoading:!1,input:null}},created(){},methods:{onAttachImg(t){this.isLoading=!0,this.$emit("attachImg",t),this.isLoading=!1},showLink(){console.log(this.input),console.log("not working till we fix img upload on second time")},closeCmp(){this.$emit("closeCmp")}},computed:{},unmounted(){}},Js={class:"attachment-preview"},Zs=o("p",{class:"attach-from"},"Attach from...",-1),Ys=o("hr",{class:"thin-hr"},null,-1),Hs=o("div",{class:"pointer"},"Computer",-1),Vs=o("hr",{class:"seperate-line thin-hr"},null,-1),Xs=o("div",{class:"attach-link-title"},"Attach a link",-1),zs=o("div",{class:"attach-preview"},null,-1);function Qs(t,e,i,d,a,s){const c=j("focus");return r(),n("section",Js,[o("button",{class:"add-task-close-cmp-btn",onClick:e[0]||(e[0]=(...l)=>s.closeCmp&&s.closeCmp(...l))},"X"),o("label",null,[o("input",{type:"file",onChange:e[1]||(e[1]=(...l)=>s.onAttachImg&&s.onAttachImg(...l)),hidden:""},null,32),Zs,Ys,Hs]),Vs,Xs,A(o("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>a.input=l),class:"attach-input",type:"text",placeholder:"Paste any link here..."},null,512),[[c],[B,a.input]]),o("button",{class:"attach-link-btn",onClick:e[3]||(e[3]=(...l)=>s.showLink&&s.showLink(...l))},"Attach"),zs])}var Ks=T(Ws,[["render",Qs]]);const eo={name:"date-preview",props:{dueDate:Number},created(){this.date.dueDate=this.dueDate},data(){return{date:{dueDate:null,isCompleted:!1}}},methods:{saveDate(){console.log(this.date,"this is the date from the library"),this.$emit("saveDate",this.date)},closeCmp(){this.date.dueDate=this.dueDate,this.$emit("closeCmp")}}},to={class:"date-preview pointer"},so={class:"date-header"},oo=o("h3",{class:"date-title"},"Dates",-1);function ao(t,e,i,d,a,s){const c=p("v-date-picker");return r(),n("section",to,[o("div",so,[oo,o("button",{class:"add-task-close-cmp-btn",onClick:e[0]||(e[0]=(...l)=>s.closeCmp&&s.closeCmp(...l))})]),x(c,{modelValue:a.date.dueDate,"onUpdate:modelValue":e[1]||(e[1]=l=>a.date.dueDate=l),mode:"dateTime","minute-increment":5},null,8,["modelValue"]),o("button",{class:"save-btn date-btn",onClick:e[2]||(e[2]=(...l)=>s.saveDate&&s.saveDate(...l))},"Save"),o("button",{class:"remove-date-btn date-btn",onClick:e[3]||(e[3]=(...l)=>s.closeCmp&&s.closeCmp(...l))},"Remove")])}var io=T(eo,[["render",ao]]);const ro={props:{type:String},components:{},data(){return{}},created(){},methods:{closeCmp(){this.$emit("closeCmp")},remove(){this.$emit("remove")}},computed:{},unmounted(){}},lo={class:"delete-preview"},no={class:"delete-header flex"},co={class:"cmp-header-title"},uo=o("hr",{class:"thin-hr"},null,-1),ho={class:"delete-content-container"},go={key:0},mo={key:1};function po(t,e,i,d,a,s){return r(),n("section",lo,[o("div",no,[o("span",co,"Delete "+b(i.type)+"?",1),o("a",{onClick:e[0]||(e[0]=(...c)=>s.closeCmp&&s.closeCmp(...c)),class:"close-delete pointer"})]),uo,o("div",ho,[i.type==="task"?(r(),n("p",go," All actions will be removed from the activity feed and you won\u2019t be able to re-open the card. There is no undo. ")):i.type==="label"?(r(),n("p",mo," There is no undo. This will remove this label from all cards and destroy its history. ")):h("",!0),o("a",{onClick:e[1]||(e[1]=(...c)=>s.remove&&s.remove(...c)),class:"confirm-delete"},"Delete")])])}var me=T(ro,[["render",po]]);const bo={props:{boardLabels:Array,taskLabelIds:Array},emits:["addLabelToTask","addLabelToBoard","updateBoardLabels"],components:{listSlot:J,deleteCmp:me},data(){return{labels:[],filterTxt:"",defaultLabels:[{id:"l101",color:"#61bd4f",title:"",isSelected:!1},{id:"l102",color:"#f2d600",title:"",isSelected:!1},{id:"l103",color:"#ff9f1a",title:"",isSelected:!1},{id:"l104",color:"#eb5a46",title:"",isSelected:!1},{id:"l105",color:"#c377e0",title:"",isSelected:!1},{id:"l106",color:"#0079bf",title:"",isSelected:!1},{id:"l107",color:"#00c2e0",title:"",isSelected:!1},{id:"l108",color:"#51e898",title:"",isSelected:!1},{id:"l109",color:"#ff78cb",title:"",isSelected:!1},{id:"l110",color:"#344563",title:"",isSelected:!1}],isCreate:!1,isChange:!1,isRemove:!1,selectedLabel:null,labelToChange:{color:null,title:""}}},created(){this.aggregateLabels()},methods:{toggleLabel(t){this.$emit("addLabelToTask",t)},closeCmp(){this.$emit("closeCmp")},aggregateLabels(){this.labels=[],this.labels=this.boardLabels.map(t=>{var e;return t=JSON.parse(JSON.stringify(t)),(e=this.taskLabelIds)!=null&&e.includes(t.id)&&(t.inTask=!0),t})},openCreate(t){if(typeof t=="string"){this.labelToChange=JSON.parse(JSON.stringify(this.boardLabels.find(i=>i.id===t)));const e=this.defaultLabels.find(i=>i.color===this.labelToChange.color);this.selectLabel(e.id),this.isChange=!0;return}this.isCreate=!0},selectLabel(t){this.defaultLabels.forEach(i=>{i.isSelected=i.id===t});const e=this.defaultLabels.find(i=>i.id===t);this.labelToChange.color=e.color},async changeBoardLabels(){const t=JSON.parse(JSON.stringify(this.labelToChange));this.isCreate&&(t.id="l"+U.makeId(),console.log(t)),await this.$emit("updateBoardLabels",t),this.aggregateLabels(),this.isCreate=!1,this.isChange=!1},async removeLabelFromBoard(){const t=this.labelToChange.id;await this.$emit("removeLabelFromBoard",t),this.aggregateLabels(),this.isCreate=!1,this.isChange=!1,this.isRemove=!1}},computed:{getLabels(){const t=new RegExp(this.filterTxt,"i");return this.labels.filter(e=>t.test(e.title))},cmpTitle(){return this.isChange?"Change label":this.isCreate?"Create label":"Labels"},createBtn(){if(this.isCreate)return"Create";if(this.isChange)return"Save"}},watch:{taskLabelIds(){this.aggregateLabels()}},unmounted(){}},ko={key:0,class:"cmp-preview"},_o={class:"cmp-header"},vo=o("span",null,null,-1),fo=[vo],yo={class:"cmp-container-title"},Co=o("span",null,null,-1),wo=[Co],To=o("hr",{class:"thin-hr"},null,-1),xo={key:0,class:"select-label-container"},Io={class:"choose-labels-container"},Ao=o("p",{class:"labels-title"},"Labels",-1),Bo={class:"labels-list flex clean-list"},Do=["onClick"],Uo={class:"label-title"},So={key:0,class:"v-icon"},$o=["onClick"],Lo=o("a",null,null,-1),Fo=[Lo],Oo={key:1,class:"create-label-container"},Mo=o("p",{class:"labels-title"},"Name",-1),jo=D("Select a color"),Eo=["onClick"],No={key:0,class:"v-icon"},Ro={class:"create-label-buttons-container flex"};function Go(t,e,i,d,a,s){const c=p("list-slot"),l=p("delete-cmp"),g=j("focus");return r(),n(v,null,[a.isRemove?h("",!0):(r(),n("section",ko,[o("div",_o,[a.isCreate||a.isChange||a.isRemove?(r(),n("a",{key:0,class:"back-to-cmp-btn",onClick:e[0]||(e[0]=u=>(a.isCreate=!1,a.isChange=!1))},fo)):h("",!0),o("p",yo,b(s.cmpTitle),1),o("a",{class:"close-cmp-btn",onClick:e[1]||(e[1]=(...u)=>s.closeCmp&&s.closeCmp(...u))},wo)]),To,!a.isCreate&&!a.isChange&&!a.isRemove?(r(),n("section",xo,[A(o("input",{class:"label-input",type:"text","onUpdate:modelValue":e[2]||(e[2]=u=>a.filterTxt=u),placeholder:"Search labels.."},null,512),[[B,a.filterTxt],[g]]),o("div",Io,[Ao,o("ul",Bo,[(r(!0),n(v,null,w(s.getLabels,u=>(r(),n("li",{class:"label-option-container flex",key:u.id},[o("div",{class:"label-option flex pointer",style:S({backgroundColor:u.color}),onClick:k=>s.toggleLabel(u.id)},[o("span",Uo,b(u.title),1),u.inTask?(r(),n("span",So)):h("",!0)],12,Do),o("span",{class:"change-label-btn",onClick:k=>s.openCreate(u.id)},Fo,8,$o)]))),128))])]),o("button",{class:"open-create-label-btn",onClick:e[3]||(e[3]=(...u)=>s.openCreate&&s.openCreate(...u))}," Create a new label ")])):(r(),n("section",Oo,[o("label",null,[Mo,A(o("input",{type:"text",class:"label-input","onUpdate:modelValue":e[4]||(e[4]=u=>a.labelToChange.title=u)},null,512),[[B,a.labelToChange.title],[g]])]),x(c,null,{title:C(()=>[jo]),list:C(()=>[(r(!0),n(v,null,w(a.defaultLabels,u=>(r(),n("div",{key:u.id,class:"label-option flex pointer",style:S({backgroundColor:u.color}),onClick:k=>s.selectLabel(u.id)},[u.isSelected?(r(),n("span",No)):h("",!0)],12,Eo))),128))]),_:1}),o("div",Ro,[o("button",{class:"create-label-btn",onClick:e[5]||(e[5]=_((...u)=>s.changeBoardLabels&&s.changeBoardLabels(...u),["stop"]))},b(s.createBtn),1),a.isChange?(r(),n("button",{key:0,class:"delete-label-btn",onClick:e[6]||(e[6]=_(u=>a.isRemove=!0,["stop"]))}," Delete ")):h("",!0)])]))])),a.isRemove?(r(),y(l,{key:1,type:"label",onRemove:s.removeLabelFromBoard,onCloseCmp:s.closeCmp},null,8,["onRemove","onCloseCmp"])):h("",!0)],64)}var qo=T(bo,[["render",Go]]);const Po={props:{boardMembers:Object,task:Object},components:{userAvatar:N},data(){return{members:[],filterTxt:""}},created(){this.aggregateMembers()},methods:{closeCmp(){this.$emit("closeCmp"),console.log("closing cmp")},toggleMemberInTask(t){console.log(),this.$emit("toggleMemberInTask",t)},aggregateMembers(){var e;this.members=[];let t=(e=this.task.members)==null?void 0:e.map(i=>i._id);this.boardMembers.forEach(i=>{t!=null&&t.includes(i._id)&&(i.isCheck=!0),this.members.push(JSON.parse(JSON.stringify(i)))})}},computed:{getMembers(){const t=new RegExp(this.filterTxt,"i");return this.members.filter(e=>t.test(e.fullname))}},watch:{task:{handler(){this.aggregateMembers()},deep:!0}},unmounted(){}},Wo={class:"members-preview"},Jo={class:"members-preview-header flex"},Zo=o("span",{class:"cmp-header-title"},"Members",-1),Yo=o("hr",null,null,-1),Ho={class:"members-container"},Vo={class:"input-container"},Xo=o("h4",{class:"members-preview-title"},"Board members",-1),zo={class:"board-members-container"},Qo=["onClick"],Ko={class:"member-fullname"},ea={key:0,class:"member-check"},ta=o("div",null,null,-1);function sa(t,e,i,d,a,s){const c=p("user-avatar"),l=j("focus");return r(),n("section",Wo,[o("div",Jo,[Zo,o("a",{onClick:e[0]||(e[0]=(...g)=>s.closeCmp&&s.closeCmp(...g)),class:"close-members-preview pointer"},"X")]),Yo,o("div",Ho,[o("div",Vo,[A(o("input",{"onUpdate:modelValue":e[1]||(e[1]=g=>a.filterTxt=g),class:"members-filter",type:"text",placeholder:"Search Members"},null,512),[[l],[B,a.filterTxt]])]),Xo,o("ul",zo,[(r(!0),n(v,null,w(s.getMembers,(g,u)=>(r(),n("li",{class:"board-member pointer",key:u,onClick:k=>s.toggleMemberInTask(g)},[x(c,{user:g},null,8,["user"]),o("div",Ko,b(g.fullname)+b(`(${g.username})`),1),g.isCheck?(r(),n("div",ea)):h("",!0)],8,Qo))),128)),ta])])])}var oa=T(Po,[["render",sa]]);const aa={name:"cover-unsplash",components:{listSlot:J},props:{style:Object,title:String,attachments:Array},data(){return{currStyle:{bgClr:"",bgImg:"",isFullCover:!1,uploadedImg:""},photos:[],currTitle:"",searchingUnsplash:!1,searchResults:!1,search:"",photo_url:null,download_url:null,searchTerms:["Productivity","Perspective","Organization","Colorful","Nature","Business","Minimal","Space","Animals"],bgColors:[{id:"l101",color:"#61bd4f",isSelected:!1},{id:"l102",color:"#f2d600",isSelected:!1},{id:"l103",color:"#ff9f1a",isSelected:!1},{id:"l104",color:"#eb5a46",isSelected:!1},{id:"l105",color:"#c377e0",isSelected:!1},{id:"l106",color:"#0079bf",isSelected:!1},{id:"l107",color:"#00c2e0",isSelected:!1},{id:"l108",color:"#51e898",isSelected:!1},{id:"l109",color:"#ff78cb",isSelected:!1},{id:"l110",color:"#344563",isSelected:!1}]}},created(){this.currStyle=JSON.parse(JSON.stringify(this.style)),this.currTitle=this.title,this.searchPhoto(this.title)},methods:{searchPhoto(t){const e="Y2X6Y_wdMpqvaYX_4jgO-dOBqVAsQMQpihsIFNOAX5E";let i=20,d=t;d||(d=(this==null?void 0:this.search)||"business"),ne.get(`https://api.unsplash.com/search/photos?page=1&per_page=${i}&query=${d}&client_id=${e}`).then(a=>{this.photos=a.data.results}).catch(a=>{console.log(a)})},searchPhotoWithButton(t){this.searchResults=!0,this.searchPhoto(t)},applyPhoto(t){var e;this.currStyle.uploadedImg=((e=t==null?void 0:t.urls)==null?void 0:e.regular)||t,this.currStyle.bgClr="",this.currStyle.bgImg="",this.searchResults=!1,this.searchingUnsplash=!1,this.search="",this.$emit("addStyle",this.currStyle)},waitSearch:Ae.debounce(function(){this.searchPhoto(),this.searchResults=!0,this.search=""},1e3),selectBgClr(t){this.currStyle.bgClr=t,this.currStyle.bgImg="",this.currStyle.uploadedImg="",this.$emit("addStyle",this.currStyle)},removeCover(){this.currStyle.bgClr="",this.currStyle.bgImg="",this.currStyle.uploadedImg="",this.$emit("addStyle",this.currStyle)},closeCmp(){this.$emit("closeCmp")},setFullCover(t){this.currStyle.isFullCover=t,this.$emit("addStyle",this.currStyle)},async onAttachImg(t){const e=await this.$store.dispatch({type:"attachImg",ev:t});this.currStyle.uploadedImg=e.url,this.currStyle.bgClr="",this.currStyle.bgImg="",this.$emit("addStyle",this.currStyle)}},computed:{pageTitle(){return this.searchingUnsplash?"Photo search":"Cover"},currCoverImg(){var t,e;return((t=this.style)==null?void 0:t.bgImg)||((e=this.style)==null?void 0:e.uploadedImg)||""},currCoverBg(){var e;return{"background-color":((e=this.style)==null?void 0:e.bgClr)||"#5E6C84"}},deletable(){if(this.style.bgImg||this.style.uploadedImg||this.style.bgClr)return!0}}},ia={class:"cmp-preview cover-unsplash-preview"},ra={class:"cmp-header"},la=o("span",null,null,-1),na=[la],da={class:"cmp-container-title"},ca=o("span",null,null,-1),ua=[ca],ha=o("hr",null,null,-1),ga={key:0,class:"main-cover-screen"},ma=o("p",{class:"labels-title"},"Size",-1),pa={class:"cover-size-select"},ba=["src"],ka=o("div",{class:"over-full-cover-select"},null,-1),_a=o("div",{class:"dummy title"},null,-1),va=o("div",{class:"dummy text"},null,-1),fa=["src"],ya=o("div",{class:"over-full-cover-select"},null,-1),Ca=o("div",{class:"dummy title"},null,-1),wa=o("div",{class:"dummy text"},null,-1),Ta=D("Color"),xa=["onClick"],Ia=D("Attachments"),Aa=["src","onClick"],Ba=o("div",{class:"unsplash-btn full-width-btn pointer"},"Upload a cover image",-1),Da=D("Photos from Unsplash"),Ua=["src","onClick"],Sa={key:1,class:"search-unsplash-screen"},$a=D("Suggested searches"),La=["onClick"],Fa=D("Top photos"),Oa=["src","onClick"],Ma={key:2,class:"unsplash-results-screen"},ja=["src","onClick"];function Ea(t,e,i,d,a,s){const c=p("list-slot");return r(),n("section",ia,[o("div",ra,[a.searchingUnsplash?(r(),n("a",{key:0,class:"back-to-cmp-btn",onClick:e[0]||(e[0]=l=>(a.searchingUnsplash=!1,a.searchResults=!1))},na)):h("",!0),o("p",da,b(s.pageTitle),1),o("a",{class:"close-cmp-btn",onClick:e[1]||(e[1]=(...l)=>s.closeCmp&&s.closeCmp(...l))},ua)]),ha,a.searchingUnsplash?h("",!0):(r(),n("section",ga,[ma,o("div",pa,[o("button",{class:"coverSelect pointer",onClick:e[2]||(e[2]=l=>s.setFullCover(!0))},[s.currCoverImg?(r(),n("img",{key:0,class:"coverSelectImg",src:s.currCoverImg,alt:""},null,8,ba)):h("",!0),s.currCoverBg?(r(),n("div",{key:1,class:"coverSelectImg",style:S(s.currCoverBg)},null,4)):h("",!0),ka,_a,va]),o("button",{class:"coverSelect pointer",onClick:e[3]||(e[3]=l=>s.setFullCover(!1))},[s.currCoverImg?(r(),n("img",{key:0,class:"coverSelectImg top",src:s.currCoverImg,alt:""},null,8,fa)):h("",!0),s.currCoverBg?(r(),n("div",{key:1,class:"coverSelectImg top",style:S(s.currCoverBg)},null,4)):h("",!0),ya,Ca,wa])]),s.deletable?(r(),n("div",{key:0,onClick:e[4]||(e[4]=(...l)=>s.removeCover&&s.removeCover(...l)),class:"unsplash-btn full-width-btn remove-cover pointer"},"Remove cover")):h("",!0),x(c,null,{title:C(()=>[Ta]),list:C(()=>[(r(!0),n(v,null,w(a.bgColors,l=>(r(),n("div",{key:l.id,class:"label-option flex pointer",style:S({backgroundColor:l.color}),onClick:g=>s.selectBgClr(l.color)},null,12,xa))),128))]),_:1}),o("section",null,[x(c,null,{title:C(()=>[Ia]),list:C(()=>{var l;return[(r(!0),n(v,null,w((l=i.attachments)==null?void 0:l.slice(0,6),(g,u)=>(r(),n("img",{key:u,class:"unsplash-result-small pointer",src:g,alt:"img",onClick:k=>s.applyPhoto(g)},null,8,Aa))),128))]}),_:1}),o("label",null,[o("input",{type:"file",onChange:e[5]||(e[5]=(...l)=>s.onAttachImg&&s.onAttachImg(...l)),hidden:""},null,32),Ba])]),x(c,null,{title:C(()=>[Da]),list:C(()=>[(r(!0),n(v,null,w(a.photos.slice(0,6),l=>(r(),n("img",{key:l.id,class:"unsplash-result-small pointer",src:l.urls.thumb,alt:"img",onClick:g=>s.applyPhoto(l)},null,8,Ua))),128))]),_:1}),o("button",{class:"unsplash-btn full-width-btn pointer",onClick:e[6]||(e[6]=l=>a.searchingUnsplash=!0)}," Search for photos ")])),a.searchingUnsplash&&!a.searchResults?(r(),n("section",Sa,[A(o("input",{type:"text",placeholder:"Search Unsplash for photos",class:"unsplash-search","onUpdate:modelValue":e[7]||(e[7]=l=>a.search=l),onInput:e[8]||(e[8]=(...l)=>s.waitSearch&&s.waitSearch(...l))},null,544),[[B,a.search]]),x(c,null,{title:C(()=>[$a]),list:C(()=>[(r(!0),n(v,null,w(a.searchTerms,(l,g)=>(r(),n("button",{class:"unsplash-btn pointer",key:g,onClick:u=>s.searchPhotoWithButton(l)},b(l),9,La))),128))]),_:1}),x(c,null,{title:C(()=>[Fa]),list:C(()=>[(r(!0),n(v,null,w(a.photos.slice(0,12),l=>(r(),n("img",{key:l.id,class:"unsplash-result-small pointer",src:l.urls.thumb,alt:"img",onClick:g=>s.applyPhoto(l)},null,8,Oa))),128))]),_:1})])):h("",!0),a.searchResults?(r(),n("section",Ma,[x(c,null,{list:C(()=>[(r(!0),n(v,null,w(a.photos,l=>(r(),n("img",{key:l.id,class:"unsplash-result-large pointer",src:l.urls.thumb,alt:"img",onClick:g=>s.applyPhoto(l)},null,8,ja))),128))]),_:1})])):h("",!0)])}var Na=T(aa,[["render",Ea]]);const Ra={components:{},data(){return{title:"Checklist"}},created(){},methods:{closeCmp(){this.$emit("closeCmp")},addChecklist(){this.$emit("createChecklist",this.title)}},computed:{},unmounted(){}},Ga={class:"create-checklist-container"},qa={class:"checklist-header flex"},Pa=o("span",{class:"cmp-header-title"},"Add checklist",-1),Wa=o("hr",{class:"thin-hr"},null,-1),Ja={class:"create-checklist-form"},Za=o("label",{class:"form-title",for:"txt"},"Title",-1),Ya=o("button",{class:"create-form-done pointer"},"Add",-1);function Ha(t,e,i,d,a,s){const c=j("focus");return r(),n("section",Ga,[o("div",qa,[Pa,o("a",{onClick:e[0]||(e[0]=(...l)=>s.closeCmp&&s.closeCmp(...l)),class:"close-checklist pointer"})]),Wa,o("div",Ja,[o("div",null,[Za,o("form",{onSubmit:e[2]||(e[2]=_(l=>s.addChecklist(a.title),["prevent"]))},[A(o("input",{class:"checklist-form","onUpdate:modelValue":e[1]||(e[1]=l=>a.title=l),type:"text",name:"txt",id:"txt"},null,512),[[B,a.title],[c]]),Ya],32)])])])}var Va=T(Ra,[["render",Ha]]);const Xa={props:{task:Object},components:{},data(){return{isCreateTodo:!1,newTodo:[],isCheckbox:[],isUpdateTodo:!1,editingTodoId:"",addNewTodo:""}},created(){},mounted(){},methods:{createTodo(t){this.addNewTodo=t,console.log("checkListId",t),console.log("this.addNewTodo",this.addNewTodo)},addTodo(t){console.log(this.newTodo),!(!this.newTodo||!this.newTodo.length)&&(this.$emit("addTodo",this.newTodo,t),this.newTodo="")},removeChecklist(t){this.$emit("removeChecklist",t)},updateTodo(t,e,i){i.stopPropagation(),console.log("updating!!!!"),console.log(e);const d=i.currentTarget.textContent;if(!d||!d.length){this.editingTodoId="",this.addNewTodo="";return}console.log("updating with good value !!!!"),this.$emit("updateTodo",t,e,d),this.editingTodoId="",this.addNewTodo=""},removeTodo(t,e){this.$emit("removeTodo",t,e)},openUpdateBar(t){console.log("open"),this.editingTodoId=t,this.addNewTodo=""},closeCreateTodo(){console.log("closing"),this.editingTodoId="",this.addNewTodo=""},checkboxValue(t,e,i){console.log("checklistId",t);const d=i.target.checked;console.log(i.target.checked),this.$emit("updateTodoDone",t,e,d)},stam(t){console.log(t)}},computed:{getTodos(){return this.task.checklists.filter(t=>{})},progressBar(){console.log(this.$refs.checkbox)}},unmounted(){}},za={key:0,class:"td-checklist-preview"},Qa={class:"checklist-title-container"},Ka={class:"checklist-title"},ei=["onClick"],ti={class:"checklist-todo-title"},si=o("label",{class:"todo-content-edit pointer",for:"todo.id"},null,-1),oi=["onClick","checked"],ai=["onClick","onBlur","onUpdate:modelValue"],ii={key:0,class:"update-todo-btn-container"},ri={class:"update-todo-btn flex"},li=o("a",{class:"update-todo-text btn"},"Save",-1),ni={class:"remove-todo-btn-wrapper"},di=["onMousedown"],ci={key:0,class:"add-todo-container"},ui=["onClick"],hi={class:"todo-btn-container"},gi=["onClick"],mi={class:"close-btn-wrapper"};function pi(t,e,i,d,a,s){const c=j("focus");return i.task?(r(),n("section",za,[(r(!0),n(v,null,w(i.task.checklists,(l,g)=>(r(),n("div",{key:g},[o("div",Qa,[o("h3",Ka,b(l.title),1),o("a",{class:"delete-checklist btn",onClick:_(u=>s.removeChecklist(l.id),["stop"])},"Delete",8,ei)]),(r(!0),n(v,null,w(l.todos,u=>(r(),n("div",{key:u.id},[o("div",ti,[si,o("input",{onClick:_(k=>s.checkboxValue(l.id,u.id,k),["stop"]),class:"checkbox-input pointer",type:"checkbox",name:"todo.isDone",id:"todo.id",value:"todo.isDone",checked:u.isDone},null,8,oi),A(o("textarea",{onClick:_(k=>s.openUpdateBar(u.id),["stop"]),class:"todo-clickable-area",onBlur:k=>s.updateTodo(l.id,u.id,k),spellcheck:"false",cols:"100",rows:"20","onUpdate:modelValue":k=>u.title=k,ref_for:!0,ref:"textarea"},b(u.title),41,ai),[[B,u.title]]),a.editingTodoId===u.id?(r(),n("div",ii,[o("div",ri,[li,o("span",{onClick:e[0]||(e[0]=(...k)=>s.closeCreateTodo&&s.closeCreateTodo(...k)),class:"close-update pointer"})]),o("div",ni,[o("span",{onMousedown:k=>s.removeTodo(l.id,u.id),class:"remove-todo-btn pointer"},null,40,di)])])):h("",!0)])]))),128)),a.addNewTodo?h("",!0):(r(),n("div",ci,[o("button",{class:"add-an-item btn",onClick:_(u=>s.createTodo(l.id),["stop"])},"Add an item",8,ui)])),a.addNewTodo===l.id?(r(),n("div",{key:1,class:"add-item-container",onBlur:e[3]||(e[3]=(...u)=>s.createTodo&&s.createTodo(...u))},[o("div",null,[A(o("textarea",{class:"add-item-input",placeholder:"Add an item",type:"text","onUpdate:modelValue":e[1]||(e[1]=u=>a.newTodo=u),cols:"30",rows:"10"},null,512),[[c],[B,a.newTodo]]),o("div",hi,[o("button",{class:"add-todo btn",onClick:_(u=>s.addTodo(l.id),["stop"])},"Add",8,gi),o("div",mi,[o("a",{onClick:e[2]||(e[2]=_((...u)=>s.closeCreateTodo&&s.closeCreateTodo(...u),["stop"])),class:"close-add-todo-btn pointer"})])])])],32)):h("",!0)]))),128))])):h("",!0)}var bi=T(Xa,[["render",pi]]);const ki={props:{activity:Object},data(){return{guestUser:F.getGuestUser()}},created(){},computed:{activityTime(){return Be(new Date(this.activity.createdAt),new Date(Date.now()),{includeSeconds:!0,addSuffix:!0})}},components:{userAvatar:N}},_i={class:"activity-preview flex"},vi={class:"activity-details flex"},fi={class:"activity-username-txt-container flex"},yi={class:"activity-username"},Ci={class:"activity-txt"},wi={class:"activity-time"};function Ti(t,e,i,d,a,s){var l;const c=p("user-avatar");return r(),n("section",_i,[x(c,{user:i.activity.createdBy||a.guestUser},null,8,["user"]),o("div",vi,[o("div",fi,[o("h3",yi,b(((l=i.activity.createdBy)==null?void 0:l.fullname)||a.guestUser.fullname),1),o("p",Ci,b(i.activity.txt),1)]),o("p",wi,b(s.activityTime),1)])])}var pe=T(ki,[["render",Ti]]);const xi={name:"attached-img-preview",props:{attachment:String,idx:Number},methods:{deleteAttachment(){this.$emit("deleteAttachment",this.idx)},makeCover(){this.$emit("makeCover",this.attachment)}}},Ii={class:"attached-img-preview"},Ai=["src"],Bi={class:"attachment-options-container flex"},Di=o("div",{class:"make-cover-icon"},null,-1);function Ui(t,e,i,d,a,s){return r(),n("section",Ii,[o("img",{src:i.attachment,alt:""},null,8,Ai),o("div",Bi,[Di,o("p",{class:"make-cover pointer",onClick:e[0]||(e[0]=(...c)=>s.makeCover&&s.makeCover(...c))},"Make Cover"),o("p",{class:"pointer",onClick:e[1]||(e[1]=(...c)=>s.deleteAttachment&&s.deleteAttachment(...c))},"Delete")])])}var Si=T(xi,[["render",Ui]]),$i="/assets/arrow-down.9f6ee7c2.svg";const Li={name:"task-details",emits:["updateBoard","addLabelToBoard","updateBoardLabels"],data(){return{task:null,imgUrls:[],currBoard:null,currGroup:null,addingDescription:!1,newDescription:"",detailsShown:!1,checklistTitle:"",handles:{isLabel:!1,isAttachOn:!1,isDatesOn:!1,isMembers:!1,isCover:!1,isDelete:!1,isChecklist:!1}}},async created(){await this.loadTask(),O.on("someone updated",this.boardUpdated)},unmounted(){O.off("someone updated",this.boardUpdated)},methods:{async loadTask(){const{boardId:t,groupId:e,taskId:i}=this.$route.params;this.currBoard=await this.$store.dispatch({type:"loadBoard",boardId:t}),this.currGroup=this.currBoard.groups.find(a=>a.id===e);const d=this.currGroup.tasks.find(a=>a.id===i);this.task=JSON.parse(JSON.stringify(d)),this.newDescription=this.task.description,this.imgUrls=this.task.attachments},boardUpdated(){this.loadTask()},moveToBoard(){const t=this.$store.getters.getCurrBoard;this.$router.push(`/board/${t._id}`)},async addStyle(t){this.task.style=t,await this.saveTask("Updated style"),this.loadTask()},openCmp(t){for(let e in this.handles)this.handles[e]=!1;this.handles[t]=!0},closeCmp(){for(let t in this.handles)this.handles[t]=!1},async saveTaskTitle(t){const e=t.currentTarget.textContent;this.task.title=e,await this.saveTask("Change task title"),this.loadTask()},async saveDate(t){this.task.dueDate=t,await this.saveTask("Updated due date"),this.closeCmp(),this.loadTask()},async saveTask(t){const e={id:U.makeId(),txt:t,groupId:this.currGroup.id,createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser,task:{id:this.task.id,title:this.task.title}},i=await this.$store.dispatch({type:"saveTask",boardId:this.currBoard._id,groupId:this.currGroup.id,task:this.task,activity:e});this.$emit("updateBoard",i)},addDescription(){this.task.description="",this.addingDescription=!0},clearForm(){this.addingDescription=!1,this.newDescription=""},async saveDescription(){this.task.description=this.newDescription,await this.saveTask("Updated Description"),this.loadTask()},async addLabelToTask(t){this.task.labelIds||(this.task.labelIds=[]),this.task.labelIds.includes(t)?this.task.labelIds=this.task.labelIds.filter(e=>e!==t):this.task.labelIds.push(t),await this.saveTask("Change Labels"),this.loadTask()},async removeLabelFromBoard(t){console.log("task",t);const e=this.currBoard.labels.findIndex(i=>i.id===t);console.log("task",e),this.currBoard.labels.splice(e,1),await this.saveBoard("Remove label")},async updateBoardLabels(t){const e=this.currBoard.labels.findIndex(i=>i.id===t.id);e===-1?this.currBoard.labels.push(t):this.currBoard.labels.splice(e,1,t),await this.saveBoard("Change labels")},async saveBoard(t){const e={id:U.makeId(),txt:t,createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser};this.currBoard.activities.push(e);const i=await this.$store.dispatch({type:"saveBoard",board:JSON.parse(JSON.stringify(this.currBoard))});await this.$emit("updateBoard",i)},async toggleMemberInTask(t){this.task.members||(this.task.members=[]);const e=this.task.members.findIndex(i=>i._id===t._id);e===-1?(this.task.members.push(t),this.task.members.isCheck=!0):(this.task.members.splice(e,1),this.task.members.isCheck=!1),await this.saveTask("Added member"),this.loadTask()},async toggleDueDateDone(){this.task.dueDate.isCompleted=!this.task.dueDate.isCompleted,await this.saveTask("updated due date status"),this.loadTask()},async attachImg(t){const e=await this.$store.dispatch({type:"attachImg",ev:t});this.task.attachments||(this.task.attachments=[]),this.task.attachments.push(e.url),this.task.style.uploadedImg="",this.task.style.bgClr="",this.task.style.bgImg=e.url,await this.saveTask("Added image"),this.loadTask()},async deleteAttachment(t){this.task.attachments.splice(t,1),await this.saveTask("Deleted attachment"),this.loadTask()},async makeCover(t){this.task.style.bgImg=t,this.task.style.bgClr="",this.task.style.uploadedImg="",await this.saveTask("Updated cover photo"),this.loadTask()},async removeTask(t){const e={id:U.makeId(),txt:t,groupId:this.currGroup.id,createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser,task:{id:this.task.id,title:this.task.title}},i=await this.$store.dispatch({type:"removeTask",boardId:this.currBoard._id,groupId:this.currGroup.id,task:this.task,activity:e});this.$emit("updateBoard",i),this.moveToBoard()},setActivities(){this.taskActivities=this.currBoard.activities.filter(t=>{var e;return((e=t.task)==null?void 0:e.id)===this.task.id})},async createChecklist(t){this.task.checklists||(this.task.checklists=[]);const e={id:U.makeId(),title:t,todos:[]};this.task.checklists.push(e),await this.saveTask("Added checklist"),this.loadTask(),this.closeCmp()},async addTodo(t,e){if(!t)return;this.task.checklists.find(d=>d.id===e).todos.push({id:U.makeId(),title:t,isDone:!1}),await this.saveTask("Added todo"),console.log("task",this.task),this.loadTask()},async removeChecklist(t){const e=this.task.checklists.findIndex(i=>i.id===t);this.task.checklists.splice(e,1),await this.saveTask("Removed checklist"),this.loadTask()},async updateTodo(t,e,i){const d=this.task.checklists.find(c=>c.id===t),a=d.todos.find(c=>c.id===e);if(!a)return;a.title=i;const s=d.todos.findIndex(c=>c.id===e);d.todos.splice(s,1,a),await this.saveTask("Updated todo"),this.loadTask()},async updateTodoDone(t,e,i){const d=this.task.checklists.find(c=>c.id===t),a=d.todos.find(c=>c.id===e);a.isDone=i;const s=d.todos.findIndex(c=>c.id===e);d.todos.splice(s,1,a),await this.saveTask("Updated todo"),this.loadTask()},async removeTodo(t,e){const i=this.task.checklists.find(a=>a.id===t),d=i.todos.findIndex(a=>a.id===e);console.log(d),i.todos.splice(d,1),await this.saveTask("removeTodo"),this.loadTask()}},computed:{areDetailsShown(){return this.detailsShown?"Hide Details":"Show Details"},labelsToDisplay(){return this.currBoard.labels.filter(e=>{if(this.task.labelIds.includes(e.id))return e})},formattedDate(){var t=new Date(this.task.dueDate.dueDate);return t.toString().slice(4,21)},dueDateCheckBox(){return this.task.dueDate.isCompleted?"../assets/svgs/full-checkbox.svg":"../assets/svgs/empty-checkbox.svg"},overdue(){if(new Date(this.task.dueDate.dueDate).getTime()<Date.now())return!0},coverStyle(){return this.task.style.uploadedImg?{"background-image":`url(${this.task.style.uploadedImg})`,height:"160px","background-color":"#ccd6e0","border-radius":"3px 3px 0 0"}:this.task.style.bgImg?{"background-image":`url(${this.task.style.bgImg})`,height:"160px","background-color":"#ccd6e0","border-radius":"3px 3px 0 0"}:this.task.style.bgClr?{"background-color":this.task.style.bgClr,height:"100px","border-radius":"3px 3px 0 0"}:{display:"none"}},taskActivities(){return this.currBoard.activities.filter(t=>{var e;return((e=t.task)==null?void 0:e.id)===this.task.id})}},components:{userAvatar:N,attachmentPreview:Ks,datePreview:io,labelPreview:qo,membersPreview:oa,coverUnsplash:Na,deleteCmp:me,createChecklist:Va,checklistActive:bi,activityPreview:pe,attachedImgPreview:Si}},Fi={class:"task-details-main-content"},Oi={key:0,class:"task-details-container"},Mi={class:"task-title-container"},ji={class:"task-group-title"},Ei={class:"show-member-label flex"},Ni={key:0,class:"edit-members-container"},Ri=o("p",{class:"members-header"},"Members",-1),Gi={class:"members-container flex"},qi={key:1,class:"edit-labels-container"},Pi=o("p",{class:"labels-header"},"Labels",-1),Wi={class:"labels-container flex"},Ji={key:2,class:"due-date-container"},Zi=o("p",{class:"due-date-title"},"Due date",-1),Yi={class:"displayed-date-checkbox"},Hi=["src"],Vi={key:0,class:"completed-overdue-label l101-label"},Xi={key:1,class:"completed-overdue-label l104-label"},zi={class:"edit-description-container"},Qi={key:0,class:"description-container"},Ki={class:"description-header-container flex"},er=o("p",{class:"description-header"},"Description",-1),tr={class:"task-description"},sr={key:1,class:"add-edit-description-container"},or=o("p",{class:"description-header"},"Description",-1),ar={key:1,class:"add-description-container"},ir={class:"add-description-buttons-container flex"},rr={key:0,class:"img-container"},lr=o("p",{class:"img-container-header"},"Attachments",-1),nr={class:"activities"},dr={class:"activity-details-header"},cr=o("p",{class:"activity-header"},"Activity",-1),ur={key:0,class:"activities-list"},hr={key:1},gr=o("p",{class:"add-task-buttons-title"},"Add to card",-1),mr={class:"just-buttons-container"},pr=o("h3",{class:"td-actions"},"Actions",-1),br=o("span",{class:"td-delete-icon"},null,-1),kr=o("span",null,"Delete",-1),_r=[br,kr];function vr(t,e,i,d,a,s){var Z,Y,H,V,X,z,Q,K,ee;const c=p("user-avatar"),l=p("attached-img-preview"),g=p("checklist-active"),u=p("activity-preview"),k=p("members-preview"),f=p("label-preview"),L=p("create-checklist"),I=p("date-preview"),ve=p("attachment-preview"),fe=p("cover-unsplash"),ye=p("delete-cmp"),Ce=j("focus");return r(),n("div",{class:"task-details-dark",onClick:e[23]||(e[23]=(...m)=>s.moveToBoard&&s.moveToBoard(...m))},[o("section",{onClick:e[22]||(e[22]=_(()=>{},["stop"])),class:"task-details-page"},[o("button",{class:"go-back-btn",onClick:e[0]||(e[0]=(...m)=>s.moveToBoard&&s.moveToBoard(...m))}),a.task?(r(),n("div",{key:0,style:S(s.coverStyle),class:"task-cover-img"},null,4)):h("",!0),o("div",Fi,[a.task?(r(),n("div",Oi,[o("h3",Mi,[o("p",{class:"task-title",contenteditable:"true",onBlur:e[1]||(e[1]=(...m)=>s.saveTaskTitle&&s.saveTaskTitle(...m))},b(a.task.title),33)]),o("p",ji,"in list "+b(a.currGroup.title),1),o("section",Ei,[(Z=a.task.members)!=null&&Z.length?(r(),n("div",Ni,[Ri,o("div",Gi,[(r(!0),n(v,null,w(a.task.members,m=>(r(),y(c,{"v-if":a.task.members,key:m._id,user:m},null,8,["v-if","user"]))),128)),o("button",{class:"avatar-btn flex",onClick:e[2]||(e[2]=_(m=>s.openCmp("isMembers"),["stop"]))},"+")])])):h("",!0),(Y=a.task.labelIds)!=null&&Y.length?(r(),n("div",qi,[Pi,o("div",Wi,[(r(!0),n(v,null,w(s.labelsToDisplay,m=>(r(),n("div",{key:m.id,class:"label-show flex",onClick:e[3]||(e[3]=_(te=>s.openCmp("isLabel"),["stop"])),style:S({backgroundColor:m.color})},b(m.title),5))),128)),o("button",{class:"label-show-btn flex",onClick:e[4]||(e[4]=_(m=>s.openCmp("isLabel"),["stop"]))},"+")])])):h("",!0),a.task.dueDate?(r(),n("div",Ji,[Zi,o("div",Yi,[o("img",{onClick:e[5]||(e[5]=(...m)=>s.toggleDueDateDone&&s.toggleDueDateDone(...m)),class:"due-date-checkbox",src:s.dueDateCheckBox,alt:""},null,8,Hi),o("span",null,b(s.formattedDate),1),a.task.dueDate.isCompleted?(r(),n("span",Vi,"Completed")):h("",!0),s.overdue&&!a.task.dueDate.isCompleted?(r(),n("span",Xi,"Overdue")):h("",!0),o("img",{onClick:e[6]||(e[6]=(...m)=>t.toggleDates&&t.toggleDates(...m)),src:$i,alt:""})])])):h("",!0)]),o("section",zi,[a.task.description?(r(),n("div",Qi,[o("div",Ki,[er,o("button",{onClick:e[7]||(e[7]=(...m)=>s.addDescription&&s.addDescription(...m)),class:"edit-description-btn btn"},"Edit")]),o("p",tr,b(a.task.description),1)])):(r(),n("div",sr,[or,a.addingDescription?(r(),n("div",ar,[A(o("textarea",{"onUpdate:modelValue":e[9]||(e[9]=m=>a.newDescription=m),class:"description-text-area",placeholder:"Add a more detailed description..."},null,512),[[Ce],[B,a.newDescription]]),o("div",ir,[o("button",{class:"save-description-btn btn",onClick:e[10]||(e[10]=(...m)=>s.saveDescription&&s.saveDescription(...m))},"Save"),o("button",{class:"delete-description-btn",onClick:e[11]||(e[11]=(...m)=>s.clearForm&&s.clearForm(...m))})])])):(r(),n("div",{key:0,class:"fake-text-area",onClick:e[8]||(e[8]=(...m)=>s.addDescription&&s.addDescription(...m))},"Add a more detailed description..."))]))]),((V=(H=a.task)==null?void 0:H.attachments)==null?void 0:V.length)&&((z=(X=a.task)==null?void 0:X.attachments)==null?void 0:z.length)>0?(r(),n("section",rr,[lr,(r(!0),n(v,null,w(a.task.attachments,(m,te)=>(r(),y(l,{key:te,attachment:m,onMakeCover:s.makeCover,onDeleteAttachment:s.deleteAttachment},null,8,["attachment","onMakeCover","onDeleteAttachment"]))),128))])):h("",!0),(Q=a.task.checklists)!=null&&Q.length?(r(),y(g,{key:1,task:a.task,onAddTodo:s.addTodo,onRemoveChecklist:s.removeChecklist,onUpdateTodo:s.updateTodo,onUpdateTodoDone:s.updateTodoDone,onRemoveTodo:s.removeTodo},null,8,["task","onAddTodo","onRemoveChecklist","onUpdateTodo","onUpdateTodoDone","onRemoveTodo"])):h("",!0),o("section",nr,[o("div",dr,[cr,(K=a.currBoard.activities)!=null&&K.length?(r(),n("button",{key:0,class:"details-shown-btn btn",onClick:e[12]||(e[12]=m=>a.detailsShown=!a.detailsShown)},b(s.areDetailsShown),1)):h("",!0)]),a.detailsShown?(r(),n("div",ur,[(r(!0),n(v,null,w(s.taskActivities,m=>(r(),y(u,{key:m.id,activity:m},null,8,["activity"]))),128))])):h("",!0)])])):(r(),n("div",hr,"Loading...")),o("nav",{onClick:e[21]||(e[21]=_(()=>{},["stop"])),class:"add-task-buttons-container"},[gr,o("div",mr,[o("button",{onClick:e[13]||(e[13]=_(m=>s.openCmp("isMembers"),["stop"])),class:"members-btn btn",title:"Members"},"Members"),a.handles.isMembers?(r(),y(k,{key:0,boardMembers:a.currBoard.members,task:a.task,onCloseCmp:s.closeCmp,onToggleMemberInTask:s.toggleMemberInTask},null,8,["boardMembers","task","onCloseCmp","onToggleMemberInTask"])):h("",!0),o("button",{onClick:e[14]||(e[14]=_(m=>s.openCmp("isLabel"),["stop"])),class:"labels-btn btn",title:"Labels"},"Labels"),a.handles.isLabel?(r(),y(f,{key:1,boardLabels:a.currBoard.labels,taskLabelIds:a.task.labelIds,onCloseCmp:s.closeCmp,onAddLabelToTask:s.addLabelToTask,onRemoveLabelFromBoard:s.removeLabelFromBoard,onUpdateBoardLabels:s.updateBoardLabels},null,8,["boardLabels","taskLabelIds","onCloseCmp","onAddLabelToTask","onRemoveLabelFromBoard","onUpdateBoardLabels"])):h("",!0),o("button",{class:"checklist-btn btn",title:"Checklist",onClick:e[15]||(e[15]=_(m=>s.openCmp("isChecklist"),["stop"]))},"Checklist"),a.handles.isChecklist?(r(),y(L,{key:2,onCloseCmp:s.closeCmp,onCreateChecklist:s.createChecklist},null,8,["onCloseCmp","onCreateChecklist"])):h("",!0),o("button",{onClick:e[16]||(e[16]=_(m=>s.openCmp("isDatesOn"),["stop"])),class:"dates-btn btn",title:"Dates"},"Dates"),a.handles.isDatesOn?(r(),y(I,{key:3,dueDate:((ee=a.task.dueDate)==null?void 0:ee.dueDate)||Date.now(),onSaveDate:s.saveDate,onCloseCmp:s.closeCmp},null,8,["dueDate","onSaveDate","onCloseCmp"])):h("",!0),o("button",{onClick:e[17]||(e[17]=_(m=>s.openCmp("isAttachOn"),["stop"])),class:"attachment-img btn",title:"Attachment"},"Attachment"),a.handles.isAttachOn?(r(),y(ve,{key:4,imgUrls:a.imgUrls,onAttachImg:s.attachImg,onCloseCmp:s.closeCmp},null,8,["imgUrls","onAttachImg","onCloseCmp"])):h("",!0),o("button",{onClick:e[18]||(e[18]=_(m=>s.openCmp("isCover"),["stop"])),class:"cover-btn btn font-cmp-btn",title:"Cover"},"Cover"),a.handles.isCover?(r(),y(fe,{key:5,style:S(a.task.style),title:a.task.title,attachments:a.task.attachments,onCloseCmp:s.closeCmp,onAddStyle:s.addStyle},null,8,["style","title","attachments","onCloseCmp","onAddStyle"])):h("",!0)]),pr,o("a",{onClick:e[19]||(e[19]=_(m=>s.openCmp("isDelete"),["stop"])),class:"td-delete-btn btn pointer"},_r),a.handles.isDelete?(r(),y(ye,{key:0,type:"task",onRemove:e[20]||(e[20]=m=>s.removeTask("removed task")),onCloseCmp:s.closeCmp},null,8,["onCloseCmp"])):h("",!0)])])])])}var be=T(Li,[["render",vr]]);const fr={props:{task:Object,groupId:String,isLabelTitle:Boolean},data(){return{boardId:null}},components:{userAvatar:N,taskDetails:be},methods:{toTaskDetails(t,e,i){console.log(i),this.$router.push(`/board/${t}/${e}/${i}`)},toggleLabelTitle(){this.$emit("toggleLabelTitle")}},created(){const{boardId:t}=this.$route.params;this.boardId=t},computed:{formattedDate(){var t=new Date(this.task.dueDate.dueDate);return t.toString().slice(4,10)},isTaskOverdue(){if(new Date(this.task.dueDate.dueDate).getTime()<Date.now())return this.task.dueDate.isCompleted?"l101-label":"l104-label"},labelsToDisplay(){return this.$store.getters.getCurrBoard.labels.filter(e=>{if(this.task.labelIds.includes(e.id))return e})},attachmentCount(){var t;return(t=this.task.attachments)==null?void 0:t.length},checkListsCount(){var i,d;var t=0;(i=this.task.checklists)==null||i.forEach(a=>t+=a.todos.length);var e=0;return(d=this.task.checklists)==null||d.forEach(a=>{e+=a.todos.filter(c=>c.isDone).length}),`${e}/${t}`},openLabel(){return{open:this.isLabelTitle}},taskImgUrl(){return this.task.style.uploadedImg?this.task.style.uploadedImg:this.task.style.bgImg?this.task.style.bgImg:void 0},fullCoverStyle(){var t;return this.task.style.uploadedImg?{backgroundImage:`url(${this.task.style.uploadedImg})`,height:"220px",backgroundColor:"#ccd6e0"}:this.task.style.bgImg?{backgroundImage:`url(${this.task.style.bgImg})`,height:"220px",backgroundColor:"#ccd6e0"}:{"background-color":((t=this.task.style)==null?void 0:t.bgClr)||"#FFFFFF",height:"54px"}},fullCoverTxt(){return this.task.style.uploadedImg||this.task.style.bgImg?"is-img":U.isDarkColor(this.task.style.bgClr)?"is-dark-bg":"is-light-bg"},coverStyle(){return this.task.style.bgClr?{"background-color":this.task.style.bgClr,height:"32px"}:{display:"none"}}}},yr={key:1,class:"top-cover-selected"},Cr=["src"],wr={class:"task-preview-icons"},Tr={class:"task-content"},xr={class:"task-snapshot flex"},Ir={key:0,class:"description-img-preview",title:"Card description"},Ar={key:1,class:"checklists-img-preview",title:"Checklists items"},Br={key:2,class:"attachment-img-preview",title:"Attachment"},Dr={class:"user-avatar-pos flex"};function Ur(t,e,i,d,a,s){var l,g,u,k,f;const c=p("user-avatar");return r(),n("div",{onClick:e[2]||(e[2]=L=>s.toTaskDetails(this.boardId,this.groupId,this.task.id)),class:"task-preview-container"},[this.task.style.isFullCover?(r(),n("div",{key:0,style:S(s.fullCoverStyle),class:"full-cover-selected"},[o("p",{class:E([s.fullCoverTxt,"full-cover-title"])},b(i.task.title),3)],4)):(r(),n("div",yr,[o("div",{style:S(s.coverStyle),class:"task-preview-cover"},null,4),s.taskImgUrl&&!i.task.style.bgClr?(r(),n("img",{key:0,class:"top-cover-img",src:s.taskImgUrl,alt:"",draggable:"false"},null,8,Cr)):h("",!0),o("div",wr,[(l=i.task.labelIds)!=null&&l.length?(r(),n("div",{key:0,class:"labels-container",onClick:e[1]||(e[1]=_((...L)=>t.showLabelTitle&&t.showLabelTitle(...L),["stop"]))},[(r(!0),n(v,null,w(s.labelsToDisplay,L=>(r(),n("div",{key:L.id,class:E(["task-preview-label",s.openLabel]),style:S({backgroundColor:L.color}),onClick:e[0]||(e[0]=_((...I)=>s.toggleLabelTitle&&s.toggleLabelTitle(...I),["stop"]))},[i.isLabelTitle?(r(),n("span",{key:0,class:E(s.openLabel)},b(L.title),3)):h("",!0)],6))),128))])):h("",!0),o("div",Tr,b(i.task.title),1),o("div",xr,[(g=i.task.description)!=null&&g.length?(r(),n("div",Ir)):h("",!0),(u=i.task.checklists)!=null&&u.length?(r(),n("div",Ar,b(s.checkListsCount),1)):h("",!0),(k=i.task.attachments)!=null&&k.length?(r(),n("div",Br,b(s.attachmentCount),1)):h("",!0),(f=i.task.dueDate)!=null&&f.dueDate?(r(),n("div",{key:3,class:E(["date-img-preview",s.isTaskOverdue])},b(s.formattedDate),3)):h("",!0),o("div",Dr,[(r(!0),n(v,null,w(i.task.members,L=>{var I;return r(),y(c,{class:"user-avatar","v-if":(I=i.task.members)==null?void 0:I.length,key:L._id,user:L},null,8,["v-if","user"])}),128))])])])]))])}var Sr=T(fr,[["render",Ur]]);const $r={props:{group:Object,isLabelTitle:Boolean},components:{taskPreview:Sr,Container:de,Draggable:ce},data(){return{isAdding:!1,newTaskTitle:""}},methods:{getPayload(t){return()=>t},onDrop(t){typeof t.removedIndex!="number"&&typeof t.addedIndex!="number"||this.$emit("dropped",{ev:t,groupToId:this.group.id})},async saveIfTxt(){await U.delay(100),this.newTaskTitle?this.addTask():this.clearForm()},clearForm(){this.isAdding=!1,this.newTaskTitle=""},async openAddTask(){this.isAdding=!0,await U.delay(50)},addTask(){if(this.newTaskTitle){const t=$.getEmptyTask();t.title=this.newTaskTitle,this.$emit("saveGroup",{groupId:this.group.id,type:"add task",newValue:t}),this.clearForm()}else{this.isAdding=!1;return}},saveTitle(t){const e=t.currentTarget.textContent;this.$emit("saveGroup",{groupId:this.group.id,type:"save group title",newValue:e})},toggleLabelTitle(){this.$emit("toggleLabelTitle")}},computed:{calcHeight(){return{add:this.isAdding}}}},Lr={class:"groups-border"},Fr={class:"bottom-outside-group"},Or={key:1,class:"add-task-container"},Mr={class:"add-task-buttons-container flex"};function jr(t,e,i,d,a,s){var k;const c=p("task-preview"),l=p("Draggable"),g=p("Container"),u=j("focus");return r(),n("section",Lr,[o("div",{class:"outside-group",contenteditable:"true",onBlur:e[0]||(e[0]=(...f)=>s.saveTitle&&s.saveTitle(...f))},b(i.group.title),33),o("div",{class:E(["group-container",s.calcHeight])},[(k=i.group.tasks)!=null&&k.length?(r(),y(g,{key:0,class:"tasks-container","group-name":"group",orientation:"vertical","get-child-payload":s.getPayload(i.group.id),onDrop:s.onDrop},{default:C(()=>[(r(!0),n(v,null,w(i.group.tasks,f=>(r(),y(l,{class:"draggable-container middle-group-list",key:f.id},{default:C(()=>[x(c,{task:f,groupId:i.group.id,isLabelTitle:i.isLabelTitle,onToggleLabelTitle:s.toggleLabelTitle},null,8,["task","groupId","isLabelTitle","onToggleLabelTitle"])]),_:2},1024))),128))]),_:1},8,["get-child-payload","onDrop"])):h("",!0)],2),o("div",Fr,[a.isAdding?(r(),n("div",Or,[A(o("textarea",{onBlur:e[2]||(e[2]=_((...f)=>s.saveIfTxt&&s.saveIfTxt(...f),["stop"])),"onUpdate:modelValue":e[3]||(e[3]=f=>a.newTaskTitle=f),placeholder:"Enter a title for this card..."},null,544),[[u],[B,a.newTaskTitle]]),o("div",Mr,[o("button",{class:"adding-task-btn btn",onClick:e[4]||(e[4]=(...f)=>s.addTask&&s.addTask(...f))},"Add card"),o("button",{class:"delete-task-btn",onClick:e[5]||(e[5]=(...f)=>s.clearForm&&s.clearForm(...f))})])])):(r(),n("div",{key:0,class:"add-task-btn",onClick:e[1]||(e[1]=(...f)=>s.openAddTask&&s.openAddTask(...f))}," Add a card "))])])}var Er=T($r,[["render",jr]]);const Nr={props:{board:Object},data(){return{filterBy:{txt:""}}},methods:{setFilter(){this.$emit("setFilter",this.filterBy)}},computed:{checkBox(){return"../assets/svgs/empty-checkbox.svg"}},components:{userAvatar:N}},Rr={class:"board-filter"},Gr={class:"cmp-header"},qr=o("p",{class:"cmp-container-title"},"Filter",-1),Pr=o("span",null,null,-1),Wr=[Pr],Jr=o("hr",{class:"thin-hr"},null,-1),Zr={class:"filter-search-container"},Yr=o("p",{class:"filter-section-title"},"Keyword",-1),Hr=o("p",{class:"search-description"},"Search cards, members, labels, and more.",-1),Vr={class:"filter-member-container"},Xr=o("p",{class:"filter-section-title"},"members",-1),zr={class:"filter-no-member flex"},Qr=["src"],Kr=o("div",{class:"filter-no-user-avatar flex"},null,-1),el=o("p",{class:"filter-user-name"},"No members",-1),tl=o("input",{type:"checkbox",value:"no",hidden:""},null,-1),sl={class:"filter-members-list"},ol=["src"],al={class:"filter-user-name"},il=["value"];function rl(t,e,i,d,a,s){const c=p("user-avatar"),l=j("focus"),g=j("modal");return r(),n("section",Rr,[o("div",Gr,[qr,o("a",{class:"close-cmp-btn",onClick:e[0]||(e[0]=u=>t.$emit("closeCmp"))},Wr)]),Jr,o("label",Zr,[Yr,A(o("input",{type:"text",class:"search-input",placeholder:"Enter a keyword...",onInput:e[1]||(e[1]=(...u)=>s.setFilter&&s.setFilter(...u))},null,544),[[l],[g,a.filterBy.txt]]),Hr]),o("div",Vr,[Xr,o("label",zr,[o("img",{class:"checkbox-icon",src:s.checkBox},null,8,Qr),Kr,el,tl]),o("div",sl,[(r(!0),n(v,null,w(i.board.members,u=>(r(),n("label",{key:u._id,class:"filter-member flex"},[o("img",{class:"checkbox-icon",src:s.checkBox},null,8,ol),x(c,{user:u},null,8,["user"]),o("p",al,b(u.fullname),1),o("input",{type:"checkbox",value:u._id,hidden:""},null,8,il)]))),128))])])])}var ll=T(Nr,[["render",rl]]);const nl={props:{board:Object},data(){return{filterBy:"",handles:{isAbout:!1,isSearch:!1,isChangeBg:!1,isShowActivities:!1}}},methods:{toggleMenu(t){for(let e in this.handles)this.handles[e]=!1;typeof t=="string"&&(this.handles[t]=!0)}},computed:{activitiesToDisplay(){return this.board.activities.sort((e,i)=>e.createdAt>i.createdAt?-1:1)},cmpTitle(){return this.handles.isAbout?"About":this.handles.isSearch?"Search":this.handles.isChangeBg?"Change background":this.handles.isShowActivities?"Activitiy":"Menu"}},components:{activityPreview:pe}},dl={class:"board-menu"},cl={class:"cmp-header"},ul=o("span",null,null,-1),hl=[ul],gl={class:"cmp-container-title"},ml=o("span",null,null,-1),pl=[ml],bl=o("hr",{class:"thin-hr"},null,-1),kl={class:"menu-content"},_l={key:0,class:"menu-options flex"},vl=o("span",{class:"trello-icon"},null,-1),fl=o("div",null,[o("p",{class:"menu-option-about"},"About this board"),o("p",{class:"menu-option-about-description"}," Add description to your board ")],-1),yl=[vl,fl],Cl=o("img",{class:"board-bg-preview",src:he},null,-1),wl=o("p",{class:"menu-option-bgc"},"Change background",-1),Tl=[Cl,wl],xl=o("hr",{class:"thin-hr"},null,-1),Il={class:"menu-activities-container"},Al={class:"activities-list"};function Bl(t,e,i,d,a,s){const c=p("activity-preview");return r(),n("section",dl,[o("div",cl,[a.handles.isAbout||a.handles.isChangeBg||a.handles.isShowActivities?(r(),n("a",{key:0,class:"back-to-cmp-btn",onClick:e[0]||(e[0]=(...l)=>s.toggleMenu&&s.toggleMenu(...l))},hl)):h("",!0),o("p",gl,b(s.cmpTitle),1),o("a",{class:"close-cmp-btn",onClick:e[1]||(e[1]=l=>t.$emit("closeCmp"))},pl)]),bl,o("section",kl,[!a.handles.isAbout&&!a.handles.isChangeBg&&!a.handles.isShowActivities?(r(),n("div",_l,[o("div",{class:"menu-option",onClick:e[2]||(e[2]=l=>s.toggleMenu("isAbout"))},yl),o("div",{class:"menu-option",onClick:e[3]||(e[3]=l=>s.toggleMenu("isChangeBg"))},Tl)])):h("",!0),xl,o("section",Il,[a.handles.isShowActivities?h("",!0):(r(),n("p",{key:0,class:"activity-header",onClick:e[4]||(e[4]=l=>s.toggleMenu("isShowActivities"))}," Activity ")),o("div",Al,[(r(!0),n(v,null,w(s.activitiesToDisplay.slice(0,20),l=>(r(),y(c,{key:l.id,activity:l},null,8,["activity"]))),128))]),a.handles.isShowActivities?h("",!0):(r(),n("a",{key:1,class:"show-allActivities",onClick:e[5]||(e[5]=l=>s.toggleMenu("isShowActivities"))},"View all activity "))])])])}var Dl=T(nl,[["render",Bl]]),ke="/assets/full-star.b170b7f3.png",_e="/assets/empty-star.b48fd479.png";const Ul={name:"board-details",data(){return{board:null,dndInfo:{},isLabelTitle:!1,isOpenFilter:!1,isOpenMenu:!1}},components:{boardGroup:Er,userAvatar:N,Container:de,Draggable:ce,boardFilter:ll,boardMenu:Dl},async created(){this.unsubscribe=Ps.on("show-msg",this.showMsg);const{boardId:t}=this.$route.params;this.topic=t,O.emit("board topic",this.topic),O.on("someone updated",this.boardUpdated),this.loadBoard(t)},unmounted(){O.off("someone updated",this.boardUpdated)},methods:{async updateBoard(t){const e=await this.$store.dispatch({type:"saveBoard",board:t});this.board=e},onDrop(t){const e=this.board.groups.splice(t.removedIndex,1)[0];this.board.groups.splice(t.addedIndex,0,e),this.saveBoard()},dropCard({ev:t,groupToId:e}){this.dndInfo.groupFromId=t.payload,t.payload!==e&&(this.dndInfo.groupToId=e),(t.removedIndex||typeof t.removedIndex=="number")&&(this.dndInfo.removedIndex=t.removedIndex),(t.addedIndex||typeof t.addedIndex=="number")&&(this.dndInfo.addedIndex=t.addedIndex),(this.dndInfo.addedIndex||typeof this.dndInfo.addedIndex=="number")&&(this.dndInfo.removedIndex||typeof this.dndInfo.removedIndex=="number")&&this.moveTask()},moveTask(){const t=this.board.groups.find(d=>d.id===this.dndInfo.groupFromId),e=this.dndInfo.groupToId?this.board.groups.find(d=>d.id===this.dndInfo.groupToId):t,i=t.tasks.splice(this.dndInfo.removedIndex,1)[0];e.tasks.splice(this.dndInfo.addedIndex,0,i),this.saveBoard(),this.dndInfo={}},async loadBoard(t){this.board=await this.$store.dispatch({type:"loadBoard",boardId:t})},async saveBoard(t){const e={id:U.makeId(),txt:t,createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser};this.board.activities.push(e),this.board=await this.$store.dispatch({type:"saveBoard",board:JSON.parse(JSON.stringify(this.board))})},async saveBoardTitle(t){const e=t.currentTarget.textContent;this.board.title=e,this.saveBoard("Change board title")},async toggleFavorite(){this.board.isFavorite=!this.board.isFavorite,this.saveBoard("Toggle favorite")},async addGroup(){const t=$.getEmptyGroup();this.board.groups.push(t),this.saveBoard("Added a new group")},async saveGroup({groupId:t,type:e,newValue:i}){const d=JSON.parse(JSON.stringify(this.board.groups.find(s=>s.id===t)));switch(e){case"save group title":d.title=i;break;case"add task":d.tasks.push(i);break}const a={id:U.makeId(),txt:e,createdAt:Date.now(),byMember:this.$store.getters.loggedinUser||this.$store.getters.getGuestUser,group:{id:d.id,title:d.title}};this.board=await this.$store.dispatch({type:"saveGroup",boardId:this.board._id,group:d,activity:a})},toggleLabelTitle(){this.isLabelTitle=!this.isLabelTitle},async addLabelToBoard(t){this.board.labels.push(t),await this.saveBoard("Added a new label")},async updateBoardLabels(t){const e=this.board.labels.findIndex(i=>i.id===t.id);this.board.labels.splice(e,1,t),await this.saveBoard("Added a new label")},toggleFilter(){this.isOpenFilter=!this.isOpenFilter},setFilter(t){this.$store.commit({type:"setFilter",filterBy:t})},boardUpdated(){this.loadBoard(this.board._id)},toggleMenu(){this.isOpenMenu=!this.isOpenMenu}},computed:{isStarred(){return this.board.isFavorite?"filled":"stroke"},background(){var i,d;const t=((i=this.board.style)==null?void 0:i.bgImg)||"",e=((d=this.board.style)==null?void 0:d.bgClr)||"";return{backgroundImage:`url(${t})`,backgroundColor:e}},updatedBoardFromStore(){return this.$store.getters.boards}},watch:{"$route.params.boardId":{immediate:!0,handler(){const{boardId:t}=this.$route.params;!t||this.loadBoard(t)}}},unmounted(){this.unsubscribe()}},Sl={class:"board-header flex"},$l={class:"board-title-container flex"},Ll=o("button",{class:"btn-board-details btn-board"},"Board",-1),Fl={key:0,class:"star",src:ke,alt:""},Ol={key:1,class:"star",src:_e},Ml={class:"members-nav-bar flex"},jl={class:"board-members-container flex"},El=o("button",{class:"invite-btn btn-board btn"},"Invite",-1),Nl={class:"board-header-nav flex"},Rl={class:"groups-layout"},Gl={class:"groups-container flex"};function ql(t,e,i,d,a,s){const c=p("router-view"),l=p("user-avatar"),g=p("board-filter"),u=p("board-menu"),k=p("board-group"),f=p("Draggable"),L=p("Container");return a.board?(r(),n("section",{key:0,class:"board-container",style:S(s.background)},[x(c,{onUpdateBoard:s.updateBoard,onAddLabelToBoard:s.addLabelToBoard,onUpdateBoardLabels:s.updateBoardLabels},null,8,["onUpdateBoard","onAddLabelToBoard","onUpdateBoardLabels"]),o("header",Sl,[o("div",$l,[Ll,o("div",{class:"board-title",contenteditable:"true",onBlur:e[0]||(e[0]=(...I)=>s.saveBoardTitle&&s.saveBoardTitle(...I))},b(a.board.title),33),o("button",{class:"star-btn btn-board btn",onClick:e[1]||(e[1]=_(I=>s.toggleFavorite(a.board._id),["stop"]))},[a.board.isFavorite?(r(),n("img",Fl)):(r(),n("img",Ol))])]),o("div",Ml,[o("div",jl,[(r(!0),n(v,null,w(a.board.members,I=>(r(),y(l,{"v-if":a.board.members,key:I._id,user:I},null,8,["v-if","user"]))),128))]),El]),o("nav",Nl,[o("button",{class:"filter-btn btn-board btn",onClick:e[2]||(e[2]=(...I)=>s.toggleFilter&&s.toggleFilter(...I))}," Filter "),a.isOpenFilter?(r(),y(g,{key:0,board:a.board,onCloseCmp:s.toggleFilter,onSetFilter:s.setFilter},null,8,["board","onCloseCmp","onSetFilter"])):h("",!0),o("button",{class:"show-menu-btn btn-board btn",onClick:e[3]||(e[3]=(...I)=>s.toggleMenu&&s.toggleMenu(...I))}," Show menu "),a.isOpenMenu?(r(),y(u,{key:1,board:a.board,onCloseCmp:s.toggleMenu},null,8,["board","onCloseCmp"])):h("",!0)])]),o("div",Rl,[o("article",Gl,[x(L,{onDrop:s.onDrop,orientation:"horizontal"},{default:C(()=>[(r(!0),n(v,null,w(a.board.groups,I=>(r(),y(f,{class:"draggable-container flex",key:I.id},{default:C(()=>[x(k,{group:I,isLabelTitle:a.isLabelTitle,onDropped:s.dropCard,onSaveGroup:s.saveGroup,onToggleLabelTitle:s.toggleLabelTitle},null,8,["group","isLabelTitle","onDropped","onSaveGroup","onToggleLabelTitle"])]),_:2},1024))),128))]),_:1},8,["onDrop"]),o("div",{class:"add-group",onClick:e[4]||(e[4]=(...I)=>s.addGroup&&s.addGroup(...I))},"+ Add another list")])])],4)):h("",!0)}var Pl=T(Ul,[["render",ql]]);const Wl={name:"work-space",data(){return{isFavorite:!1,isCreateBoard:!1}},methods:{toBoardDetails(t){this.$router.push(`/board/${t}`)},async toggleFavorite(t){console.log(t),this.$store.dispatch({type:"toggleFavorite",board:{boardId:t,status:this.isFavorite}})},async removeBoard(t){this.$store.dispatch({type:"removeBoard",boardId:t})}},computed:{boards(){return this.$store.getters.boards},favoriteBoards(){return this.$store.getters.favoriteBoards}},components:{createBoard:ge}},Jl={class:"main-layout"},Zl={class:"all-boards-container"},Yl={class:"saved-boards"},Hl=["onClick"],Vl={class:"title"},Xl=["onClick"],zl={key:0,class:"ws-full-star",src:ke},Ql={key:1,class:"ws-empty-star",src:_e};function Kl(t,e,i,d,a,s){const c=p("create-board");return r(),n("main",Jl,[o("section",Zl,[o("article",Yl,[(r(!0),n(v,null,w(s.boards,l=>{var g;return r(),n("div",{key:l._id,onClick:u=>s.toBoardDetails(l._id),class:"board-preview img-pos style-font",style:S({backgroundImage:`url(${((g=l.style)==null?void 0:g.bgImg)||""})`})},[o("h2",Vl,b(l.title),1),o("a",{class:"star-container",onClick:_(u=>s.toggleFavorite(l._id),["stop"])},[l.isFavorite?(r(),n("img",zl)):(r(),n("img",Ql))],8,Xl)],12,Hl)}),128)),o("button",{onClick:e[0]||(e[0]=l=>a.isCreateBoard=!0),class:"board-preview justify-center add-card"},"Create new board"),a.isCreateBoard?(r(),y(c,{key:0,onCloseCmp:e[1]||(e[1]=l=>a.isCreateBoard=!1)})):h("",!0)])])])}var en=T(Wl,[["render",Kl]]);const tn={name:"home",data(){return{loginCred:{username:"",password:""},signupCred:{fullname:"",username:"",password:""},isSignIn:!0,msg:""}},computed:{loggedinUser(){return this.$store.getters.loggedinUser},loginSignUpButton(){return this.isSignIn?"Or Sign Up":"Back To Login"}},created(){this.loadUsers()},methods:{async doLogin(){if(!this.loginCred.username){this.msg="Please enter username/password";return}try{await this.$store.dispatch({type:"login",userCred:this.loginCred}),this.$router.push("/board")}catch{this.msg="Failed to login"}},doLogout(){this.$store.dispatch({type:"logout"})},async doSignup(){if(!this.signupCred.fullname||!this.signupCred.password||!this.signupCred.username){this.msg="Please fill out all of the form details";return}try{await this.$store.dispatch({type:"signup",userCred:this.signupCred}),this.$router.push("/board")}catch{this.msg="Failed to sign up new user"}},toggleLoginSignUp(){this.isSignIn=!this.isSignIn},async removeUser(t){try{await this.$store.dispatch({type:"removeUser",userId:t}),this.msg="User removed"}catch{this.msg="Failed to remove user"}},async guestLogin(){try{await this.$store.dispatch({type:"login",userCred:{username:"Guest",password:"123"}}),this.$router.push("/board")}catch(t){console.log(t),this.msg="Failed to do guest login"}},loadUsers(){this.$store.dispatch({type:"loadUsers"})}}},sn={class:"login-page-container"},on=o("h1",null,"Welcome, please log in or sign up!",-1),an=D("WorkSpace"),rn=D("| "),ln=D("About"),nn=o("br",null,null,-1),dn=D("To WorkSpace"),cn={key:2},un=o("button",null,"Login",-1),hn=o("br",null,null,-1),gn=o("button",null,"Login",-1),mn=o("h3",null,"Guest Login:",-1);function pn(t,e,i,d,a,s){const c=p("router-link");return r(),n("section",sn,[on,x(c,{to:"/board"},{default:C(()=>[an]),_:1}),rn,x(c,{to:"/about"},{default:C(()=>[ln]),_:1}),s.loggedinUser?(r(),n("button",{key:0,onClick:e[0]||(e[0]=(...l)=>s.doLogout&&s.doLogout(...l))},"Logout "+b(s.loggedinUser.username),1)):h("",!0),nn,s.loggedinUser?(r(),y(c,{key:1,to:"/board"},{default:C(()=>[dn]),_:1})):(r(),n("section",cn,[a.isSignIn?(r(),n("form",{key:0,onSubmit:e[3]||(e[3]=_((...l)=>s.doLogin&&s.doLogin(...l),["prevent"]))},[A(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>a.loginCred.username=l),placeholder:"Enter username"},null,512),[[B,a.loginCred.username]]),A(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>a.loginCred.password=l),placeholder:"Enter password"},null,512),[[B,a.loginCred.password]]),un],32)):h("",!0),o("button",{onClick:e[4]||(e[4]=(...l)=>s.toggleLoginSignUp&&s.toggleLoginSignUp(...l))},b(s.loginSignUpButton),1),hn,a.isSignIn?h("",!0):(r(),n("form",{key:1,onSubmit:e[8]||(e[8]=_((...l)=>s.doSignup&&s.doSignup(...l),["prevent"]))},[A(o("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=l=>a.signupCred.fullname=l),placeholder:"Enter your full name"},null,512),[[B,a.signupCred.fullname]]),A(o("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=l=>a.signupCred.username=l),placeholder:"Enter username"},null,512),[[B,a.signupCred.username]]),A(o("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=l=>a.signupCred.password=l),placeholder:"Enter password"},null,512),[[B,a.signupCred.password]]),gn],32)),mn,o("button",{onClick:e[9]||(e[9]=(...l)=>s.guestLogin&&s.guestLogin(...l))},"Login as Guest")]))])}var bn=T(tn,[["render",pn]]);const kn=De({history:Ue("/"),routes:[{path:"/",name:"home",component:vs},{path:"/login",name:"login",component:bn},{path:"/board",name:"work-space",component:en},{path:"/board/:boardId",name:"board-details",component:Pl,children:[{path:":groupId/:taskId",name:"task-details",component:be}]},{path:"/about",name:"about",component:xs}]});var _n={state:{boards:[],currBoard:null,filterBy:null},getters:{boards({boards:t}){return JSON.parse(JSON.stringify(t))},favoriteBoards({boards:t}){return t.filter(e=>e.isFavorite)},getCurrBoard({currBoard:t}){return JSON.parse(JSON.stringify(t))}},mutations:{setFilter(t,{filterBy:e}){t.filterBy=e},setBoards(t,{boards:e}){t.boards=e},addBoard(t,{board:e}){t.boards.push(e)},removeBoard(t,{boardId:e}){t.boards=t.boards.filter(i=>i._id!==e)},setCurrBoard(t,{board:e}){t.currBoard=JSON.parse(JSON.stringify(e))},setFavorite(t,{updatedBoard:e}){const i=t.boards.findIndex(d=>d._id===e._id);t.boards.splice(i,1,e),console.log(t.boards)},saveBoard(t,{savedBoard:e}){const i=t.boards.findIndex(d=>d._id===e._id);t.boards.splice(i,1,e)},saveGroup(t,{boardId:e,group:i}){const d=t.boards.find(s=>s._id===e),a=d.groups.findIndex(s=>s.id===i.id);if(a===-1)return d.groups.push(i);d.groups.splice(a,1,i),t.currBoard=d},saveTask(t,{boardId:e,groupId:i,task:d}){const a=t.boards.find(l=>l._id===e),s=a.groups.find(l=>l.id===i),c=s.tasks.findIndex(l=>l.id===d.id);if(c===-1)return s.tasks.push(d);s.tasks.splice(c,1,d),t.currBoard=a},removeTask(t,{board:e,group:i,taskIdx:d}){console.log("before",e),i.tasks.splice(d,1),console.log("after",e),t.currBoard=e}},actions:{async loadBoards({commit:t}){try{const e=await $.query();t({type:"setBoards",boards:e})}catch(e){console.log("board module loadBoards cant load boards now",e)}},async loadBoard({commit:t},{boardId:e}){try{const i=await $.getById(e);return t({type:"setCurrBoard",board:i}),JSON.parse(JSON.stringify(i))}catch(i){console.log("board module loadBoard cant load board now",i)}},async addBoard({commit:t},{title:e,bgClr:i,bgImg:d}){try{const a=$.getEmptyBoard();a.title=e,a.style.bgClr=i,a.style.bgImg=d;const s=await $.save(a);return t({type:"addBoard",board:s}),s._id}catch(a){console.log("board module addBoard cant load boards now",a)}},async removeBoard({commit:t},{boardId:e}){try{await $.remove(e),t({type:"removeBoard",boardId:e})}catch(i){console.log("board module removeBoard cant load boards now",i)}},async removeGroup(){console.log("work in progress")},async removeTask({commit:t,state:e},{boardId:i,groupId:d,task:a,activity:s}){try{const c=e.boards.find(f=>f._id===i),l=c.groups.find(f=>f.id===d),g=l.tasks.findIndex(f=>f.id===a.id);await t({type:"removeTask",board:c,group:l,taskIdx:g});const u=JSON.parse(JSON.stringify(e.currBoard));u.activities.push(s);const k=await $.save(u);return t({type:"saveBoard",savedBoard:k}),JSON.parse(JSON.stringify(k))}catch(c){console.log("board module removeTask cant remove task now",c)}},async toggleFavorite({commit:t},{board:e}){try{const i=await $.getById(e.boardId);i.isFavorite=!i.isFavorite;const d=await $.save(i);t({type:"setFavorite",updatedBoard:d})}catch(i){console.log("board module toggleFavorite cant load boards now",i)}},async saveBoard({commit:t},{board:e}){try{const i=await $.save(e);return t({type:"saveBoard",savedBoard:i}),O.emit("board updated"),JSON.parse(JSON.stringify(i))}catch(i){console.log("board module saveBoard cant save board now",i)}},async attachImg({commit:t},{ev:e}){try{return await $.uploadImg(e)}catch(i){console.log("board module attachImg cant attach img now",i)}},async saveTask({commit:t,state:e},{boardId:i,groupId:d,task:a,activity:s}){try{await t({type:"saveTask",boardId:i,groupId:d,task:a});const c=JSON.parse(JSON.stringify(e.currBoard));c.activities.push(s);const l=await $.save(c);return t({type:"saveBoard",savedBoard:l}),JSON.parse(JSON.stringify(l))}catch(c){console.log("board module saveTask cant save task now",c)}},async saveGroup({commit:t,state:e},{boardId:i,group:d,activity:a}){console.log(d);try{await t({type:"saveGroup",boardId:i,group:d});const s=JSON.parse(JSON.stringify(e.currBoard));s.activities.push(a);const c=await $.save(s);return t({type:"saveBoard",savedBoard:c}),JSON.parse(JSON.stringify(c))}catch(s){console.log("board module saveGroup cant save group now",s)}}}},vn={state:{loggedinUser:F.getLoggedinUser(),users:[],watchedUser:null,guestUser:null},getters:{users({users:t}){return t},loggedinUser({loggedinUser:t}){return t},watchedUser({watchedUser:t}){return t},getGuestUser({guestUser:t}){return t}},mutations:{setLoggedinUser(t,{user:e}){t.loggedinUser=e?ae({},e):null},setWatchedUser(t,{user:e}){t.watchedUser=e},setUsers(t,{users:e}){t.users=e},removeUser(t,{userId:e}){t.users=t.users.filter(i=>i._id!==e)},setGuestUser(t,{guestUser:e}){t.guestUser=e}},actions:{async login({commit:t},{userCred:e}){try{const i=await F.login(e);return t({type:"setLoggedinUser",user:i}),i}catch(i){throw console.log("userStore: Error in login",i),i}},async signup({commit:t},{userCred:e}){try{const i=await F.signup(e);return t({type:"setLoggedinUser",user:i}),i}catch(i){throw console.log("userStore: Error in signup",i),i}},async logout({commit:t}){try{await F.logout(),t({type:"setLoggedinUser",user:null})}catch(e){throw console.log("userStore: Error in logout",e),e}},async loadUsers({commit:t}){try{const e=await F.getUsers();t({type:"setUsers",users:e})}catch(e){throw console.log("userStore: Error in loadUsers",e),e}},async loadAndWatchUser({commit:t},{userId:e}){try{const i=await F.getById(e);t({type:"setWatchedUser",user:i}),O.off(re),O.on(re,d=>{t({type:"setWatchedUser",user:d})})}catch(i){throw console.log("userStore: Error in loadAndWatchUser",i),i}},async removeUser({commit:t},{userId:e}){try{await F.remove(e),t({type:"removeUser",userId:e})}catch(i){throw console.log("userStore: Error in removeUser",i),i}},async updateUser({commit:t},{user:e}){try{e=await F.update(e),t({type:"setUser",user:e})}catch(i){throw console.log("userStore: Error in updateUser",i),i}},loadGuestUser({commit:t}){const e=F.getGuestUser();t({type:"setGuestUser",guestUser:e})}}};const fn=Se({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{boardStore:_n,userStore:vn}}),yn={mounted(t){t.focus()}};const R=$e(ns);R.directive("focus",yn);R.use(Le,{});R.use(Fe,{accessKey:"Y2X6Y_wdMpqvaYX_4jgO-dOBqVAsQMQpihsIFNOAX5E",secret:"W5FeRrlFbgAz3i3d54dHnDm9okVhUeUIXZ6TyvZC_H4"});R.use(Oe);R.use(kn);R.use(fn);R.mount("#app");
